<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[RSS Feed of onseok.blog]]></title><description><![CDATA[배움을 배포하기]]></description><link>https://onseok.blog</link><generator>GatsbyJS</generator><lastBuildDate>Sun, 09 Mar 2025 15:17:45 GMT</lastBuildDate><item><title><![CDATA[Roborazzi로 안드로이드 스크린샷 변경점 시각화 테스트 구축하기]]></title><description><![CDATA[Roborazzi로 안드로이드 스크린샷 변경점 시각화 테스트 구축하기 안드로이드 앱 개발 시 UI…]]></description><link>https://onseok.blog/roborazzi/</link><guid isPermaLink="false">https://onseok.blog/roborazzi/</guid><pubDate>Sun, 09 Mar 2025 00:00:00 GMT</pubDate><content:encoded>&lt;h1 id=&quot;Roborazzi로-안드로이드-스크린샷-변경점-시각화-테스트-구축하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Roborazzi%EB%A1%9C-%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C-%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7-%EB%B3%80%EA%B2%BD%EC%A0%90-%EC%8B%9C%EA%B0%81%ED%99%94-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0&quot; aria-label=&quot;Roborazzi로 안드로이드 스크린샷 변경점 시각화 테스트 구축하기 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Roborazzi로 안드로이드 스크린샷 변경점 시각화 테스트 구축하기&lt;/h1&gt;
&lt;p&gt;안드로이드 앱 개발 시 UI 변경사항이 제대로 적용되었는지 확인하는 과정은 필수적입니다. 특히 다양한 화면 크기와 해상도를 지원해야 하는 안드로이드 환경에서는 더욱 중요합니다. 하지만 코드 리뷰만으로는 이러한 UI 변경사항을 정확히 파악하기 어렵고, 특히 팀 규모가 커질수록 의도치 않은 UI 변경을 놓치기 쉽습니다.&lt;/p&gt;
&lt;p&gt;최근 저는 회사 프로젝트에서 이 문제를 해결하기 위해 &lt;a href=&quot;https://github.com/takahirom/roborazzi&quot;&gt;Roborazzi&lt;/a&gt;를 활용한 스크린샷 테스트 시스템을 구축했습니다. 이 글에서는 &lt;code class=&quot;language-text&quot;&gt;Roborazzi&lt;/code&gt;의 적용부터, &lt;code class=&quot;language-text&quot;&gt;GitHub Actions&lt;/code&gt;를 활용한 CI 파이프라인 구축까지의 경험을 공유하려고 합니다.&lt;/p&gt;
&lt;h2 id=&quot;Roborazzi-소개&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Roborazzi-%EC%86%8C%EA%B0%9C&quot; aria-label=&quot;Roborazzi 소개 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Roborazzi 소개&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/takahirom/roborazzi&quot;&gt;Roborazzi&lt;/a&gt;는 &lt;a href=&quot;https://robolectric.org/&quot;&gt;Robolectric&lt;/a&gt; 기반의 안드로이드 스크린샷 테스트 라이브러리입니다. Robolectric의 Native Graphics Mode(RNG)를 활용하여 JVM 환경에서 실행되는 안드로이드 통합 테스트를 시각화할 수 있게 해줍니다. 아직 Experimental 단계이지만, &lt;a href=&quot;https://github.com/takahirom/roborazzi?tab=readme-ov-file#experimental-feature-ios-support&quot;&gt;Compose Multiplatform iOS&lt;/a&gt;와 &lt;a href=&quot;https://github.com/takahirom/roborazzi?tab=readme-ov-file#experimental-feature-compose-desktop-support&quot;&gt;Compose Desktop&lt;/a&gt;도 실험적으로 지원하고 있습니다.&lt;/p&gt;
&lt;p&gt;Roborazzi의 가장 큰 장점은 실제 기기 없이 JVM 환경에서 스크린샷을 생성하고 비교할 수 있어, CI 환경에서 빠르게 테스트를 실행할 수 있다는 점입니다. 또한 Google의 공식 샘플 프로젝트인 &lt;a href=&quot;https://github.com/android/nowinandroid/blob/main/core/screenshot-testing/src/main/kotlin/com/google/samples/apps/nowinandroid/core/testing/util/ScreenshotHelper.kt&quot;&gt;Now in Android&lt;/a&gt;에도 적용되어 있어 실제 프로덕션 수준의 구현 예시를 찾아볼 수 있습니다.&lt;/p&gt;
&lt;h3 id=&quot;Paparazzi와-Roborazzi-비교&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Paparazzi%EC%99%80-Roborazzi-%EB%B9%84%EA%B5%90&quot; aria-label=&quot;Paparazzi와 Roborazzi 비교 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Paparazzi와 Roborazzi 비교&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/cashapp/paparazzi&quot;&gt;Paparazzi&lt;/a&gt;는 JVM 환경에서 디스플레이를 시각화하는 훌륭한 도구이지만, 안드로이드 프레임워크를 모킹하는 Robolectric과는 호환되지 않습니다. Roborazzi는 이 간극을 메워줍니다. Robolectric과 통합되어 Hilt 등의 의존성 주입을 활용한 테스트가 가능하며, 실제 컴포넌트와 상호작용할 수 있습니다. 본질적으로 Roborazzi는 Paparazzi의 기능을 확장하여 Robolectric으로 스크린샷을 캡처함으로써 더 효율적이고 신뢰할 수 있는 테스트 프로세스를 제공합니다.&lt;/p&gt;
&lt;h3 id=&quot;주요-Gradle-태스크&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A3%BC%EC%9A%94-Gradle-%ED%83%9C%EC%8A%A4%ED%81%AC&quot; aria-label=&quot;주요 Gradle 태스크 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;주요 Gradle 태스크&lt;/h3&gt;
&lt;p&gt;Roborazzi는 다음과 같은 Gradle 태스크를 제공합니다:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;태스크명&lt;/th&gt;
&lt;th&gt;설명&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;recordRoborazziDebug&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;스크린샷을 캡처하고 저장&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;compareRoborazziDebug&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;현재 이미지와 저장된 이미지를 비교&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;verifyRoborazziDebug&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;현재 이미지와 저장된 이미지 간의 차이 검증&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;verifyAndRecordRoborazziDebug&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;이미지 검증 후 차이가 있으면 새 기준 이미지 기록&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;clearRoborazziDebug&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;저장된 스크린샷 삭제 (실험적 기능)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;프로젝트-설정&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%84%A4%EC%A0%95&quot; aria-label=&quot;프로젝트 설정 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;프로젝트 설정&lt;/h2&gt;
&lt;h3 id=&quot;Gradle-설정&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Gradle-%EC%84%A4%EC%A0%95&quot; aria-label=&quot;Gradle 설정 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Gradle 설정&lt;/h3&gt;
&lt;p&gt;먼저 프로젝트 레벨의 &lt;code class=&quot;language-text&quot;&gt;build.gradle.kts&lt;/code&gt;에 Roborazzi 플러그인을 추가합니다. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// root build.gradle.kts&lt;/span&gt;
plugins &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;io.github.takahirom.roborazzi&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; version &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;[version]&quot;&lt;/span&gt;&lt;/span&gt; apply &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;만약, buildScript 블록을 사용할 경우에는 아래와 같이 설정해줍니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// root build.gradle.kts&lt;/span&gt;
buildscript &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;classpath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;io.github.takahirom.roborazzi:roborazzi-gradle-plugin:[version]&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 모듈 레벨의 &lt;code class=&quot;language-text&quot;&gt;build.gradle.kts&lt;/code&gt;에 다음과 같이 설정합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// module build.gradle.kts&lt;/span&gt;
plugins &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;io.github.takahirom.roborazzi&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

android &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 기존 설정&lt;/span&gt;
    
    testOptions &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        unitTests &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            isIncludeAndroidResources &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// Robolectric의 하드웨어 렌더링 모드 사용&lt;/span&gt;
            all &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                it&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;systemProperties&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;robolectric.pixelCopyRenderMode&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;hardware&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Core functions&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;testImplementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;io.github.takahirom.roborazzi:roborazzi:[version]&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Jetpack Compose&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;testImplementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;io.github.takahirom.roborazzi:roborazzi-compose:[version]&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// JUnit rules&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;testImplementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;io.github.takahirom.roborazzi:roborazzi-junit-rule:[version]&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Roborazzi 설정&lt;/span&gt;
roborazzi &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 레퍼런스 이미지 저장 경로 설정&lt;/span&gt;
    outputDir&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;src/test/screenshots&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 비교 이미지 저장 경로 (Experimental option)&lt;/span&gt;
    compare &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        outputDir&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;build/outputs/screenshots_comparison&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;gradleproperties-추가-설정&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#gradleproperties-%EC%B6%94%EA%B0%80-%EC%84%A4%EC%A0%95&quot; aria-label=&quot;gradleproperties 추가 설정 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;gradle.properties 추가 설정&lt;/h3&gt;
&lt;p&gt;Roborazzi는 &lt;code class=&quot;language-text&quot;&gt;gradle.properties&lt;/code&gt; 파일에서 다양한 옵션을 설정할 수 있습니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;properties&quot;&gt;&lt;pre class=&quot;language-properties&quot;&gt;&lt;code class=&quot;language-properties&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 스크린샷 테스트 활성화 옵션&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;roborazzi.test.record&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token value attr-value&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# roborazzi.test.compare=true&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# roborazzi.test.verify=true&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 이미지 리사이즈 스케일 설정&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;roborazzi.record.resizeScale&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token value attr-value&quot;&gt;0.5&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 파일 경로 전략 설정&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 기본값은 relativePathFromCurrentDirectory&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;roborazzi.record.filePathStrategy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token value attr-value&quot;&gt;relativePathFromRoborazziContextOutputDirectory&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 이미지 포맷 설정 (WebP 지원, Experimental)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# roborazzi.record.image.extension=webp&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 오래된 스크린샷 자동 정리 (주의 필요)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# roborazzi.cleanupOldScreenshots=true&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;스크린샷-테스트-작성&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%9E%91%EC%84%B1&quot; aria-label=&quot;스크린샷 테스트 작성 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;스크린샷 테스트 작성&lt;/h2&gt;
&lt;p&gt;이제 실제 스크린샷 테스트를 작성해보겠습니다. &lt;code class=&quot;language-text&quot;&gt;Roborazzi&lt;/code&gt;는 다양한 방식의 스크린샷 캡처를 지원하며, 주요 API는 다음과 같습니다:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;캡처 대상&lt;/th&gt;
&lt;th&gt;코드 예시&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Jetpack Compose&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;composeTestRule.onNodeWithTag(&quot;AddBoxButton&quot;).captureRoboImage()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Espresso View&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;onView(ViewMatchers.isRoot()).captureRoboImage()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;일반 View&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;view.captureRoboImage()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Compose 람다&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;captureRoboImage { Text(&quot;Hello Compose!&quot;) }&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;전체 화면 (Experimental)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;captureScreenRoboImage()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Bitmap&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;bitmap.captureRoboImage()&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;다음은 Jetpack Compose 기반 로그인 화면의 스크린샷 테스트 예시입니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@RunWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;RobolectricTestRunner&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@GraphicsMode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GraphicsMode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Mode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NATIVE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Robolectric Native Graphics 모드 활성화 (필수)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; LoginScreenshotTest &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation builtin&quot;&gt;@get:Rule&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; composeTestRule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createComposeRule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;captureLoginScreen_defaultState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 컴포즈 UI 설정&lt;/span&gt;
        composeTestRule&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            MyAppTheme &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;LoginScreen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    uiState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LoginUiState&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Default&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    onLoginClick &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    onEmailChanged &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    onPasswordChanged &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;token comment&quot;&gt;// 스크린샷 캡처&lt;/span&gt;
        composeTestRule&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onRoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;captureRoboImage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;// 파일명 지정 (기본 출력 디렉토리에 저장됨)&lt;/span&gt;
                &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;loginScreen_defaultState&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;// 추가 옵션 설정&lt;/span&gt;
                roborazziOptions &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;RoborazziOptions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;token comment&quot;&gt;// 이미지 리사이징&lt;/span&gt;
                    recordOptions &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RoborazziOptions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;RecordOptions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                        resizeScale &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.75f&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;token comment&quot;&gt;// 비교 옵션&lt;/span&gt;
                    compareOptions &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RoborazziOptions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;CompareOptions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                        changeThreshold &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.01f&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;captureLoginScreen_errorState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        composeTestRule&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            MyAppTheme &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;LoginScreen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    uiState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LoginUiState&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Invalid credentials&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    onLoginClick &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    onEmailChanged &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    onPasswordChanged &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;token comment&quot;&gt;// 특정 컴포넌트만 캡처할 수도 있음&lt;/span&gt;
        composeTestRule&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onNodeWithTag&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;errorMessage&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;captureRoboImage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;loginScreen_errorMessage&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;token comment&quot;&gt;// 전체 화면 캡처&lt;/span&gt;
        composeTestRule&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onRoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;captureRoboImage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;loginScreen_errorState&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;RoborazziRule-활용&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#RoborazziRule-%ED%99%9C%EC%9A%A9&quot; aria-label=&quot;RoborazziRule 활용 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;RoborazziRule 활용&lt;/h3&gt;
&lt;p&gt;Roborazzi는 JUnit 규칙을 통해 더 편리한 테스트 작성을 지원합니다. &lt;code class=&quot;language-text&quot;&gt;RoborazziRule&lt;/code&gt;은 선택적이지만, 다음과 같은 이점을 제공합니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;RoborazziOptions&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;outputDirectoryPath&lt;/code&gt; 등의 컨텍스트 제공&lt;/li&gt;
&lt;li&gt;다양한 캡처 유형 설정 (LastImage, AllImage, Gif 등)&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@RunWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;RobolectricTestRunner&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@GraphicsMode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GraphicsMode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Mode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NATIVE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; RuleTest &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@get:Rule&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; composeTestRule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createComposeRule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;token annotation builtin&quot;&gt;@get:Rule&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; roborazziRule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;RoborazziRule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        composeRule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; composeTestRule&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        captureRoot &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; composeTestRule&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onRoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        options &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RoborazziRule&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Options&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 테스트 실패 시에만 이미지 캡처&lt;/span&gt;
            captureType &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RoborazziRule&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CaptureType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Gif&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;onlyFail &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 이미지 비교 옵션 설정&lt;/span&gt;
            roborazziOptions &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;RoborazziOptions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                compareOptions &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RoborazziOptions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;CompareOptions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    &lt;span class=&quot;token comment&quot;&gt;// 안티앨리어싱 문제 해결을 위한 설정&lt;/span&gt;
                    imageComparator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SimpleImageComparator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                        maxDistance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.007f&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                        vShift &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;    &lt;span class=&quot;token comment&quot;&gt;// 수직 이동 허용&lt;/span&gt;
                        hShift &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;     &lt;span class=&quot;token comment&quot;&gt;// 수평 이동 허용&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// RoborazziRule 무시 어노테이션&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// @RoborazziRule.Ignore&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;testWithRule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        composeTestRule&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            MyAppTheme &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;token comment&quot;&gt;// RoborazziRule이 테스트 실행 과정에서 자동으로 이미지 캡처&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;GIF-이미지-캡처&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#GIF-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%BA%A1%EC%B2%98&quot; aria-label=&quot;GIF 이미지 캡처 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;GIF 이미지 캡처&lt;/h3&gt;
&lt;p&gt;Roborazzi는 애니메이션이나 사용자 상호작용을 보여주는 GIF 이미지 생성도 지원합니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;captureRoboGifSample&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;onView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ViewMatchers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isRoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;captureRoboGif&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;build/test.gif&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 앱 실행&lt;/span&gt;
            ActivityScenario&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;launch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;MainActivity&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;java&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 다음 페이지로 이동&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;onView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;withId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;R&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;button_first&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 뒤로 가기&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;pressBack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 다시 다음 페이지로 이동&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;onView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;withId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;R&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;button_first&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;다양한-디바이스-설정-테스트&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%8B%A4%EC%96%91%ED%95%9C-%EB%94%94%EB%B0%94%EC%9D%B4%EC%8A%A4-%EC%84%A4%EC%A0%95-%ED%85%8C%EC%8A%A4%ED%8A%B8&quot; aria-label=&quot;다양한 디바이스 설정 테스트 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;다양한 디바이스 설정 테스트&lt;/h3&gt;
&lt;p&gt;실제 사용 환경을 더 잘 반영하기 위해 다양한 디바이스 설정(화면 크기, 방향, 다크 모드 등)에서 스크린샷을 캡처하는 것이 좋습니다. Roborazzi는 &lt;code class=&quot;language-text&quot;&gt;RobolectricDeviceQualifiers&lt;/code&gt;를 통해 미리 정의된 디바이스 설정을 제공합니다:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 클래스 레벨에서 기본 디바이스 설정&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@RunWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;RobolectricTestRunner&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@GraphicsMode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GraphicsMode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Mode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NATIVE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;qualifiers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RobolectricDeviceQualifiers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Pixel5&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; DeviceSpecificScreenshotTest &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 특정 테스트 메서드에만 다른 설정 적용&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;qualifiers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RobolectricDeviceQualifiers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MediumTablet &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;+land&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;captureLoginScreen_landscapeTablet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 다크 모드 설정&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;qualifiers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;+night&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;captureLoginScreen_darkMode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 로케일 설정&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;qualifiers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;+ja&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// 일본어 로케일&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;captureLoginScreen_japaneseLocale&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;운영체제별-렌더링-차이&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EB%B3%84-%EB%A0%8C%EB%8D%94%EB%A7%81-%EC%B0%A8%EC%9D%B4&quot; aria-label=&quot;운영체제별 렌더링 차이 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;운영체제별 렌더링 차이&lt;/h2&gt;
&lt;p&gt;다만, Roborazzi를 사용하면서 몇 가지 주의할 점들이 있습니다.&lt;/p&gt;
&lt;h3 id=&quot;1-OS별-렌더링-불일치-문제&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#1-OS%EB%B3%84-%EB%A0%8C%EB%8D%94%EB%A7%81-%EB%B6%88%EC%9D%BC%EC%B9%98-%EB%AC%B8%EC%A0%9C&quot; aria-label=&quot;1 OS별 렌더링 불일치 문제 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;1. OS별 렌더링 불일치 문제&lt;/h3&gt;
&lt;p&gt;Roborazzi는 &lt;a href=&quot;https://skia.org/&quot;&gt;Skia&lt;/a&gt; 라이브러리를 사용하여 UI를 렌더링하는데, 이 렌더링 결과는 운영체제마다 약간씩 다를 수 있습니다. 이는 &lt;a href=&quot;https://github.com/takahirom/roborazzi?tab=readme-ov-file#q-why-do-my-screenshot-tests-fail-inconsistently-across-different-operating-systems-like-macos-ubuntu-and-windows&quot;&gt;FAQ - Why do my screenshot tests fail inconsistently across different operating systems like MacOS, Ubuntu, and Windows?&lt;/a&gt;에서도 언급된 노운 이슈입니다.&lt;/p&gt;
&lt;p&gt;이 문제는 Now in Android 프로젝트에서도 &lt;a href=&quot;https://github.com/android/nowinandroid/issues/1242#issuecomment-2032962982&quot;&gt;논의된 바 있으며&lt;/a&gt;, 모든 환경에서 동일한 렌더링을 보장할 수 없다는 점이 확인되었습니다.  참고로 이러한 이유로 저의 로컬 PC(Mac)에서도 스크린샷 검증 태스크를 수행하면 실패하였습니다. 주요 원인은 다음과 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;각 OS의 그래픽 드라이버 구현 차이&lt;/li&gt;
&lt;li&gt;폰트 렌더링 방식의 차이&lt;/li&gt;
&lt;li&gt;안티앨리어싱 처리 방식의 차이&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이 문제를 해결하기 위해 &lt;code class=&quot;language-text&quot;&gt;RoborazziOptions.CompareOptions&lt;/code&gt;의 옵션들을 변경해주어도 되겠지만, 저는 이렇게 조금씩 검증 조건을 완화해주다보면 스크린샷을 비교하는 의미가 없어진다는 생각이 들었습니다. 그래서 Roborazzi의 저자인 &lt;a href=&quot;https://github.com/takahirom&quot;&gt;takahirom&lt;/a&gt;님의 의견에 따라 일관성을 위해 기준 이미지 생성과 검증을 모두 동일한 CI 환경에서 수행하도록 구성하였습니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/6a5924b5e21b5f68f8d37a7c9a211ce5/be2fd/now-in-android-roborazzi-compare-options.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 32.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQ0lEQVR42n1Rt04FMRB89QsXfHf25exLL94LiCcBBRIFoQFRIf6FitTxx8OeJaCjGO2O157ZXY987qFKO9TygCpbopNbFAPPV5DE4yCHpmmY6gwzUxD4vxhNDQeeX6Cujig2D+gOT5D9I8r+Hqw4B8vPwMoLmGGHsW5iojsYa5bCRLcVpgaBohIcXCfkrosC+c07ytsPyLtP5NdvCC9fkF29Ev9CfXwGYxyCOnbDDEEiKU9VbokQlp9BY2IQ5OTAoVsCi3WP9XaPZr5UiKIEedahkRu07R5td4I4bVA2S2RyjqwiyBbCT+DSuWF7P4KOIjldWO9O0a32Ko/jCpJ2Wlc7lOUGsu6Rlo2qFc0CrheD0bqcsMB4Zv7tkPGAOnRhuxF4kICT4zCGaXmweQxHpCpaTgSHRIY6p3EtemfyiBD8fso32zSkgc9WczgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;now in android roborazzi compare options&apos; title=&apos;&apos; src=&apos;/static/6a5924b5e21b5f68f8d37a7c9a211ce5/ca1dc/now-in-android-roborazzi-compare-options.png&apos; srcset=&apos;/static/6a5924b5e21b5f68f8d37a7c9a211ce5/e7570/now-in-android-roborazzi-compare-options.png 170w,
/static/6a5924b5e21b5f68f8d37a7c9a211ce5/f46e7/now-in-android-roborazzi-compare-options.png 340w,
/static/6a5924b5e21b5f68f8d37a7c9a211ce5/ca1dc/now-in-android-roborazzi-compare-options.png 680w,
/static/6a5924b5e21b5f68f8d37a7c9a211ce5/be2fd/now-in-android-roborazzi-compare-options.png 952w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;실제로 &lt;a href=&quot;https://github.com/android/nowinandroid/blob/main/core/screenshot-testing/src/main/kotlin/com/google/samples/apps/nowinandroid/core/testing/util/ScreenshotHelper.kt&quot;&gt;nowinandroid&lt;/a&gt;에서도 이미지 비교 옵션에 대해서는 타협하지 않은 점을 확인할 수 있습니다. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;2-메모리-문제-해결&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#2-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0&quot; aria-label=&quot;2 메모리 문제 해결 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;2. 메모리 문제 해결&lt;/h3&gt;
&lt;p&gt;복잡한 UI에서 많은 스크린샷 테스트를 실행할 경우 &lt;code class=&quot;language-text&quot;&gt;OutOfMemoryError&lt;/code&gt;가 발생할 수 있습니다. 이는 &lt;a href=&quot;https://github.com/takahirom/roborazzi/issues/272&quot;&gt;Issue #272&lt;/a&gt;에서도 논의된 문제로, 다음과 같이 &lt;code class=&quot;language-text&quot;&gt;maxHeapSize&lt;/code&gt;를 조정하여 해결할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// build.gradle.kts&lt;/span&gt;
android &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    testOptions &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        unitTests&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            maxHeapSize &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;4096m&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;3-깨진-이미지-문제-해결&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#3-%EA%B9%A8%EC%A7%84-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0&quot; aria-label=&quot;3 깨진 이미지 문제 해결 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;3. 깨진 이미지 문제 해결&lt;/h3&gt;
&lt;p&gt;일부 경우에 Roborazzi로 캡처한 이미지가 깨져 보일 수 있습니다. 이는 주로 API 레벨이 너무 낮거나 Robolectric의 렌더링 모드 설정 문제일 수 있습니다. &lt;a href=&quot;https://github.com/takahirom/roborazzi/issues/255#issuecomment-1972838571&quot;&gt;Issue #255&lt;/a&gt;에서 논의된 것처럼, 다음과 같은 설정으로 해결할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 테스트 클래스에 적용&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sdk &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// 최신 API 레벨 사용&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@GraphicsMode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GraphicsMode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Mode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NATIVE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// Native Graphics 모드 필수&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// build.gradle.kts&lt;/span&gt;
android &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    testOptions &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        unitTests&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            it&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;systemProperties&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;robolectric.pixelCopyRenderMode&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;hardware&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이러한 설정을 통해 대부분의 렌더링 문제를 해결할 수 있었습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;참고로 Robolectric 4.14 버전부터 Android V(SDK 35)를 지원합니다.
&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/47f62cea7df9a0f17684f59f737e42f0/f766a/robolectric-4.1.4.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 28.235294117647058%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBklEQVR42o2RS1OEMBCEc9aFBZLAAsubgICurKXlo/SwZZWe/P8/p52JsHr08NV0kkpPTyLeP7/wdvrA0+sJ8/0zjg8vcHwNx1PYePrfOH5oEf10RDscUJkJeXOFrDLwwgx+bCDjCjrOoXYZdFJARnv4OkG4aDeI7BlzNtx4LCKs1eWDIMFW53BlSgYpArr8Y5bCUzHpzBpv5Q5BmFrYnBFlO2BfGhTNgNKMpDtKOyKvO9TdBEUJLxyJS1edR/s74i+RRRgal2n6a1u78dZWfgY2ZF1QU17zqKsZp3GYpcGKqOhSTWacihOa4cbqZtlbmzE8TbmY8+cZat5PMw53j5hpnRYtvgF2259qX0IZJwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;robolectric 4 1 4&apos; title=&apos;&apos; src=&apos;/static/47f62cea7df9a0f17684f59f737e42f0/ca1dc/robolectric-4.1.4.png&apos; srcset=&apos;/static/47f62cea7df9a0f17684f59f737e42f0/e7570/robolectric-4.1.4.png 170w,
/static/47f62cea7df9a0f17684f59f737e42f0/f46e7/robolectric-4.1.4.png 340w,
/static/47f62cea7df9a0f17684f59f737e42f0/ca1dc/robolectric-4.1.4.png 680w,
/static/47f62cea7df9a0f17684f59f737e42f0/02d09/robolectric-4.1.4.png 1020w,
/static/47f62cea7df9a0f17684f59f737e42f0/9d567/robolectric-4.1.4.png 1360w,
/static/47f62cea7df9a0f17684f59f737e42f0/f766a/robolectric-4.1.4.png 1808w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;CI-파이프라인-구축&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#CI-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EA%B5%AC%EC%B6%95&quot; aria-label=&quot;CI 파이프라인 구축 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;CI 파이프라인 구축&lt;/h2&gt;
&lt;p&gt;테스트를 작성한 후, 이를 CI 파이프라인에 통합하는 것이 중요합니다. 저는 GitHub Actions를 활용하여 PR이 생성될 때마다 스크린샷 테스트를 자동으로 실행하고, 변경사항이 있을 경우 시각적으로 표시하는 시스템을 구축했습니다.&lt;/p&gt;
&lt;h3 id=&quot;GitHub-Actions-워크플로우-구성&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#GitHub-Actions-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EA%B5%AC%EC%84%B1&quot; aria-label=&quot;GitHub Actions 워크플로우 구성 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;GitHub Actions 워크플로우 구성&lt;/h3&gt;
&lt;p&gt;다음은 GitHub Actions를 사용한 워크플로우 설정 예시입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Android Pull Request CI

&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;pull_request&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; main&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; develop &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;verify-screenshots&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    
    &lt;span class=&quot;token key atrule&quot;&gt;permissions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;checks&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; write
      &lt;span class=&quot;token key atrule&quot;&gt;pull-requests&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; write
      &lt;span class=&quot;token key atrule&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; write
      
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Checkout the code
        &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v4
        &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;fetch-depth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
        
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Set up JDK
        &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/setup&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;java@v4
        &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;distribution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;temurin&apos;&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;java-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;17&apos;&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;gradle&apos;&lt;/span&gt;
          
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Set up Android SDK
        &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; android&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;actions/setup&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;android@v3
        
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Grant execute permission for gradlew
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; chmod +x gradlew
        
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run ktlint
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ./gradlew ktlintCheck
        
      &lt;span class=&quot;token comment&quot;&gt;# 스크린샷 검증 단계&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Verify Roborazzi Screenshots
        &lt;span class=&quot;token key atrule&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; screenshotsverify
        &lt;span class=&quot;token key atrule&quot;&gt;continue-on-error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean important&quot;&gt;true&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ./gradlew verifyRoborazziDebug
        
      &lt;span class=&quot;token comment&quot;&gt;# 검증 실패 시 새 스크린샷 생성&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Generate new screenshots if verification failed
        &lt;span class=&quot;token key atrule&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; screenshotsrecord
        &lt;span class=&quot;token key atrule&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; steps.screenshotsverify.outcome == &apos;failure&apos;
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ./gradlew recordRoborazziDebug
        
      &lt;span class=&quot;token comment&quot;&gt;# 브랜치명에서 JIRA 티켓 추출 (회사 상황에 맞게 조정)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Extract JIRA ticket
        &lt;span class=&quot;token key atrule&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; extract_ticket
        &lt;span class=&quot;token key atrule&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; steps.screenshotsrecord.outcome == &apos;success&apos;
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token scalar string&quot;&gt;
          BRANCH_NAME=$(echo ${{ github.head_ref }})
          echo &quot;branch_name=$BRANCH_NAME&quot; &gt;&gt; $GITHUB_OUTPUT&lt;/span&gt;
          
          if &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; $BRANCH_NAME =~ (TICKET&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;0&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;+) &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;; then
            TICKET=&quot;$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;BASH_REMATCH&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&quot;
            echo &quot;ticket=$TICKET&quot; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; $GITHUB_OUTPUT
            &lt;span class=&quot;token key atrule&quot;&gt;echo &quot;Found JIRA ticket&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $TICKET&quot;
          else
            echo &quot;ticket=NO&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;TICKET&quot; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; $GITHUB_OUTPUT
            echo &quot;No JIRA ticket found in branch name&quot;
          fi
          
      &lt;span class=&quot;token comment&quot;&gt;# 새 스크린샷 커밋&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Push new screenshots if available
        &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; stefanzweifel/git&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;auto&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;commit&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;action@v5
        &lt;span class=&quot;token key atrule&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; steps.screenshotsrecord.outcome == &apos;success&apos;
        &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;file_pattern&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;**/*.png&apos;&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;disable_globbing&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean important&quot;&gt;false&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;commit_message&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;${{ steps.extract_ticket.outputs.ticket != &apos;NO-TICKET&apos; &amp;amp;&amp;amp; format(&apos;{0} feat: 스크린샷 업데이트&apos;, steps.extract_ticket.outputs.ticket) || &apos;NO-TICKET feat: 스크린샷 업데이트&apos; }}&quot;&lt;/span&gt;
          
      &lt;span class=&quot;token comment&quot;&gt;# 비교 이미지 수집&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Copy screenshot comparison files
        &lt;span class=&quot;token key atrule&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; copy_screenshots
        &lt;span class=&quot;token key atrule&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; steps.screenshotsverify.outcome == &apos;failure&apos;
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token scalar string&quot;&gt;
          mkdir -p /tmp/screenshot-diff&lt;/span&gt;
          
          cd $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; github.workspace &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          find . &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;name &quot;&lt;span class=&quot;token important&quot;&gt;*_compare.png&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;exec cp &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; /tmp/screenshot&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;diff/ \;
          
          if &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;z &quot;$(find /tmp/screenshot&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;diff &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;type f &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;name &apos;&lt;span class=&quot;token important&quot;&gt;*.png&apos;)&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;; then
            echo &quot;No screenshot files found&quot;
            echo &quot;has_images=false&quot; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; $GITHUB_OUTPUT
          else
            echo &quot;Found screenshot comparison images&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&quot;
            ls &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;la /tmp/screenshot&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;diff
            echo &quot;has_images=true&quot; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; $GITHUB_OUTPUT
          fi
          
      &lt;span class=&quot;token comment&quot;&gt;# Companion Branch 생성&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Create companion branch for screenshot comparison
        &lt;span class=&quot;token key atrule&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; companion_branch
        &lt;span class=&quot;token key atrule&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; steps.copy_screenshots.outputs.has_images == &apos;true&apos;
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token scalar string&quot;&gt;
          BRANCH_NAME=&quot;screenshot-compare-${{ github.event.pull_request.number }}&quot;
          echo &quot;branch_name=$BRANCH_NAME&quot; &gt;&gt; $GITHUB_OUTPUT&lt;/span&gt;
          
          git config &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;global user.name &quot;GitHub Actions&quot;
          git config &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;global user.email &quot;actions@github.com&quot;
          
          git stash &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;u &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; true
          
          git branch &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;D &quot;$BRANCH_NAME&quot; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; true
          git checkout &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;orphan &quot;$BRANCH_NAME&quot;
          git rm &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;rf .
          
          mkdir &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;p screenshot&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;diff
          
          cp /tmp/screenshot&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;diff/&lt;span class=&quot;token important&quot;&gt;*.png&lt;/span&gt; screenshot&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;diff/
          
          git add screenshot&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;diff
          git commit &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;m &quot;Add screenshot comparison results&quot;
          git push origin &quot;$BRANCH_NAME&quot; &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;f
          
          echo &quot;companion_push_success=echo &quot;companion_push_success=true&quot; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; $GITHUB_OUTPUT

          git checkout &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;f $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; github.head_ref &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; git checkout &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;f HEAD
          
      &lt;span class=&quot;token comment&quot;&gt;# 마크다운 리포트 생성&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Generate markdown report for screenshot diffs
        &lt;span class=&quot;token key atrule&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; generate_report
        &lt;span class=&quot;token key atrule&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; steps.companion_branch.outputs.companion_push_success == &apos;true&apos;
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token scalar string&quot;&gt;
          REPORT=&quot;## 📸 스크린샷 비교 결과\n\n&quot;
          REPORT+=&quot;| 화면 이름 | 비교 이미지 |\n&quot;
          REPORT+=&quot;|:--------:|:----------:|\n&quot;&lt;/span&gt;
          
          BRANCH_NAME=&quot;$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; steps.companion_branch.outputs.branch_name &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&quot;
          
          for FILE in /tmp/screenshot&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;diff/&lt;span class=&quot;token important&quot;&gt;*.png;&lt;/span&gt; do
            FILENAME=$(basename &quot;$FILE&quot;)
            SCREENNAME=$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;FILENAME%_compare.png&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          
            IMG_URL=&quot;https&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;//github.com/$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; github.repository &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;/blob/$BRANCH_NAME/screenshot&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;diff/$FILENAME&lt;span class=&quot;token punctuation&quot;&gt;?&lt;/span&gt;raw=true&quot;
          
            REPORT+=&quot;&lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; \`$SCREENNAME\` &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Screenshot&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;($IMG_URL) &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;\n&quot;
          done
          
          EOF=$(dd if=/dev/urandom bs=15 count=1 status=none &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; base64)
          echo &quot;report&amp;lt;&amp;lt;$EOF&quot; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; $GITHUB_OUTPUT
          echo &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;e &quot;$REPORT&quot; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; $GITHUB_OUTPUT
          echo &quot;$EOF&quot; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; $GITHUB_OUTPUT
          
          echo &quot;found_images=true&quot; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt; $GITHUB_OUTPUT
          
      &lt;span class=&quot;token comment&quot;&gt;# 기존 PR 코멘트 찾기&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Find existing comment
        &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; peter&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;evans/find&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;comment@v3
        &lt;span class=&quot;token key atrule&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; find_comment
        &lt;span class=&quot;token key atrule&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; steps.generate_report.outputs.found_images == &apos;true&apos;
        &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;issue-number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; github.event.pull_request.number &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;comment-author&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;github-actions[bot]&apos;&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;body-includes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;## 📸 스크린샷 비교 결과&apos;&lt;/span&gt;
          
      &lt;span class=&quot;token comment&quot;&gt;# PR 코멘트 생성 또는 업데이트&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Create or update comment with comparison results
        &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; peter&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;evans/create&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;or&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;comment@v4
        &lt;span class=&quot;token key atrule&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; steps.generate_report.outputs.found_images == &apos;true&apos;
        &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;comment-id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; steps.find_comment.outputs.comment&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;id &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;issue-number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; github.event.pull_request.number &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; steps.generate_report.outputs.report &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;edit-mode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; replace
          
      &lt;span class=&quot;token comment&quot;&gt;# 단위 테스트 실행&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run unit tests
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ./gradlew testDebugUnitTest &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;stacktrace&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 과정에 성공하면 다음과 같이 정상적으로 코멘트가 생성되는 것을 확인할 수 있습니다.
&lt;figure class=&apos;gatsby-resp-image-figure&apos; style=&apos;margin-bottom: 16px;&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; &apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/9ae60c4bda5d7505e098d4adbed5ef27/c807c/github-pr-comment-sample.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 71.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC2UlEQVR42oWTW0hUURSGD2rjOHOcOZc5c2bO3M4Mc3G0cRwdAyshKAItoknsQkQF9RCBCAUFgQRSWJr1EHirnkQSDCJIfPDN3nroMtmDhreKNAuhR334W/uMYw0Vbfg5a6+99rfXXnsdLl5VjXgihXBlChGSR49BC0S35PSE4HDr/5WiBSG7AuBk1QPNFwQDp3bsRk39LiTTOw07mW6AoGiwO9x/SJDdEEUVIvs6PYYEhwbOalfACwpE2sicElskOxitgjcYBS86YZNdBbJLTpgpzhbbDhMlVGzisa3MDpukgiunDXYWSBMGttodhhhUoEyYzfwsjmXlJFAp6YyoYMzCozsWx/mLbTh99hxc3mAhkMnIlF2TfAyYn+fXVbI5lw8DVhvAcfhcn8bzyUmMPh5FIBTLAdk1ueIyXKCTFpc+4s3bLN5NvzeUzU5jdvYDDmVaUVTKQyMYA/ZtAueSSYyMPcHgwAB8euQ3YJEZbe2Xsba2hrm5eSwuLmGBaX4By8srONJ6AkUm6xawn88BvzU2YnpmBi+mphCMVOaANomuTF9WL4tN/qt4WmMxquImoBeDm8D1piaw8X11FZGKxK8aik4vtYP2TwmKx4hR3X5Y3AG0yCp6Si3oSNTg6vVOtF+6As0fZkCFgPR6vggEZwBWUQMveQrEfKKqQ/VH4aNmtwTj6BUcWKcMXyaqcbevD123uuEPVeSA7DUll450wx5kWk/iwOGjOJg5lhPZzJeobTBiAvQnmUNxPLBLxpU/1dXh2cQERkZGoIcr84/ihYl3oH/okVGPjY0N5EfevtbRiRKLjBDBzJTh0CZwqbYWT8fHMTw8/Ato9JnDi5bjp3Dn3n103ryNG109hpjdS779zRmUU4yuVxgZPhTk3KM0NxsHrq58Rawqla+hC6ovDKukodgiocQqF4j52IEq1dnnj6CMMuyRFPxgfbh3Hxa+rODV6ywi8SR+AvKu4f6frOyxAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;(화면이름은 보안상 흰색박스로 가렸습니다.)&apos; title=&apos;&apos; src=&apos;/static/9ae60c4bda5d7505e098d4adbed5ef27/ca1dc/github-pr-comment-sample.png&apos; srcset=&apos;/static/9ae60c4bda5d7505e098d4adbed5ef27/e7570/github-pr-comment-sample.png 170w,
/static/9ae60c4bda5d7505e098d4adbed5ef27/f46e7/github-pr-comment-sample.png 340w,
/static/9ae60c4bda5d7505e098d4adbed5ef27/ca1dc/github-pr-comment-sample.png 680w,
/static/9ae60c4bda5d7505e098d4adbed5ef27/02d09/github-pr-comment-sample.png 1020w,
/static/9ae60c4bda5d7505e098d4adbed5ef27/9d567/github-pr-comment-sample.png 1360w,
/static/9ae60c4bda5d7505e098d4adbed5ef27/c807c/github-pr-comment-sample.png 1850w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&apos;gatsby-resp-image-figcaption&apos;&gt;(화면이름은 보안상 흰색박스로 가렸습니다.)&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;이 워크플로우는 다음과 같은 순서로 동작합니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;PR이 생성되면 스크린샷 검증 작업(&lt;code class=&quot;language-text&quot;&gt;verifyRoborazziDebug&lt;/code&gt;)을 실행합니다.&lt;/li&gt;
&lt;li&gt;검증에 실패하면(UI 변경이 있으면) 새로운 스크린샷을 생성합니다(&lt;code class=&quot;language-text&quot;&gt;recordRoborazziDebug&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;브랜치 이름에서 JIRA 티켓 번호를 추출하여 커밋 메시지에 포함합니다. 이 부분은 각 회사나 팀의 작업 방식에 맞게 조정할 수 있습니다. (예를 들어, JIRA 대신 GitLab 이슈 번호나 다른 형식의 작업 ID를 사용할 수 있을 것 같습니다.)&lt;/li&gt;
&lt;li&gt;스크린샷 비교 이미지를 별도의 임시 브랜치(companion branch)에 저장합니다.&lt;/li&gt;
&lt;li&gt;비교 이미지를 포함한 마크다운 보고서를 생성하여 PR 코멘트로 추가합니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;Companion-Branch-접근법&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Companion-Branch-%EC%A0%91%EA%B7%BC%EB%B2%95&quot; aria-label=&quot;Companion Branch 접근법 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Companion Branch 접근법&lt;/h3&gt;
&lt;p&gt;문득 이런 생각이 들 수도 있습니다. 스크린샷의 이미지가 과도하게 많아지면 저장소의 용량도 계속해서 증가하는 것은 아닐까?
그래서 &lt;code class=&quot;language-text&quot;&gt;Companion Branch Approach&lt;/code&gt;가 &lt;a href=&quot;https://github.com/DroidKaigi/conference-app-2022/pull/616&quot;&gt;DroidKaigi/conference-app-2022&lt;/a&gt;에서 제안되었습니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/a615bc58211cd02b65ae2b097b60ca5e/3643c/companion-branch-approach.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 71.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACDUlEQVR42l1SWY6cMBTs+58m/zlBRvMxa6+ADXjfsLGhIaMsxfQoUloyCBvXq6r3aieMr1pedbxqRd2LumWUqzgt47zE6RrLPOQ5lquLWdqg3HDb3tYOzzBOPk1lXoyPVadbboT2lFsXp1TWtBVaTUh1J1ph7sGxLHleGlc6H73jJ8beCPGm8b4bE9dO98oBb2PBZdT6nzlfl2X9XseHZv8xK6MuXJzKPMUcxxIJV7Q95akonyDwH/ILjGJ2GJnUb4dTzb3pSQnVEJn3PeraODtLx5IlwON0z5zK1afCTVSKCqPrujbWpVxoV9kQyvI7j6JMGXZh+B6MBWZYkqq1MTaEbnjBe9kqa02cmWg0ZOigfLyXjWbgVNjwfCKt8k50RgrF2gMRTDsM6b3qOuk6abkO92DCFObcCo1hSJfOTVvVjeqpieXY9EgBLuTrT3uTvTX4a/gbOGxzLmDAt/bx0kvKJSEEDbhQhl+4gF/SxTDOkIlCeMP8DknCJn8eYd9J83q8PL4en4/10/78fm5Q9JYTgOEO/AildIMJ484OCaFTLoKzl+ZCethjTJCqotI0TB4JOpVCnpgJL4fqcKGUa8oUN37HtSdMghCRRvoQpnX9eOjCtx97RMSN07kVwg4gREgen/ZPr6f11x8IwdqNEwSvn062lea1TNc3Nb5wm/IWCTgaP2W7WG76/8X7L6/fBteLElXvAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;companion branch approach&apos; title=&apos;&apos; src=&apos;/static/a615bc58211cd02b65ae2b097b60ca5e/ca1dc/companion-branch-approach.png&apos; srcset=&apos;/static/a615bc58211cd02b65ae2b097b60ca5e/e7570/companion-branch-approach.png 170w,
/static/a615bc58211cd02b65ae2b097b60ca5e/f46e7/companion-branch-approach.png 340w,
/static/a615bc58211cd02b65ae2b097b60ca5e/ca1dc/companion-branch-approach.png 680w,
/static/a615bc58211cd02b65ae2b097b60ca5e/02d09/companion-branch-approach.png 1020w,
/static/a615bc58211cd02b65ae2b097b60ca5e/9d567/companion-branch-approach.png 1360w,
/static/a615bc58211cd02b65ae2b097b60ca5e/3643c/companion-branch-approach.png 1400w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;제가 작성한 워크플로우는 비교 이미지들은 메인 코드베이스의 저장소 크기가 커지는 것을 방지하기 위해 임시 브랜치에 저장되어 관리되도록 하였지만, 레퍼런스 이미지들은 저장소에 커밋하고 있습니다. 첨부한 사진처럼 레퍼런스 이미지들도 GitHub Actions Artifact에 업로드하여 이를 &lt;code class=&quot;language-text&quot;&gt;companion branch&lt;/code&gt;에 생성한 비교이미지와 검증 태스크를 수행하는 방법으로 조금 더 개선할 수 있을 것 같습니다. 또한 Github Actions Artifact의 기본 보관 기간은 90일이지만, 보통 PR 생성 후 리뷰, 머지되기까지 길어봐야 1달 이내에 완료된다고 예상하면 보존 기간을 아래와 같이 30일로 설정할 수도 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Store reference images as artifacts
  &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/upload&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;artifact@v4
  &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; reference&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;screenshots
    &lt;span class=&quot;token key atrule&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; src/test/screenshots
    &lt;span class=&quot;token key atrule&quot;&gt;retention-days&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/actions/upload-artifact?tab=readme-ov-file#retention-period&quot;&gt;https://github.com/actions/upload-artifact?tab=readme-ov-file#retention-period&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;결론&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B2%B0%EB%A1%A0&quot; aria-label=&quot;결론 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;결론&lt;/h2&gt;
&lt;p&gt;Roborazzi를 활용한 스크린샷 테스트는 안드로이드 앱의 UI 품질을 높이는 데 큰 도움될 수 있습니다. 특히 CI 파이프라인과 통합하여 자동화된 UI 검증 시스템을 구축하면, 의도치 않은 UI 변경을 사전에 감지하고 시각적으로 확인할 수 있게 되어 좋았던 것 같습니다.
참고로 해당 포스팅에서 Roborazzi의 모든 기능들을 전부 다룬 것은 아닙니다. &lt;a href=&quot;https://github.com/takahirom/roborazzi/releases&quot;&gt;릴리즈&lt;/a&gt;가 될때마다 신규 기능 추가 및 변경사항들을 꾸준히 모니터링하는 것이 중요할 것 같습니다.&lt;/p&gt;
&lt;h2 id=&quot;참고-자료&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C&quot; aria-label=&quot;참고 자료 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;참고 자료&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/takahirom/roborazzi&quot;&gt;https://github.com/takahirom/roborazzi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/android/nowinandroid/blob/main/core/screenshot-testing/src/main/kotlin/com/google/samples/apps/nowinandroid/core/testing/util/ScreenshotHelper.kt&quot;&gt;https://github.com/android/nowinandroid/blob/main/core/screenshot-testing/src/main/kotlin/com/google/samples/apps/nowinandroid/core/testing/util/ScreenshotHelper.kt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/android/nowinandroid/issues/1242#issuecomment-2032962982&quot;&gt;https://github.com/android/nowinandroid/issues/1242#issuecomment-2032962982&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/DroidKaigi/conference-app-2022/pull/616&quot;&gt;https://github.com/DroidKaigi/conference-app-2022/pull/616&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/takahirom/roborazzi-compare-on-github-comment-sample&quot;&gt;https://github.com/takahirom/roborazzi-compare-on-github-comment-sample&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://robolectric.org/configuring/&quot;&gt;https://robolectric.org/configuring/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[JUnit4 vs JUnit5 그리고 Robolectric 호환성 문제 해결하기]]></title><description><![CDATA[안드로이드 개발에서 테스팅은 애플리케이션의 품질을 보장하는 중요한 단계입니다. 특히 JUnit은 자바와 코틀린 환경에서 가장 널리 사용되는 테스팅 프레임워크이지만, JUnit4와 JUnit…]]></description><link>https://onseok.blog/junit4-junit5/</link><guid isPermaLink="false">https://onseok.blog/junit4-junit5/</guid><pubDate>Fri, 07 Mar 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;안드로이드 개발에서 테스팅은 애플리케이션의 품질을 보장하는 중요한 단계입니다. 특히 JUnit은 자바와 코틀린 환경에서 가장 널리 사용되는 테스팅 프레임워크이지만, JUnit4와 JUnit5 사이에는 상당한 차이가 있으며 이는 안드로이드 테스트 환경에서 여러 문제를 일으킬 수 있습니다. 이 글에서는 JUnit4와 JUnit5의 주요 차이점, Robolectric이 JUnit4만 지원하는 제약을 해결하는 방법에 대해 알아보겠습니다.&lt;/p&gt;
&lt;h2 id=&quot;JUnit4-vs-JUnit5&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#JUnit4-vs-JUnit5&quot; aria-label=&quot;JUnit4 vs JUnit5 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;JUnit4 vs JUnit5&lt;/h2&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/1c26ab8af3ae58d148c3a3af21258636/f759a/junit5-release.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 39.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/klEQVR42qWQ2Y7DIAxF+/+fGCmZqE0ChD1kgSy6xYw6b5OXIlkXG3N94HGuK44wYXcWu3f4dj3OJSBJgaRGJKO+N4wxYp5nLMuCKQSEHGumpjop1VNKf/l1XfeGWmv8tC1e3Qt1XaNpGgzDACEEuq5D3/cwxkBKWfbHcdwb0nSi+BCQfoi2bStnRE1KOb3mPM//Dam5qqpCpJQqwTkvRBSMsULGOYOSI9jQ54HxnpAmT9ME730hIKWciEkp5mWFCTtGG6FchPYbhF3hQsxfonNP+DWkS865QkNk1lqM41hIqU57k/9ZG4+nCKh7h7pzePKAlgUwNWdyCZPvkeEbOw1rxzpwrroAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;junit5 release&apos; title=&apos;&apos; src=&apos;/static/1c26ab8af3ae58d148c3a3af21258636/ca1dc/junit5-release.png&apos; srcset=&apos;/static/1c26ab8af3ae58d148c3a3af21258636/e7570/junit5-release.png 170w,
/static/1c26ab8af3ae58d148c3a3af21258636/f46e7/junit5-release.png 340w,
/static/1c26ab8af3ae58d148c3a3af21258636/ca1dc/junit5-release.png 680w,
/static/1c26ab8af3ae58d148c3a3af21258636/f759a/junit5-release.png 1018w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;JUnit5&lt;/code&gt;는 &lt;a href=&quot;https://junit.org/junit5/docs/5.1.0/release-notes/index.html#release-notes-5.0.0&quot;&gt;2017년 9월 10일에 처음 릴리즈&lt;/a&gt; 되었습니다. &lt;code class=&quot;language-text&quot;&gt;JUnit4&lt;/code&gt;보다 여러 면에서 개선되었는데,가장 큰 차이점들을 살펴보겠습니다.&lt;/p&gt;
&lt;h3 id=&quot;1-아키텍처-차이&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#1-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%B0%A8%EC%9D%B4&quot; aria-label=&quot;1 아키텍처 차이 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;1. 아키텍처 차이&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;JUnit4&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;단일 &lt;code class=&quot;language-text&quot;&gt;jar&lt;/code&gt; 파일로 제공&lt;/li&gt;
&lt;li&gt;모놀리식 아키텍처&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;JUnit5&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;모듈화된 구조&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;JUnit Platform&lt;/code&gt;: 테스트 실행을 위한 기반&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;JUnit Jupiter&lt;/code&gt;: 새로운 테스트 API&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;JUnit Vintage&lt;/code&gt;: JUnit3, JUnit4 호환성 지원&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2-어노테이션-변경&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#2-%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98-%EB%B3%80%EA%B2%BD&quot; aria-label=&quot;2 어노테이션 변경 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;2. 어노테이션 변경&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;JUnit4&lt;/th&gt;
&lt;th&gt;JUnit5&lt;/th&gt;
&lt;th&gt;설명&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;@Before&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;@BeforeEach&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;각 테스트 메서드 전에 실행&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;@After&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;@AfterEach&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;각 테스트 메서드 후에 실행&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;@BeforeClass&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;@BeforeAll&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;클래스의 모든 테스트 전에 실행&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;@AfterClass&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;@AfterAll&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;클래스의 모든 테스트 후에 실행&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;@Ignore&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;@Disabled&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;테스트 비활성화&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;td&gt;&lt;code class=&quot;language-text&quot;&gt;@DisplayName&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;테스트에 사용자 정의 이름 부여&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;3-새로운-기능들&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#3-%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B8%B0%EB%8A%A5%EB%93%A4&quot; aria-label=&quot;3 새로운 기능들 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;3. 새로운 기능들&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;JUnit5&lt;/strong&gt;에서 추가된 주요 기능들:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;중첩 테스트&lt;/strong&gt;: &lt;code class=&quot;language-text&quot;&gt;@Nested&lt;/code&gt; 어노테이션&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;태그 필터링&lt;/strong&gt;: &lt;code class=&quot;language-text&quot;&gt;@Tag&lt;/code&gt; 어노테이션&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;파라미터화된 테스트 개선&lt;/strong&gt;: &lt;code class=&quot;language-text&quot;&gt;@ParameterizedTest&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@ValueSource&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@CsvSource&lt;/code&gt; 등&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;확장 모델&lt;/strong&gt;: &lt;code class=&quot;language-text&quot;&gt;@ExtendWith&lt;/code&gt; 사용&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;조건부 테스트 실행&lt;/strong&gt;: &lt;code class=&quot;language-text&quot;&gt;@EnabledOnOs&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@EnabledIfSystemProperty&lt;/code&gt; 등&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;인터페이스 기본 메서드로 테스트 선언 지원&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// JUnit4 예시&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Category&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SlowTests&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;class&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;token function&quot;&gt;myTest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 테스트 코드&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// JUnit5 예시&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Tag&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;slow&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;샘플 테스트&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
void &lt;span class=&quot;token function&quot;&gt;myTest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 테스트 코드&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;안드로이드에서의-JUnit4와-JUnit5&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C%EC%97%90%EC%84%9C%EC%9D%98-JUnit4%EC%99%80-JUnit5&quot; aria-label=&quot;안드로이드에서의 JUnit4와 JUnit5 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;안드로이드에서의 JUnit4와 JUnit5&lt;/h2&gt;
&lt;p&gt;안드로이드 테스트 환경은 주로 &lt;code class=&quot;language-text&quot;&gt;JUnit4&lt;/code&gt;를 기반으로 구축되어 있습니다. 실제로 많은 사용해보셨을만한 아래의 안드로이드 테스팅 라이브러리들이 여전히 &lt;code class=&quot;language-text&quot;&gt;JUnit4&lt;/code&gt; 기반으로 동작합니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.android.com/training/testing/espresso?hl=en&quot;&gt;Espresso&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.android.com/jetpack/androidx/releases/test?hl=en&quot;&gt;AndroidX Test APIs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://site.mockito.org/&quot;&gt;Mockito&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/powermock/powermock?tab=readme-ov-file&quot;&gt;PowerMock&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://hamcrest.org/&quot;&gt;Hamcrest&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이러한 라이브러리들은 대부분 JUnit4의 &lt;code class=&quot;language-text&quot;&gt;@RunWith&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@Rule&lt;/code&gt; 등을 기반으로 작동합니다.&lt;/p&gt;
&lt;p&gt;최근에 회사에서 스크린샷 통합 테스트 구축 작업을 진행하다가, 기존의 테스트 코드들이 &lt;code class=&quot;language-text&quot;&gt;Junit5&lt;/code&gt; 기반으로 동작하고 있어서 JVM UI 테스트를 위해 &lt;a href=&quot;http://robolectric.org/&quot;&gt;Robolectric&lt;/a&gt;을 셋업하는 과정에서 여러 이슈가 있었습니다.&lt;/p&gt;
&lt;h3 id=&quot;Robolectric&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Robolectric&quot; aria-label=&quot;Robolectric permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Robolectric&lt;/h3&gt;
&lt;p&gt;간단하게 설명하자면, &lt;a href=&quot;http://robolectric.org/&quot;&gt;Robolectric&lt;/a&gt;은 안드로이드 UI 테스트를 JVM 에서 실행할 수 있게 해주는 강력한 도구입니다. 그러나 아쉽게도 &lt;code class=&quot;language-text&quot;&gt;Robolectric&lt;/code&gt;은 현재까지도 &lt;code class=&quot;language-text&quot;&gt;JUnit4&lt;/code&gt; 기반에서만 동작합니다.&lt;/p&gt;
&lt;p&gt;참고로, 이와 관련한 오픈 이슈도 있습니다.
&lt;figure class=&apos;gatsby-resp-image-figure&apos; style=&apos;margin-bottom: 16px;&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; &apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/2e36f3783fc9661c069d5f569d07ee50/af7a3/robolectric-junit5-support-issue.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 31.176470588235293%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABAElEQVR42n2QyW6DMBRFWUfMOCbg1AwBApipaYKKUqmrLvoX/f+fuLWdik1RFkc+z7au7GsU/Yj79xfG2wIxzuimGdflE3X/pv0yf2C63dEOVwyXd6SlAEsqOEEEywv/YdA+g/hZ4HEG06ZwSaSx/QM8Ekt/oAJsP9T7W0FrYNoKJOcaES9Bjzn2caZx90dYvgwJ4nV1CNOosy08icFlWFI1yM8DKvGKk1yLZtSz4lQPKNsJadUhLYQmKVqJAM8bWUGnPZPnIctg7CwC06H6YtlMyMpW+gOe13IWGuVBqF7BVlQV/p/7lOlaDPVvW0r4UiCWZZMDx84mm5gufYrq8BcSD59Q8jGb8AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;https://github.com/robolectric/robolectric/issues/3477&apos; title=&apos;&apos; src=&apos;/static/2e36f3783fc9661c069d5f569d07ee50/ca1dc/robolectric-junit5-support-issue.png&apos; srcset=&apos;/static/2e36f3783fc9661c069d5f569d07ee50/e7570/robolectric-junit5-support-issue.png 170w,
/static/2e36f3783fc9661c069d5f569d07ee50/f46e7/robolectric-junit5-support-issue.png 340w,
/static/2e36f3783fc9661c069d5f569d07ee50/ca1dc/robolectric-junit5-support-issue.png 680w,
/static/2e36f3783fc9661c069d5f569d07ee50/02d09/robolectric-junit5-support-issue.png 1020w,
/static/2e36f3783fc9661c069d5f569d07ee50/9d567/robolectric-junit5-support-issue.png 1360w,
/static/2e36f3783fc9661c069d5f569d07ee50/af7a3/robolectric-junit5-support-issue.png 1706w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&apos;gatsby-resp-image-figcaption&apos;&gt;https://github.com/robolectric/robolectric/issues/3477&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Robolectric&lt;/code&gt;의 핵심 기능은 JUnit4의 &lt;code class=&quot;language-text&quot;&gt;@RunWith&lt;/code&gt; 어노테이션을 사용하여 작동하고 있고, 아래의 예시처럼 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Robolectric 테스트 예시&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@RunWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;RobolectricTestRunner&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; MyRobolectricTest &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;testButton_click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; activity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Robolectric&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setupActivity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;MyActivity&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;java&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; button &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; activity&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;findViewById&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;R&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;my_button&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        button&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;performClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 검증 로직&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;JUnit5를-안드로이드에-적용하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#JUnit5%EB%A5%BC-%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C%EC%97%90-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0&quot; aria-label=&quot;JUnit5를 안드로이드에 적용하기 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;JUnit5를 안드로이드에 적용하기&lt;/h2&gt;
&lt;p&gt;Gradle 테스트를 위해 &lt;code class=&quot;language-text&quot;&gt;JUnit5&lt;/code&gt;를 사용하려면 &lt;code class=&quot;language-text&quot;&gt;useJUnitPlatform()&lt;/code&gt; 구성이 필요합니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/e9d30e3d8126fe29e50e15756fec4c41/9444d/use-junit-platform-description.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 25.294117647058822%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVR42oWQSw7DIAxEc5EkfAx2Auki3VTq/c81HSCRumoXT8MY/GMKkhCzIqRGvlThJcOFBB8TVi9YljBYfzNFNWgtyIXUQfNp2xDNqDuE2hq04n8L9odtomsqL9oJybq6IJ3FhQGT5sVj/tI71guqKkp9YH++O+V8wY6zk6zCuQjHlW9Wek/1cXzJiDN2nafICzOuuR3IukN5bpryBqXm7vkFedwJJ1d62w/m1PGW2ymbixg+PUqOOyM0ZQQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;use junit platform description&apos; title=&apos;&apos; src=&apos;/static/e9d30e3d8126fe29e50e15756fec4c41/ca1dc/use-junit-platform-description.png&apos; srcset=&apos;/static/e9d30e3d8126fe29e50e15756fec4c41/e7570/use-junit-platform-description.png 170w,
/static/e9d30e3d8126fe29e50e15756fec4c41/f46e7/use-junit-platform-description.png 340w,
/static/e9d30e3d8126fe29e50e15756fec4c41/ca1dc/use-junit-platform-description.png 680w,
/static/e9d30e3d8126fe29e50e15756fec4c41/02d09/use-junit-platform-description.png 1020w,
/static/e9d30e3d8126fe29e50e15756fec4c41/9d567/use-junit-platform-description.png 1360w,
/static/e9d30e3d8126fe29e50e15756fec4c41/9444d/use-junit-platform-description.png 2098w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// build.gradle.kts&lt;/span&gt;
tasks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;withType&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Test&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;useJUnitPlatform&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;testImplementation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.junit.jupiter:junit-jupiter-api:5.9.3&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;testRuntimeOnly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.junit.jupiter:junit-jupiter-engine:5.9.3&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그렇다면 &lt;code class=&quot;language-text&quot;&gt;JUnit5&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Robolectric&lt;/code&gt;을 함께 사용하려면 어떻게 해야할까요?&lt;/p&gt;
&lt;p&gt;앞서 설명했던 &lt;code class=&quot;language-text&quot;&gt;JUnit Vintage&lt;/code&gt;를 사용하시면 됩니다.&lt;/p&gt;
&lt;p&gt;&lt;figure class=&apos;gatsby-resp-image-figure&apos; style=&apos;margin-bottom: 16px;&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; &apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/d0d1ea0f39674088060df57b2cf4fd8a/d76be/junit-vintage-description.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 43.529411764705884%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABtklEQVR42m1RCW7bMBDU/79ToEjaN6StY6QF0ljWQfE+dEaSZXm6ZNIABUpgsLPL5XCPbOk7LN5h6QKW1mNbV1yvO+H6gW3b/ovL5fLBb7cb4smccwjeI9o2BHjiEV3XUcwiBI9hGNCTP0bb9xjHMdmYM7zH4sdJMJBIfKS1TgnRt9Ymbn2bsO03UNGEG3aqZN/3fxDjl21PVWbnosS5KFBVFYQQ4JyjaZqEsjHIa43fBce5tngpJbiQqGoGxjiqskTJFJ4rBxMmEifBvDYQSiexhsQYCUkp34UZpOB0R4/pYV4pFEzjVGlUjaY8QXcKQioak3urkAkHpjpIO0DYHo3uU5vSdmB6gHQTDPmKPo3jkCagVi2E6WAszbwdsCwL5nlJ7WeKNzBa0UJoMdYg0CIib6QH1yRsehhjoS2J0ifadWipGmc0LanH6zRifh3JDthpMdnDs8ThpPGYOzyVnqzFUxHw/cXgEGOFx/FsCBbH3OBXFfCzdMSpdTnhrGfkasJJzRhmqvDTg8Hnbwp3B4evx4C7Hxb3jw735H85GDC/QLQreHjDX95QnPsVzM2JM7dgWnf8AY2Ypn5miDXLAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;https://junit.org/junit5/docs/current/user-guide/&apos; title=&apos;&apos; src=&apos;/static/d0d1ea0f39674088060df57b2cf4fd8a/ca1dc/junit-vintage-description.png&apos; srcset=&apos;/static/d0d1ea0f39674088060df57b2cf4fd8a/e7570/junit-vintage-description.png 170w,
/static/d0d1ea0f39674088060df57b2cf4fd8a/f46e7/junit-vintage-description.png 340w,
/static/d0d1ea0f39674088060df57b2cf4fd8a/ca1dc/junit-vintage-description.png 680w,
/static/d0d1ea0f39674088060df57b2cf4fd8a/02d09/junit-vintage-description.png 1020w,
/static/d0d1ea0f39674088060df57b2cf4fd8a/9d567/junit-vintage-description.png 1360w,
/static/d0d1ea0f39674088060df57b2cf4fd8a/d76be/junit-vintage-description.png 2028w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&apos;gatsby-resp-image-figcaption&apos;&gt;https://junit.org/junit5/docs/current/user-guide/&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;JUnit Vintage&lt;/code&gt;는 JUnit3와 JUnit4 기반의 테스트를 위해 테스트 엔진을 제공해줍니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// build.gradle.kts&lt;/span&gt;
dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;testRuntimeOnly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.junit.vintage:junit-vintage-engine:5.9.3&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 방법으로 &lt;code class=&quot;language-text&quot;&gt;JUnit4 + Robolectric 테스트&lt;/code&gt;를 &lt;code class=&quot;language-text&quot;&gt;JUnit5&lt;/code&gt; 환경에서 실행할 수 있게 되었습니다.&lt;/p&gt;
&lt;h2 id=&quot;결론&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B2%B0%EB%A1%A0&quot; aria-label=&quot;결론 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;결론&lt;/h2&gt;
&lt;p&gt;안드로이드 개발 생태계에서는 당분간 JUnit4, JUnit5 두 버전이 공존할 것으로 보입니다. &lt;code class=&quot;language-text&quot;&gt;Robolectric&lt;/code&gt;과 같은 중요한 도구들이 여전히 JUnit4에 의존하고 있기 때문에, 점진적 전환 접근 방식이 현실적일 것 같습니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;새로운 단위 테스트에 JUnit5 사용하기&lt;/li&gt;
&lt;li&gt;UI 및 통합 테스트에는 JUnit4 + Robolectric 유지하기&lt;/li&gt;
&lt;li&gt;JUnit Vintage를 통해 두 환경 통합하기&lt;/li&gt;
&lt;li&gt;(중요) 커뮤니티의 진행 상황을 주시하며 점차적으로 전환 계획 세우기&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;참고&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0&quot; aria-label=&quot;참고 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;참고&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://junit.org/junit5/docs/5.1.0/release-notes/index.html#release-notes-5.0.0&quot;&gt;https://junit.org/junit5/docs/5.1.0/release-notes/index.html#release-notes-5.0.0&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/robolectric/robolectric/issues/3477&quot;&gt;https://github.com/robolectric/robolectric/issues/3477&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://junit.org/junit5/docs/current/user-guide/&quot;&gt;https://junit.org/junit5/docs/current/user-guide/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/android/android-test/issues/409&quot;&gt;https://github.com/android/android-test/issues/409&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api&quot;&gt;https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-engine&quot;&gt;https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-engine&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://mvnrepository.com/artifact/org.junit.vintage/junit-vintage-engine&quot;&gt;https://mvnrepository.com/artifact/org.junit.vintage/junit-vintage-engine&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[안드로이드 개발자가 놓치기 쉬운 UX (feat. 피츠의 법칙)]]></title><description><![CDATA[안드로이드 앱을 개발하다 보면 UI는 완벽해 보여도(적어도 프로덕트 디자이너분들께서 요구하는 사항들을 전부 만족하더라도?), 사용자 경험(UX) 측면에서 사소하지만 치명적인 요소들을 간과하기 쉽습니다. 특히 피츠의 법칙(Fitts’ Law…]]></description><link>https://onseok.blog/fitts-law/</link><guid isPermaLink="false">https://onseok.blog/fitts-law/</guid><pubDate>Tue, 04 Mar 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;안드로이드 앱을 개발하다 보면 UI는 완벽해 보여도(적어도 프로덕트 디자이너분들께서 요구하는 사항들을 전부 만족하더라도?), 사용자 경험(UX) 측면에서 사소하지만 치명적인 요소들을 간과하기 쉽습니다. 특히 &lt;strong&gt;피츠의 법칙(Fitts’ Law)&lt;/strong&gt;을 이해하면 버튼 터치 영역, 제스처 동작 등에서 흔히 놓치는 UX 포인트를 개선할 수 있습니다. 이번 글에서는 피츠의 법칙 개념부터 시작해, 안드로이드 개발자가 챙겨야 할 UX 요소들과 실제 개선 방법을 살펴보겠습니다.&lt;/p&gt;
&lt;h3 id=&quot;피츠의-법칙&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%94%BC%EC%B8%A0%EC%9D%98-%EB%B2%95%EC%B9%99&quot; aria-label=&quot;피츠의 법칙 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;피츠의 법칙?&lt;/h3&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/7d82fa38a7f773161cc54d6394d5bcec/7c5f7/fitts_law.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 75.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOklEQVR42q2TT06DQBjFKe3wz9HYgtgStaYlSqyJIZDISnYsZOOGC7BgQcKCE3ACLsF5uBN9k0BiSC2ldZJf+ICZx5s3Hxx33uDBDdiBKzDhLhwiWEuS9IQrQzhXqHMyFwThzTCMF9Sv4PpSwS2l9EtV1R/UAZw+9t6Pyo4zTdOO49ioqkq3LGul6/rmZMGiKPgkSUhZljJqpWmamSiKG0LIznXdd0VRPjBteVSQiURRJOR5LkNMwb3k+/6sc9gupEEQLMIwnP+ZDxZR5oK5ybJMhOh0YBui4zir/pzuq5+apn0PZMG3LbMAOrhHng+I4eD8JQJW67omvefMpQTumEArRAEZPAC2xTRNaSuidC5aR1twe6CNJkd7zLbtNU7xmTVv62z6yyk/utc8z5MRNDnVxZg/4mKRfxl7nikwHO2HOfsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;fitts law&apos; title=&apos;&apos; src=&apos;/static/7d82fa38a7f773161cc54d6394d5bcec/7c5f7/fitts_law.png&apos; srcset=&apos;/static/7d82fa38a7f773161cc54d6394d5bcec/e7570/fitts_law.png 170w,
/static/7d82fa38a7f773161cc54d6394d5bcec/f46e7/fitts_law.png 340w,
/static/7d82fa38a7f773161cc54d6394d5bcec/7c5f7/fitts_law.png 440w&apos; sizes=&apos;(max-width: 440px) 100vw, 440px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;피츠의 법칙은 간단히 말해 &lt;em&gt;“목표(target)까지의 거리(D)가 멀수록, 그리고 목표 크기(W)가 작을수록 도달(클릭/터치) 시간이 늘어난다”&lt;/em&gt;는 인간 동작 모델입니다. 원래는 마우스 커서 같은 포인터 이동에 대한 연구였지만, 터치스크린 환경에도 그대로 응용됩니다. 사용자가 화면에서 버튼을 누를 때 걸리는 시간은 버튼의 크기와 현재 손가락 위치로부터의 거리에 영향을 받습니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/7bb595045949ca75bb8ac58dca8084bb/46e29/fitts_law_2.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 75.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAABcRAAAXEQHKJvM/AAACIElEQVR42oVSbW/SUBTmb5v4ZcZ/4Af3yWQflsyYZVM0RhZUxjaSMmaRNqOlQntb2l5ghb7Re28h8WmLRsOiJ6ft6bnn5TnPubX1njDG+C8RQuR5DmcURfuRtf1MtxTP8xzH0XWdEGKaZrPZxNF/krMsm81mhmGMRiO8VVVtt9so0e/3kZym6SPJ8KZJ+UoSoAXU37C3222cxsEq4IKv08c6I1rkImMZIparZZzEsAvNsoUXLGlY6Hy1zv5OZhlbhavW59agq9qTKbTb6Q0VnYwdMnF6l/L7FxdHByfHz06v3kiMsyROKoxFMmqjT++257sU3iiMUA4RMDCCR/y7xqB1enNzJmnSD56zdJ1mrKBmBxtlRClwYU5KKRYDA1UEZhc83+TQJEkd3XNH1B66Cz9AcA0cAnb9vH53LdsTxxxZ0nV3ONAsg8Ce6KapWRPNtAyr87F78vz88Mmro6evvzUUvuEFbMCzLCuO4mqTIK8ycIQh0Tzf5kww6sy+f7m/bcjyhWprLuNZOXMcu1PXd+jcXwTzpdJXrTF5oMGcLpyxK39VOh+6pkrEBjvkYoMxOGPlzBXst2fv1N79zJt7tm8almNOYdAp7XeU5nG7/vKTcqUBRUUyZwUdO7aDh4DYJEoirBp+cAOSKoUHN2CzRdMis0rGFQyCkjA84Bb/YRjurtofAoaxv6T4pAirYiRJkmUZ66jtiNm79P8QBFd7/glg3z0LwT+nBAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;fitts law 2&apos; title=&apos;&apos; src=&apos;/static/7bb595045949ca75bb8ac58dca8084bb/ca1dc/fitts_law_2.png&apos; srcset=&apos;/static/7bb595045949ca75bb8ac58dca8084bb/e7570/fitts_law_2.png 170w,
/static/7bb595045949ca75bb8ac58dca8084bb/f46e7/fitts_law_2.png 340w,
/static/7bb595045949ca75bb8ac58dca8084bb/ca1dc/fitts_law_2.png 680w,
/static/7bb595045949ca75bb8ac58dca8084bb/02d09/fitts_law_2.png 1020w,
/static/7bb595045949ca75bb8ac58dca8084bb/46e29/fitts_law_2.png 1136w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;클릭/터치 시간 T는 거리(D)와 크기(W)의 함수로 나타낼 수 있습니다. 예를 들어 Target A와 B의 크기가 동일하다면, 손가락/포인터에서 가까운 A를 더 빨리 누를 수 있고, Target C처럼 크기가 작은 경우 가까이 있어도 시간이 더 걸립니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;모바일에서는 피츠의 법칙이 더욱 &lt;strong&gt;중요&lt;/strong&gt;합니다. 손가락이 직접 화면을 터치하는 방식이기 때문인데, 마우스 포인터는 화면의 작은 영역도 정확히 가리킬 수 있지만, 손가락은 크기도 크고 터치할 때 화면을 가려서 정교함이 떨어집니다. 실제로도 제 엄지손가락이 남들보다 굵은 편이라 터치할 때 버튼이 작으면 터치하기가 불편했던 경험이 많았습니다. 다시 말해, 터치는 마우스보다 &lt;code class=&quot;language-text&quot;&gt;정밀도가 낮은 입력 수단&lt;/code&gt;입니다. 따라서 안드로이드 UI를 개발할 때 터치 대상은 충분히 크게, 그리고 조작 영역에서 너무 멀리 떨어져 있지 않게 배치하는 것을 고려하는 것이 좋습니다. &lt;code class=&quot;language-text&quot;&gt;피츠의 법칙&lt;/code&gt;에 따르면 작은 버튼이나 구석진 위치의 메뉴는 사용자가 누르기 어렵고 시간도 더 걸리므로, UX를 해치게 됩니다.&lt;/p&gt;
&lt;p&gt;또 한 가지, 터치 목표 사이의 간격도 고려해야 합니다. 버튼들이 너무 촘촘하거나 작으면 사용자는 원하는 대상을 누르기 힘들고, 잘못 눌러 오동작(잘못된 대상 터치)할 확률이 높아집니다. 이는 사용자가 인터페이스를 불편하게 느끼게 만드는 요인이 됩니다.&lt;/p&gt;
&lt;h3 id=&quot;개발에는-어떻게-적용해볼까&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B0%9C%EB%B0%9C%EC%97%90%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%A0%81%EC%9A%A9%ED%95%B4%EB%B3%BC%EA%B9%8C&quot; aria-label=&quot;개발에는 어떻게 적용해볼까 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;개발에는 어떻게 적용해볼까?&lt;/h3&gt;
&lt;p&gt;Android UI를 개발할 때, &lt;strong&gt;클릭 리스너(OnClickListener)&lt;/strong&gt;를 UI 요소의 특정 뷰에만 걸어두고, 정작 사용자가 누를 수 있는 실제 영역은 아주 좁게 남아있는 경우가 흔합니다. 예를 들어 리스트 아이템 전체를 눌러야 할 것 같지만, 개발자가 아이콘이나 텍스트 뷰에만 리스너를 달면 사용자는 빈 공간을 눌렀을 때 반응이 없어 당황하게 됩니다. 이는 피츠의 법칙 측면에서 보면 목표 영역이 불필요하게 작아진 사례입니다.&lt;/p&gt;
&lt;p&gt;이런 문제는 터치 영역을 확장함으로써 해결할 수 있습니다. 안드로이드 Material Design 가이드라인에서도 &lt;em&gt;“아이콘이 24dp로 보여도 주변 패딩을 합쳐 실제 터치 영역은 48x48dp로 만들어야 한다”&lt;/em&gt;고 권장합니다. 또한 &lt;code class=&quot;language-text&quot;&gt;android:padding&lt;/code&gt;이나 &lt;code class=&quot;language-text&quot;&gt;TouchDelegate&lt;/code&gt; 등을 활용해 버튼 주위의 투명한 공간도 클릭을 감지하도록 개발하는 방법도 있습니다. 전체 레이아웃을 클릭 가능하게 옵션을 주거나, 터치 영역을 넓히는 것도 방법이 될 수 있습니다.&lt;/p&gt;
&lt;h3 id=&quot;햅틱-피드백Haptic-Feedback도-있다&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%96%85%ED%8B%B1-%ED%94%BC%EB%93%9C%EB%B0%B1Haptic-Feedback%EB%8F%84-%EC%9E%88%EB%8B%A4&quot; aria-label=&quot;햅틱 피드백Haptic Feedback도 있다 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;햅틱 피드백(Haptic Feedback)도 있다&lt;/h3&gt;
&lt;p&gt;앱을 사용하다 보면 진동 피드백을 통해 눌림이나 동작 완료를 느낄 때가 있습니다. 바로 &lt;code class=&quot;language-text&quot;&gt;햅틱 피드백&lt;/code&gt;인데요, 저는 이전에 창업을 하여 &lt;a href=&quot;https://play.google.com/store/apps/details?id=com.freetreechair.preat&amp;#x26;pli=1&quot;&gt;Preat&lt;/a&gt;이라는 서비스를 개발할 때, 이를 구현했었던 경험이 있습니다. 그런데 간혹가다가 기능 구현에 몰두하다 보면 이러한 햅틱 피드백을 잊는 경우도 많습니다. 가령 롱프레스(길게 누르기) 동작이나 드래그 앤 드롭, 또는 스와이프 제스처 등에서 짧은 진동을 주면 사용자는 &lt;code class=&quot;language-text&quot;&gt;“지금 동작이 인식됐구나”&lt;/code&gt;를 직감적으로 알 수 있습니다.&lt;/p&gt;
&lt;p&gt;안드로이드에서는 Vibrator 클래스를 통해 쉽게 &lt;code class=&quot;language-text&quot;&gt;햅틱&lt;/code&gt;을 구현할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token function&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    modifier &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Modifier&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fillMaxSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    horizontalAlignment &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Alignment&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CenterHorizontally&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    verticalArrangement &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Arrangement&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Center
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Vibration Controller&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; vibrator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getSystemService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;VIBRATOR_SERVICE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; Vibrator

    &lt;span class=&quot;token comment&quot;&gt;// Vibration Button - OneShot&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;onClick &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// Safely cancel any ongoing vibrations&lt;/span&gt;
        vibrator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cancel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// Handling vibrations for Android 8.0 (Oreo) and above&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Build&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;VERSION&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SDK_INT &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; Build&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;VERSION_CODES&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;O&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; effect &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; VibrationEffect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createOneShot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; VibrationEffect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DEFAULT_AMPLITUDE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            vibrator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;vibrate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;effect&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// Handling vibrations for devices below Android 8.0&lt;/span&gt;
            vibrator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;vibrate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Vibration Button OneShot&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Vibration Button - Predefined Effect (Android 10 or above)&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;onClick &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// Safely cancel any ongoing vibrations&lt;/span&gt;
        vibrator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cancel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// Checking for Android 10 or above&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Build&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;VERSION&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SDK_INT &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; Build&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;VERSION_CODES&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Q&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; effect &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; VibrationEffect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createPredefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;VibrationEffect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EFFECT_CLICK&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            vibrator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;vibrate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;effect&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// Handling vibrations for devices below Android 10&lt;/span&gt;
            vibrator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;vibrate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Vibration Button Predefined&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;개인적으로 진동을 너무 잦게 혹은 강하게 주면 오히려 거슬리다고 느낀 경험이 있어, 상황에 맞는 패턴과 세기를 선택하는 것이 중요할 것 같습니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;Android-Predictive-Back-API는-또-뭔데&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#Android-Predictive-Back-API%EB%8A%94-%EB%98%90-%EB%AD%94%EB%8D%B0&quot; aria-label=&quot;Android Predictive Back API는 또 뭔데 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Android Predictive Back API는 또 뭔데?&lt;/h3&gt;
&lt;p&gt;안드로이드 13부터 도입된 &lt;code class=&quot;language-text&quot;&gt;Predictive Back 제스처(예측성 뒤로 가기)&lt;/code&gt;는 UX 향상을 위한 새로운 시스템 기능입니다. &lt;code class=&quot;language-text&quot;&gt;Predictive Back&lt;/code&gt;을 적용하면 사용자가 뒤로 스와이프 제스처를 시작하는 순간 다음 화면을 미리 보여주는 애니메이션이 나타납니다. 이를 통해 사용자는 이 제스처를 계속 하면 어디로 갈지 미리 확인하고 결정할 수 있게 됩니다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/static/predictive-back-nav-home-c65b246aebeeeddac144ba7d64189abc.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;Android 15부터는 개발자 옵션 설정 없이 디폴트로 볼 수 있고, &lt;a href=&quot;https://developer.android.com/jetpack/androidx/releases/activity#1.6.0-alpha05&quot;&gt;AndroidX Activity 1.6.0-alpha05&lt;/a&gt; 이후의 버전으로 업데이트하고, &lt;code class=&quot;language-text&quot;&gt;Manifest&lt;/code&gt;파일의 &lt;code class=&quot;language-text&quot;&gt;application&lt;/code&gt; 태그에 &lt;code class=&quot;language-text&quot;&gt;android:enableOnBackInvokedCallback=“true”&lt;/code&gt;를 적용하면 시스템이 뒤로 가기 제스처를 미리 알고 애니메이션을 처리할 수 있게 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre class=&quot;language-xml&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;manifest&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;xmlns:&lt;/span&gt;android&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;http://schemas.android.com/apk/res/android&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;xmlns:&lt;/span&gt;tools&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;http://schemas.android.com/tools&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    ...
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;application&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;...&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;enableOnBackInvokedCallback&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;true&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        ...
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;application&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;manifest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;만약 &lt;code class=&quot;language-text&quot;&gt;android:enableOnBackInvokedCallback&lt;/code&gt; 플래그를 &lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt;로 설정해두면, 시스템은 &lt;code class=&quot;language-text&quot;&gt;OnBackInvokedCallback&lt;/code&gt; 구현부에서 호출하는 동작을 모두 무시하게 됩니다. 대신 여전히 하위 호환성을 위해 기존의 &lt;code class=&quot;language-text&quot;&gt;onBackPressed API&lt;/code&gt;를 호출하므로, &lt;code class=&quot;language-text&quot;&gt;OnBackPressedCallback&lt;/code&gt;은 계속 정상적으로 동작하게 됩니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;만약 유저의 Back 제스처로 곧바로 이전 화면을 보여주고 싶지 않을 때(예를 들어, 유저에게 정말로 뒤로가고 싶은지 물어보는 다이얼로그를 노출하고 싶을 때)에는 아래와 같이 구현하면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; onBackPressedCallback&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; OnBackPressedCallback &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;OnBackPressedCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleOnBackPressed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;//your custom onBackPressed logic&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;showConfirmationDialog&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고, 이 callback을 &lt;code class=&quot;language-text&quot;&gt;OnBackPressedDispatcher&lt;/code&gt;에 추가하면 끝입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;onBackPressedDispatcher&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;onBackPressedCallback&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;더 자세히 적용해보고 싶다면, 아래 코드랩 링크들을 참고하면 도움이 될 것 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://codelabs.developers.google.com/handling-gesture-back-navigation&quot;&gt;https://codelabs.developers.google.com/handling-gesture-back-navigation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.android.com/guide/navigation/custom-back/predictive-back-gesture&quot;&gt;https://developer.android.com/guide/navigation/custom-back/predictive-back-gesture&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;결론&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B2%B0%EB%A1%A0&quot; aria-label=&quot;결론 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;결론&lt;/h3&gt;
&lt;p&gt;지금까지 &lt;code class=&quot;language-text&quot;&gt;피츠의 법칙&lt;/code&gt;을 중심으로 설명한 UX 요소들은 개선은 결국 사용자를 위한 배려라고 볼 수 있습니다. 버튼의 터치 영역을 넓히고, 손가락이 닿는 범위를 고려해 배치하는 등 개발 단계에서 조금만 신경 쓰면 사용자 불편을 크게 줄일 수 있다고 생각합니다.&lt;/p&gt;
&lt;p&gt;특히 안드로이드 앱은 다양한 기기 화면 크기와 사용 환경에서 실행되므로, 보편적인 UX 원칙을 지키는 것이 중요합니다. 이렇게 개발자가 UX를 먼저 고려한다면 기획 단계에서부터 완성도 높은 서비스를 만들 수 있고, 회사에서 기획자나 디자이너와의 의사소통도 원활해질 수 있을 것이라고 생각합니다. 특히 저도 자주 놓치는 부분이기는 하지만, 안드로이드 개발자로서 UI 개발을 하다보면 과연 내가 &lt;code class=&quot;language-text&quot;&gt;Material Design이나 안드로이드 접근성 가이드 등 권장사항을 따르고 있는가?&lt;/code&gt; 라고 끊임없이 되묻는 자세가 필요한 것 같습니다.&lt;/p&gt;
&lt;p&gt;작은 버튼 하나, 진동 한 번의 차이가 모여 앱의 성공을 결정짓는 UX를 만들 수 있다는 점을 믿으며, 놓치기 쉬운 UX 요소들을 챙기는 습관이 AI 시대의 프로덕트 엔지니어로서 곧 사용자의 행복을 만들 수 있다고 생각합니다.&lt;/p&gt;
&lt;h3 id=&quot;참고-자료&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C&quot; aria-label=&quot;참고 자료 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;참고 자료&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/material-components/material-components-android/issues/1279&quot;&gt;[Accessibility] Why the recommended touch target size on android devices is 48 x 48 dp?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/@EazSoftware/everything-you-need-to-know-about-android-vibrations-cf8759b15121&quot;&gt;Android Vibrations in Jetpack Compose&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.android.com/guide/navigation/custom-back/predictive-back-gesture?hl=ko&quot;&gt;뒤로 탐색 예측 동작 지원 추가&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://pl-coding.com/2024/10/26/predictive-back-support/#:~:text=You%20can%20see%20predictive%20back,the%20predictive%20back%20gesture%20animations&quot;&gt;What Is Predictive Back Gesture?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://adiandrea.medium.com/predictive-back-gesture-on-android-31610b1b58b7&quot;&gt;Predictive Back Gesture On Android&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[AWS Amplify Android 오픈소스 기여하기]]></title><description><![CDATA[AWS Amplify는 모바일 및 프런트엔드 개발자가 AWS에서 안전하고 확장 가능한 풀스택 애플리케이션을 구축하고 배포할 수 있도록 지원하는 제품입니다. 회사에서 서비스하고 있는 프로젝트에서 S…]]></description><link>https://onseok.blog/aws-amplify/</link><guid isPermaLink="false">https://onseok.blog/aws-amplify/</guid><pubDate>Tue, 25 Feb 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;AWS Amplify는 모바일 및 프런트엔드 개발자가 AWS에서 안전하고 확장 가능한 풀스택 애플리케이션을 구축하고 배포할 수 있도록 지원하는 제품입니다. 회사에서 서비스하고 있는 프로젝트에서 S3로 로그 파일을 주기적으로 업로드하는 기능을 구현하고 꾸준히 모니터링하였는데, 여러 Android 기기에서 &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html&quot;&gt;java.lang.OutOfMemoryError&lt;/a&gt; 오류가 반복적으로 발생하는 것을 발견했습니다.&lt;/p&gt;
&lt;h3 id=&quot;원인을-분석해보자&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9B%90%EC%9D%B8%EC%9D%84-%EB%B6%84%EC%84%9D%ED%95%B4%EB%B3%B4%EC%9E%90&quot; aria-label=&quot;원인을 분석해보자 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;원인을 분석해보자&lt;/h3&gt;
&lt;p&gt;수집된 크래시 리포트를 요약하면 다음과 같았습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Fatal Exception: java.lang.OutOfMemoryError: Failed to allocate a 8388620 byte allocation with 8388608 free bytes and 19MB until OOM
       at java.util.IdentityHashMap.resize(IdentityHashMap.java:476)
       at java.util.IdentityHashMap.put(IdentityHashMap.java:452)
       ...
       at com.amplifyframework.storage.s3.transfer.TransferWorkerObserver$attachObserver$2.invokeSuspend(TransferWorkerObserver.kt:199)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/aws-amplify/amplify-android/blob/main/aws-storage-s3/src/main/java/com/amplifyframework/storage/s3/transfer/TransferWorkerObserver.kt&quot;&gt;TransferWorkerObserver&lt;/a&gt; 클래스에서 동일한 전송 태그에 대해 &lt;code class=&quot;language-text&quot;&gt;LiveData.observeForever()&lt;/code&gt;가 중복 호출되며, 여러 관찰자가 등록된 것으로 보였고, 이는 &lt;code class=&quot;language-text&quot;&gt;LiveData&lt;/code&gt; 내부의 &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/IdentityHashMap.html&quot;&gt;IdentityHashMap&lt;/a&gt;이 과도하게 커져 메모리 할당에 실패하게 만들고, 특히 &lt;code class=&quot;language-text&quot;&gt;Room&lt;/code&gt; 라이브러리의 &lt;a href=&quot;https://developer.android.com/reference/androidx/room/InvalidationTracker&quot;&gt;InvalidationTracker&lt;/a&gt;와 연계된 &lt;code class=&quot;language-text&quot;&gt;LiveData&lt;/code&gt; 사용으로 메모리 사용량이 더 증가한 것으로 판단하였습니다.&lt;/p&gt;
&lt;h3 id=&quot;이슈-등록하기&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9D%B4%EC%8A%88-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0&quot; aria-label=&quot;이슈 등록하기 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;이슈 등록하기&lt;/h3&gt;
&lt;p&gt;저는 먼저 이 문제를 공유하기 위해 템플릿에 맞추어 &lt;a href=&quot;https://github.com/aws-amplify/amplify-android/issues/2840&quot;&gt;이슈&lt;/a&gt;를 등록해주었습니다.&lt;/p&gt;
&lt;p&gt;다만, &lt;strong&gt;보안상&lt;/strong&gt; 회사 코드를 전부 스니펫에 첨부할 수는 없었기 때문에 민감한 코드는 전부 제거하고 핵심 로직만 다시 재작성하였습니다. 이슈란에 첨부한 코드 스니펫은 다음과 같았습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@HiltWorker&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; LogUploadWorker &lt;span class=&quot;token annotation builtin&quot;&gt;@AssistedInject&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Assisted&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; appContext&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Assisted&lt;/span&gt; workerParams&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; WorkerParameters&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token annotation builtin&quot;&gt;@Dispatcher&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;IO&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; ioDispatcher&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; CoroutineDispatcher
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;CoroutineWorker&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;appContext&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; workerParams&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;suspend&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getForegroundInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; ForegroundInfo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        appContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;logSyncForegroundInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;suspend&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;doWork&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;withContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ioDispatcher&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; externalFilesDirPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; inputData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;externalFilesDirPath&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; externalFilesDir &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; externalFilesDirPath&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;it&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;externalFilesDir &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; externalFilesDir&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;uploadLogFiles&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;externalFilesDir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Exception&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            Timber&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Log upload exception: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            Result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;retry&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        Result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation builtin&quot;&gt;@OptIn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ExperimentalCoroutinesApi&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; FlowPreview&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;suspend&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;uploadLogFiles&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;externalFilesDir&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; File&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; curFiles &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; externalFilesDir&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listFiles&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; file &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            System&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;currentTimeMillis&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;lastModified&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; TWO_WEEK_TIME_MILLIS
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sortedByDescending&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; it&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;lastModified&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;curFiles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isNullOrEmpty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            Timber&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;No log files or directory found.&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        
        &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; environmentPrefix &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BuildConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DEBUG&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;debug&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;release&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; dateFormat &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SimpleDateFormat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;yyyy-MM-dd&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Locale&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDefault&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        curFiles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; file &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; date &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dateFormat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;lastModified&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; fileIndex &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;substringBefore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;_logs.txt&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;takeLastWhile&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; it&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isDigit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;environmentPrefix&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/sample/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;date&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/log&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;fileIndex&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;.txt&quot;&lt;/span&gt;&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Amplify&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Storage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;uploadFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                    StoragePath&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fromString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;public/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;key&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                    file
                &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                Timber&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Log file upload successful: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Exception&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                Timber&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Log file upload failed: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;error&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; - &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token expression&quot;&gt;error&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cause&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;companion&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; TWO_WEEK_TIME_MILLIS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000L&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;startUpUploadWork&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            externalFilesDirPath&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; File&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; PeriodicWorkRequestBuilder&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;LogUploadWorker&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; TimeUnit&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;HOURS&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; TimeUnit&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MINUTES
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setConstraints&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;LogSyncConstraints&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setBackoffCriteria&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                BackoffPolicy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LINEAR&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                MIN_BACKOFF_MILLIS&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                TimeUnit&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MILLISECONDS
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setInputData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                Data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;putString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal singleline&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;externalFilesDirPath&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; externalFilesDirPath&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;absolutePath&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;간단하게 위 스니펫의 로직을 설명하면, 먼저 로그 파일 디렉터리 경로를 기반으로 파일 객체를 생성하고, &lt;strong&gt;2주&lt;/strong&gt; 이내에 수정된 파일들을 필터링하며, 최근 수정된 순서로 정렬한 뒤, 예외가 발생했을 때에는 &lt;code class=&quot;language-text&quot;&gt;선형 재시도&lt;/code&gt; 정책을 따르도록 설정해주었고, 각 파일에 대해 &lt;code class=&quot;language-text&quot;&gt;빌드타입&lt;/code&gt;에 따른 정보와, 파일의 수정 날짜, 파일 이름의 인덱스를 조합하여 AWS S3에 저장할 키를 구성하고, 이후 파일을 업로드하고 그 결과를 Timber 로그로 남기는 흐름입니다. 이 작업은 &lt;code class=&quot;language-text&quot;&gt;주기적으로 실행되는 작업&lt;/code&gt;에 해당하므로 &lt;a href=&quot;https://developer.android.com/topic/libraries/architecture/workmanager?hl=ko&quot;&gt;Workmanager&lt;/a&gt;의 &lt;a href=&quot;https://developer.android.com/reference/androidx/work/PeriodicWorkRequest.Builder&quot;&gt;PeriodicWorkRequest.Builder&lt;/a&gt;를 활용하였습니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/1f60a18ae5a15a527739d5f75a973dec/5dd2a/aws-amplify-issue-comment.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 26.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA4ElEQVR42mWP3XKCMBSEua6tIoSfQCABDViqFLS2jn2Bvv8LbXMOI2WmF99s9iRnZ+ON9x/Y0w22G6DtEap+RVpaiKxC5BCStGZoNiMNwtQgSDSkbiDLBhuRwVv5MbZxjsp2KOsWRdVC7w5OG+cP7JWx7JVp+EzvZFHDFxKB2w0TxboOEnjPfsSDrr/gbbji/XLDafxk35+/cHSz3s368wTdDR93jNdvDs7LHXK9R6qqv0BKN/up4QNqNLVsZ320U87TLyhktREM5cyBfpS5lgWe1iFf/GOxtNSXbcwhS34BAD6GLRjpV7kAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;aws amplify issue comment&apos; title=&apos;&apos; src=&apos;/static/1f60a18ae5a15a527739d5f75a973dec/ca1dc/aws-amplify-issue-comment.png&apos; srcset=&apos;/static/1f60a18ae5a15a527739d5f75a973dec/e7570/aws-amplify-issue-comment.png 170w,
/static/1f60a18ae5a15a527739d5f75a973dec/f46e7/aws-amplify-issue-comment.png 340w,
/static/1f60a18ae5a15a527739d5f75a973dec/ca1dc/aws-amplify-issue-comment.png 680w,
/static/1f60a18ae5a15a527739d5f75a973dec/02d09/aws-amplify-issue-comment.png 1020w,
/static/1f60a18ae5a15a527739d5f75a973dec/9d567/aws-amplify-issue-comment.png 1360w,
/static/1f60a18ae5a15a527739d5f75a973dec/5dd2a/aws-amplify-issue-comment.png 1926w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이후 해당 이슈란의 코멘트를 통해 메인테이너분들과 이슈의 발생 빈도와 문제 발생 기기의 스펙 정보들을 요청받았고, 당시에는 &lt;a href=&quot;https://github.com/aws-amplify/amplify-android&quot;&gt;aws-amplify/amplify-android&lt;/a&gt; 라이브러리 자체의 문제라기보다는 &lt;code class=&quot;language-text&quot;&gt;내가 구현한 코드에 문제가 있었나?&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;OOM이 발생하지 않도록 더 최적화 할수는 없는가?&lt;/code&gt;라고 고민을 하였고, 이를 해결하기 위해 아래의 개선작업들을 진행했습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;로그 파일 리스트를 즉시 모두 메모리에 로드하지 않고, 필요한 시점에만 File 객체를 생성하도록 개선하기&lt;/li&gt;
&lt;li&gt;14일 이상된 오래된 로그 파일들을 주기적으로 삭제하여 처리해야할 로그 파일 수 자체를 줄이기&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;하지만, 이러한 노력에도 불구하고 여전히 주기적으로 OOM 오류들이 수집되었습니다.&lt;/p&gt;
&lt;h3 id=&quot;직접-수정해보자&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%A7%81%EC%A0%91-%EC%88%98%EC%A0%95%ED%95%B4%EB%B3%B4%EC%9E%90&quot; aria-label=&quot;직접 수정해보자 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;직접 수정해보자&lt;/h3&gt;
&lt;p&gt;오픈소스와 관련된 활동을 한다면, 라이선스 규정을 잘 준수해야 합니다. 또한 오픈소스 프로젝트에 컨트리뷰션을 하기 전에는 &lt;code class=&quot;language-text&quot;&gt;CONTRIBUTING.md&lt;/code&gt; 파일을 꼼꼼하게 읽어 가이드라인을 잘 준수할 수 있도록 해야합니다.&lt;/p&gt;
&lt;p&gt;저는 직접 수정해보기로 마음먹었습니다. 수집된 크래시 리포트를 다시 분석하여 코드를 수정한 뒤 PR을 생성하였고, 수정된 코드는 아래와 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;util&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;concurrent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ConcurrentHashMap

&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; observedTags &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ConcurrentHashMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;newKeySet&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;String&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;suspend&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;attachObserver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tag&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;withContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Dispatchers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Main&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;observedTags&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tag&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token label symbol&quot;&gt;@withContext&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; liveData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; workManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getWorkInfosByTagLiveData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tag&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        liveData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;observeForever&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token label symbol&quot;&gt;@TransferWorkerObserver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;suspend&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;removeObserver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tag&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;withContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Dispatchers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Main&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;observedTags&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tag&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token label symbol&quot;&gt;@withContext&lt;/span&gt;
        workManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getWorkInfosByTagLiveData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tag&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;removeObserver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token label symbol&quot;&gt;@TransferWorkerObserver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;AWS Amplify Storage 모듈의 &lt;a href=&quot;https://github.com/aws-amplify/amplify-android/blob/main/aws-storage-s3/src/main/java/com/amplifyframework/storage/s3/transfer/TransferWorkerObserver.kt&quot;&gt;TransferWorkerObserver&lt;/a&gt; 클래스에 중복 관찰자 등록을 방지하는 로직을 추가하였고, &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html&quot;&gt;ConcurrentHashMap&lt;/a&gt;은 &lt;code class=&quot;language-text&quot;&gt;thread-safe&lt;/code&gt;하며, &lt;code class=&quot;language-text&quot;&gt;ConcurrentHashMap.newKeySet()&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;Set&lt;/code&gt; 인터페이스를 제공해주는데, 태그가 이미 존재하면 &lt;code class=&quot;language-text&quot;&gt;add()&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt;를 반환하고, 얼리 리턴을 통해 함수를 종료합니다. 마찬가지로 &lt;code class=&quot;language-text&quot;&gt;remove()&lt;/code&gt;는 태그가 &lt;code class=&quot;language-text&quot;&gt;observedTags&lt;/code&gt;에 없으면 false를 반환하고 함수를 종료시킵니다. 이를 통해 불필요한 중복된 태그 등록을 방지할 수 있도록 수정하였습니다.&lt;/p&gt;
&lt;h3 id=&quot;뿌듯한-결과&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%BF%8C%EB%93%AF%ED%95%9C-%EA%B2%B0%EA%B3%BC&quot; aria-label=&quot;뿌듯한 결과 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;뿌듯한 결과&lt;/h3&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/46bf8fdb3c0204b69df6052b2d090ede/46dcf/aws-amplify-approve-comment.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 32.94117647058823%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABLklEQVR42m2R3U7EIBCFe2ni1rawBVqgQH/3r2q88QV8/1c6DtTtauLFF5KBOZw5k53XBdXFIowXGD+ibhzR7XChkZdHosYhIZBXD6T20H5C6wZUdYvMhxGmX6GMh2g9uDRgJMKVxZEohUVRRwwK3uCFyT+CJVepT7uZBDWyourwOn1hOl0xX95JOCShphuSY9aO4OYKYebkhktyXNUkLBIHcq/sgOX2kabLnO/BGkOWZwgdUNNvESYtKnLHBDlOru0G1bmKcfgdaXqqOZRHGvl8WuCmFde3T4R5hZ9uCRNOkPRz043UsKHsAya7nWhGmgFlHPkp53DDgi5MaEig7TZMDHo/+4R2YyJGEce+81xsS4v5ZnklKTND21R0UadM4jbjozuHnw3/rsXm//gGPK21BL1vINcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;aws amplify approve comment&apos; title=&apos;&apos; src=&apos;/static/46bf8fdb3c0204b69df6052b2d090ede/ca1dc/aws-amplify-approve-comment.png&apos; srcset=&apos;/static/46bf8fdb3c0204b69df6052b2d090ede/e7570/aws-amplify-approve-comment.png 170w,
/static/46bf8fdb3c0204b69df6052b2d090ede/f46e7/aws-amplify-approve-comment.png 340w,
/static/46bf8fdb3c0204b69df6052b2d090ede/ca1dc/aws-amplify-approve-comment.png 680w,
/static/46bf8fdb3c0204b69df6052b2d090ede/02d09/aws-amplify-approve-comment.png 1020w,
/static/46bf8fdb3c0204b69df6052b2d090ede/9d567/aws-amplify-approve-comment.png 1360w,
/static/46bf8fdb3c0204b69df6052b2d090ede/46dcf/aws-amplify-approve-comment.png 1948w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;메인테이너분으로부터 좋은 아이디어라는 의견과 함께 몇 가지 제안사항들을 수정한 뒤에 최종 승인이 되었고, &lt;a href=&quot;https://github.com/aws-amplify/amplify-android/releases/tag/release_v2.27.1&quot;&gt;2.27.1&lt;/a&gt; 버전에 해당 작업이 반영되어 릴리즈 되었습니다 🎉 &lt;/p&gt;
&lt;p&gt;이러한 경험을 통해서 회사 프로젝트에서 사용중인 오픈소스 라이브러리 오류를 발견하면 적극적으로 PR을 올려 기여하고 문제를 수정하는 것이 중요하다고 느꼈고, 자주 사용했지만 몰랐던 라이브러리의 내부 동작을 살펴보는 경험을 하게 되었습니다.&lt;/p&gt;
&lt;h3 id=&quot;아쉬웠던-점-그리고-반성&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%95%84%EC%89%AC%EC%9B%A0%EB%8D%98-%EC%A0%90-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EB%B0%98%EC%84%B1&quot; aria-label=&quot;아쉬웠던 점 그리고 반성 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;아쉬웠던 점, 그리고 반성&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;만약 Heap Dump를 더욱 끈질기게 분석했더라면, 문제의 근본 원인을 더 빠르게 파악하고 보다 더 근거있는 이슈 트래킹에 큰 도움이 되었지 않았을까?&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[책 『JVM 밑바닥까지 파헤치기』 후기]]></title><description><![CDATA[안드로이드 개발자라면 Dalvik, ART에 대해서 많이 들어봤을 것입니다. Dalvik…]]></description><link>https://onseok.blog/jvm-under-the-hood/</link><guid isPermaLink="false">https://onseok.blog/jvm-under-the-hood/</guid><pubDate>Wed, 21 Aug 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;안드로이드 개발자라면 &lt;strong&gt;Dalvik, ART&lt;/strong&gt;에 대해서 많이 들어봤을 것입니다. &lt;a href=&quot;https://en.wikipedia.org/wiki/Dalvik_(software)&quot;&gt;Dalvik&lt;/a&gt;은 초기 안드로이드에서 사용된 가상 머신으로, 메모리와 배터리 제약을 극복하기 위해 스택 기반 대신 레지스터 기반 바이트코드를 사용하여 효율적으로 동작하도록 설계되었습니다. 이후 Android 5.0부터는 &lt;code class=&quot;language-text&quot;&gt;ART(Android Runtime)&lt;/code&gt;가 기본 런타임 환경으로 전환되었는데, ART는 설치 시 &lt;code class=&quot;language-text&quot;&gt;AOT(Ahead-Of-Time)&lt;/code&gt;를 통해 앱을 네이티브 코드로 변환하고, 필요에 따라 &lt;code class=&quot;language-text&quot;&gt;JIT(Just-In-Time)&lt;/code&gt;를 추가로 적용하여 실행 성능을 크게 향상시킵니다.&lt;/p&gt;
&lt;p&gt;마침 회사 백엔드 개발자분들께서도 JVM에 관심이 생겨 사내에서 함께 공부해 보자는 제안을 해주셨고, 평소 더 파보고 싶었던 JVM의 &lt;code class=&quot;language-text&quot;&gt;GC&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;메모리 관리 기법&lt;/code&gt; 등의 개념을 공부하면 Android 런타임 환경의 내부 동작 방식을 이해하는 데에 도움이 될 수 있을 것이라고 생각하여 설레는 마음으로 스터디에 합류하게 되었습니다.&lt;/p&gt;
&lt;p&gt;&lt;figure class=&apos;gatsby-resp-image-figure&apos; style=&apos;margin-bottom: 16px;&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; &apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/656bfeb5df717247362c11dccea65026/cae0a/jvm-under-the-hood.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 133.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAIAAADzvTiPAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF6ElEQVR42iWUCW/byBXH+VUKdGPXm21RbNHuAgvstqmT2ImD7Dp1fMSx5VuWLVmKHcuObd23aJ2URDHURVGkJFKkRIqUqNuSLV+bXbT9QGW6wA+Dwfu//8y8N4MB3Icz4PFC2LQCOzYT3t2MT4sF9rOBfTx4kA3I7GP+/bRPlwK1qFuNOHZiViVk2vCdLLsO54GIZYNCz6q4vUH7ehVoIMDDeuJGSg7r6K2UvGuk5InMQEAuOLjNQK2STLhVCmWDeiDh1fT4eFdIDqTsVTN/06HuL5i7C+amw9x0S7ed0rBNX3crl61SV8y3eLzNZ+tspitkqLgRSPv22hzaqspO8rZD3/bYQatyeyHcD/hhh7vvVX695H6+ku4Htet2uVenhDLR5PELMUcjJiAb0PXE1KBBSBzZEKj7QaXT4O4uhU9X1V+uuPt+5bbHfZLHbnnYKjE0lcJInsGHDaIIGwDcr+nX0zftgsASZbr47yvupsf9POBv+9W6JF72qv8ZVjo1hqELnRpFEgWSyAll8qZNFqKnQC6wN5A+m3/tU7/0mbsee9/n5CKrYnUbrFlg7r/XFalKYVju0wV91aAGUuGuU7xpkXnoSDbrBrXUdStfq8jnyWMY0ZOYXr2UxOlxbV5hKlx32fse3azmh81ik89/ro4jL6VcCf4AZM/V/VqiweFFEovGM1VWbjh91WZdCeFdtL0XaoTIptyIYbPAlXISJ7cmx5fwQS1Lx2UzuNMX0W4Nb1XxAoHxDNGX8hWB10GNdY84a+Y0kTYj1noi0eBzn3pkW8Crpcy1hFGxYwDzquR77giZJo/JyG2/qBEIwSucwvQpu2jjlOciSpYGUk5WK1SaIpJSOX0tZYrRI3lnVbccE0rJFpcS2VS/jg0kPF8srDkrO/7aWzt/nmTKFEbgqQSKBkJIJILwVOJSTBagQyDjVjbpME0gXPFjLBYXmUSLT0uVzHGInj6hHi6ijoj8JNIik+QolCuiAoW2K+gFhxBBHZBybdQL/hoNN9g4m4dbXFwsfZQXssep2RPiL0txazDd5T82K0g5L+fADQYWKbhVimR9GgC1Los5L5eHWCLMkhCTg6rFaJWKOuLEUbC4biWRLF6no5VCNAqFMmioxUK1YrhRDKbdSiB2+rqcsbO5QDHjz6f8IhUS6XCFCBlBeMeELOlj3ki8RoWEYkjO4QuBQtov5AP1PIiYloCQ/ifqo4knwTjkCQc8QuG8hPuIpM/p9s6pXAu7LqfbzWRBMgWyuXMGB32gu5j0VnF3QP8KAN9N5WMfcMQR8dvgoJ1AnVTGxeXcTi+oPQO3j9wGuzuLOHKoi8Xc6ZgzCDpw2Mkmrd53LwG3diobfJ+NWdGQ2e8xxgOWBGTFYSsUdIWCrkjYGQ27zp2mVMTKpOxZ2PZ5DlkL8JlTMwXY1ZOoRxM/P0YDx3jUmA4bUpABi5jxqJlELKWkpRA3p8KWXMxCwhY8ZsYipkTAgIX01t1JwLA5HrVtgSYV5FQjoNZwsKhXzwYtyqhLDXs0iFebCRyg8gcG6rDg+yJ8moOOEn69HDdsPQaOV773nSkcH9bPTRtRz47taEmvnjnVzZ3uz5sP39iP33pOFcZ3czb9YsSxjQX3/ZZNn0UVtin1ih+AvYVvHQdzlsMVx/EK7NqNunZkATSueY1rPvOa37zmM65C9k3Eo0r5NTHPLmhcdZ9teE+WdYvfAdszX5+pX5oOliyHCs/Zhs+kDFhUfrPSZ972WZQyfosybFOFbCqfZQs0boGGTdfJhu39/O78N8Dqy4fKmb+uvvrb8vS3qzPfrc1+vzb3w9abR6qlx7uKp+qVCc3KhHb1mW79uW59Srv+fG/t2cHWi/ebExuv/gy8mRhZnBxdeDo692Rk9snob7x+MjbzeOzV+Oj0Px9MP3rw06Mv/s+IzI//GJkeH3nzbGx5agyY/vvv/vXo96/HH8w9GV2YGFuc/PLtc1n4o+LFn5anvlJMfbn8G3Lw+cPlF1/J0uLkH+afPph9/MX/AMeXn0VUAhTvAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;책이 생각보다 훨씬 두꺼워서 놀랐었다...&apos; title=&apos;&apos; src=&apos;/static/656bfeb5df717247362c11dccea65026/ca1dc/jvm-under-the-hood.png&apos; srcset=&apos;/static/656bfeb5df717247362c11dccea65026/e7570/jvm-under-the-hood.png 170w,
/static/656bfeb5df717247362c11dccea65026/f46e7/jvm-under-the-hood.png 340w,
/static/656bfeb5df717247362c11dccea65026/ca1dc/jvm-under-the-hood.png 680w,
/static/656bfeb5df717247362c11dccea65026/02d09/jvm-under-the-hood.png 1020w,
/static/656bfeb5df717247362c11dccea65026/9d567/jvm-under-the-hood.png 1360w,
/static/656bfeb5df717247362c11dccea65026/cae0a/jvm-under-the-hood.png 3024w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&apos;gatsby-resp-image-figcaption&apos;&gt;책이 생각보다 훨씬 두꺼워서 놀랐었다...&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;스터디 교재로는 &lt;a href=&quot;https://www.yes24.com/Product/Goods/126114513&quot;&gt;『JVM 밑바닥까지 파헤치기』&lt;/a&gt;라는 책을 선택했습니다. 책의 분량이 많았기 때문에 챕터별로 담당자를 지정해서 읽어오고, 이를 사내 컨플루언스에 문서화하고 발표하는 방식의 스터디를 진행하였습니다. 발표를 하면서도 짧은 질문과 의견들이 오고갔고, 주로 &lt;code class=&quot;language-text&quot;&gt;이 부분에서 자신이 이해한 것이 맞는지?&lt;/code&gt;를 중심으로 근거를 찾아가면서 스터디를 진행하였습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;여러 챕터에 걸쳐서 안드로이드 개발자에게 좋은 내용들이 많았지만, 개인적으로는 가비지 컬렉터의 내용이 가장 좋았기 때문에 &apos;3장 가비지 컬렉터와 메모리 할당 전략&apos;의 핵심 내용들을 요약해서 정리해보도록 하겠습니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;가비지-컬렉션&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EA%B0%80%EB%B9%84%EC%A7%80-%EC%BB%AC%EB%A0%89%EC%85%98&quot; aria-label=&quot;가비지 컬렉션 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;가비지 컬렉션?&lt;/h3&gt;
&lt;p&gt;가비지 컬렉션(GC)은 자바 언어에서 처음 소개한 기술이 아니며, MIT에서 개발된 리스프라는 언어가 시초라고 합니다. 이러한 가비지 컬렉션과 메모리 할당의 내부 동작을 이해하면 다양한 메모리 오버플로우, 메모리 누수 문제를 해결해야하는 상황에 도움이 될 수 있습니다. &lt;/p&gt;
&lt;h3 id=&quot;자바-힙과-메서드-영역은-불확실&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%9E%90%EB%B0%94-%ED%9E%99%EA%B3%BC-%EB%A9%94%EC%84%9C%EB%93%9C-%EC%98%81%EC%97%AD%EC%9D%80-%EB%B6%88%ED%99%95%EC%8B%A4&quot; aria-label=&quot;자바 힙과 메서드 영역은 불확실 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;자바 힙과 메서드 영역은 불확실&lt;/h3&gt;
&lt;p&gt;구현한 클래스마다 요구하는 메모리 크기가 다를 수 있습니다. 프로그램이 어떤 객체를 생성할지, 얼마나 많이 만들지는 오직 런타임에만 알 수 있습니다. 그래서 이 메모리 영역들의 회수는 동적으로 이루어지고, 가비지 컬렉터는 이런 영역을 관리하는 데 집중합니다.&lt;/p&gt;
&lt;p&gt;가비지 컬렉터가 &lt;strong&gt;힙을 청소&lt;/strong&gt;하려면 어떤 객체가 살아 있고 죽었는지를 판단해야 하는데, 여기서 죽었다는 말은 어떤 식으로도 프로그램 코드에서 사용될 수 없다는 뜻입니다.&lt;/p&gt;
&lt;p&gt;여기서 객체가 살아있는지 판단하는 알고리즘으로 크게 두 가지로 나눌 수 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;참조 카운팅 알고리즘&lt;/li&gt;
&lt;li&gt;도달 가능성 분석 알고리즘&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;참조-카운팅-알고리즘&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%B0%B8%EC%A1%B0-%EC%B9%B4%EC%9A%B4%ED%8C%85-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98&quot; aria-label=&quot;참조 카운팅 알고리즘 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;참조 카운팅 알고리즘&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;객체를 가리키는 참조 카운터를 추가. 참조하는 곳이 하나 늘어날 때마다 카운터 값을 1씩 증가&lt;/li&gt;
&lt;li&gt;참조하는 곳이 하나 사라질 때마다 카운터 값을 1씩 감소&lt;/li&gt;
&lt;li&gt;카운터 값이 0이 된 객체는 더는 사용될 수 없음&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;마이크로소프트 COM, 파이썬, 러스트 등이 메모리 관리에 참조 카운팅 알고리즘 사용한다고 합니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;그런데 자바, 적어도 자바 가상 머신에서는 참조 카운팅을 사용하지 않는데, 그 이유는 바로 &lt;code class=&quot;language-text&quot;&gt;순환 참조 문제&lt;/code&gt;를 풀기 어렵기 때문입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre class=&quot;language-java&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ReferenceCountingGC&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;testGC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 두 객체 생성&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;ReferenceCountingGC&lt;/span&gt; objA &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ReferenceCountingGC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;ReferenceCountingGC&lt;/span&gt; objB &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ReferenceCountingGC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 내부 필드로 서로를 참조&lt;/span&gt;
    objA&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; objB&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    objB&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; objA&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 참조 해제&lt;/span&gt;
    objA &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    objB &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 이 라인에서 GC가 수행된다면 objA와 objB가 회수될까?&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;gc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;testGC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;참조를 해제한 시점부터 두 객체에 접근할 길이 사라지지만, 아직도 서로를 참조하고 있기 때문에 참조 카운터는 아직 0이 아닙니다. 따라서 참조 카운팅 알고리즘으로는 둘을 회수하지 못하게 됩니다.&lt;/p&gt;
&lt;p&gt;그러나 실행 결과 자바 가상머신에서 &lt;code class=&quot;language-text&quot;&gt;objA&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;objB&lt;/code&gt;가 메모리에서 회수되었음을 확인할 수 있고, 이는 자바 가상 머신은 객체 생사 판단에 &lt;code class=&quot;language-text&quot;&gt;참조 카운팅 알고리즘&lt;/code&gt;을 사용하지 않는다는 것을 알 수 있습니다.&lt;/p&gt;
&lt;h3 id=&quot;도달-가능성-분석-알고리즘&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%8F%84%EB%8B%AC-%EA%B0%80%EB%8A%A5%EC%84%B1-%EB%B6%84%EC%84%9D-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98&quot; aria-label=&quot;도달 가능성 분석 알고리즘 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;도달 가능성 분석 알고리즘&lt;/h3&gt;
&lt;p&gt;자바, C# 등의 주류 언어들은 객체 생사 판단에 도달 가능성 분석(reachability analysis) 알고리즘을 사용합니다. 이 알고리즘의 핵심은 &lt;code class=&quot;language-text&quot;&gt;GC 루트&lt;/code&gt; 입니다. 이 루트 객체들을 시작 노드 집합으로 사용하며, 시작 노드들에서 출발하여 참조하는 다른 객체들로 탐색하여 들어가는 흐름으로 진행됩니다. 이때 탐색 과정에서 만들어지는 경로를 &lt;code class=&quot;language-text&quot;&gt;참조 체인(reference chain)&lt;/code&gt;이라고 부릅니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/9a1af47920a6b104f08e08dc3a35d54f/18d28/gc-root.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 59.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACr0lEQVR42lVSaU9aURR8/7Fp0mjSpF/qUlRoEZTCk0Xgsa/KooCAgrLKJou40rjVmtq0Tf/NdN6lbdIPk7nv3HvnzJl3pYfWNibVCG7qMSKO+1YCnzspPHbT+DrM4nmUw7fTvSkT38d5/CB+nhX+8V/8Oi9CGu0pqEZNaKXs2LZqYNPMwKt/g1pcxqjowSDvxrDgJit/1orAeN+LcWGKs30f4cUTjUj9rBNHERMa2zL2/Qak7Bpk3Fo0kzJOsg70Mg50ic6Ofcq7f3jHht6uA62EFYehNZQDBtw34pBuamFMKn5cVwI4O1DQzzkE3zRCuGuFGUEE9+0IHtpRgdtmGJ+qwf8wOQrg6tCHx5YqWA9RMIC7ZgSHESNc2lnE5TmclxQ89baYZ4x5xvGF68fuFOqdk10rro98eOL3cz+B55ME1xS8LHlxVfaKzR7HqcZNqMZMuCh76CYknE+qAe6rHBRi46KCUd7J3NxiultOc8v6XSMMaVxwohZbRymoR3PbzAM+nLJWDhmE4w6dXJQ8IobBnpNNbegzW3XEiwMP+hk7VI1Lnpkc+SF1UjKcyzOwzL1A2r6IU3YWtZUZyPMvsevUiAbDPQcaWx/5A43o7liFQzXv44SFhkwY5jbZQIHUS8uox9ZQjazhmA57PNxlrbG1zudk4GUZg5wNg6yNuW2I7PoZKwXsZBtG5JH6I9n0Yt8FqZ00o5Mwoy1g4TMwU9wIv/41XHSZocNO2iJcd9Mb5A2ObEfB+x5J2yIKHh3yihaVMONJWiBVwqsoBfQoB1cF1JGKXh0U3Swcy6+QtM5zJCMqrNc4SS26RvcmcVYVyrlXkHUuIbupQdmvh1RkB1Ug79ESOgosMst3SBIpZpq0LSBB0bjlLXmB9el+YmMeWdcS6lEjJzLQoYGP+wN+A5L4oxFzluFCAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;gc root&apos; title=&apos;&apos; src=&apos;/static/9a1af47920a6b104f08e08dc3a35d54f/ca1dc/gc-root.png&apos; srcset=&apos;/static/9a1af47920a6b104f08e08dc3a35d54f/e7570/gc-root.png 170w,
/static/9a1af47920a6b104f08e08dc3a35d54f/f46e7/gc-root.png 340w,
/static/9a1af47920a6b104f08e08dc3a35d54f/ca1dc/gc-root.png 680w,
/static/9a1af47920a6b104f08e08dc3a35d54f/02d09/gc-root.png 1020w,
/static/9a1af47920a6b104f08e08dc3a35d54f/9d567/gc-root.png 1360w,
/static/9a1af47920a6b104f08e08dc3a35d54f/18d28/gc-root.png 1444w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;단, 자바에서 GC 루트로 이용할 수 있는 객체는 정해져 있는데, 그 종류는 다음과 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;가상 머신 스택(스택 프레임의 지역 변수 테이블)에서 참조하는 객체&lt;/code&gt; : 현재 실행 중인 메서드에서 쓰는 매개 변수, 지역 변수, 임시 변수 등&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;메서드 영역에서 클래스가 정적 필드로 참조하는 객체&lt;/code&gt; : 자바 클래스의 참조 타입 정적 변수&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;메서드 영역에서 상수로 참조되는 객체&lt;/code&gt; : 문자열 테이블 안의 참조&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;네이티브 메서드 스택에서 JNI가 참조하는 객체&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;자바 가상 머신 내부에서 쓰이는 참조&lt;/code&gt; : 기본 데이터 타입에 해당하는 Class 객체, 시스템 클래스 로더 등&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;동기화 락(synchronized 키워드)으로 잠겨 있는 모든 객체&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;자바 가상 머신 내부 상황을 반영하는 JMXBean&lt;/code&gt; : JVMTI에 등록된 콜백, 로컬 코드 캐시 등&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이외에도 가비지 컬렉터의 종류나 현재 회수 중인 메모리 영역에 따라 다른 객체들도 &lt;code class=&quot;language-text&quot;&gt;임시로&lt;/code&gt; 추가가 가능합니다.&lt;/p&gt;
&lt;h3 id=&quot;세대-단위-컬렉션-이론&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EC%84%B8%EB%8C%80-%EB%8B%A8%EC%9C%84-%EC%BB%AC%EB%A0%89%EC%85%98-%EC%9D%B4%EB%A1%A0&quot; aria-label=&quot;세대 단위 컬렉션 이론 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;세대 단위 컬렉션 이론&lt;/h3&gt;
&lt;p&gt;현재 상용 가상 머신들이 채택한 가비지 컬렉터들은 대부분 세대 단위 컬렉션 이론에 기초해 설계되었습니다.&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color:orange&quot;&gt;1. 약한 세대 가설 : 대다수 객체는 일찍 죽는다.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color:orange&quot;&gt;2. 강한 세대 가설 : 가비지 컬렉션 과정에서 살아남은 횟수가 늘어날수록 더 오래 살 가능성이 커진다.&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;💬 “늙었다는 것은 살아남았다는 것”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;이 두 가지 가정이 합쳐져 가비지 컬렉터들에 일관된 설계 원칙을 제공합니다.
여기서 &lt;code class=&quot;language-text&quot;&gt;나이 = 가비지 컬렉션에서 살아남은 횟수&lt;/code&gt;이고, &lt;strong&gt;대부분의 객체가 곧바로 죽을 운명이라면?&lt;/strong&gt; 살아남는 소수의 객체를 유지하는 방법에 집중하는 편이 유리합니다.
한 번 살아남은 객체는 통계적으로 잘 죽지 않으니 다른 영역에 따로 모아 두고, 가상 머신이 그 영역을 회수하는 빈도를 줄이는 방식입니다.&lt;/p&gt;
&lt;p&gt;이러한 세대 단위 컬렉션 이론을 가상 머신에 적용한 설계자들은 &lt;strong&gt;자바 힙&lt;/strong&gt;을 최소 두개의 영역으로 나누게 되었습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;신세대 : 가비지 컬렉션 때마다 다수의 객체가 죽고 살아남은 소수만 구세대로 승격&lt;/li&gt;
&lt;li&gt;구세대 &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;그러나 복잡해 보이는 상황이 하나가 있습니다. 🤔&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;객체들은 단독으로 존재 X&lt;/li&gt;
&lt;li&gt;다른 세대에 존재하는 객체들을 참조하는 상황이 있음&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;또한, 신세대에서만 가비지 컬렉션을 하고 싶어도 구세대에서 참조 중인 객체도 분명 있을 것입니다. 살아남을 객체를 찾으려면 고정된 &lt;code class=&quot;language-text&quot;&gt;GC 루트&lt;/code&gt;들뿐 아니라 &lt;code class=&quot;language-text&quot;&gt;구세대 객체까지&lt;/code&gt; 모두 탐색해야 하며, 이 경우 성능 면에서 확실히 부담이 큽니다. 이 문제를 풀기 위해 &lt;code class=&quot;language-text&quot;&gt;세대 단위 컬렉션 이론&lt;/code&gt;에 &lt;strong&gt;3번째&lt;/strong&gt; 가정이 추가됩니다.&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color:orange&quot;&gt;3. 세대 간 참조 가설 : 세대 간 참조의 개수는 같은 세대 안에서의 참조보다 훨씬 적다.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;상호 참조 관계의 두 객체는 &lt;code class=&quot;language-text&quot;&gt;삶과 죽음을 함께하는 경향&lt;/code&gt;이 있습니다. 신세대 객체가 세대 간 참조를 가지고 있을 때 구세대 객체는 잘 죽지 않기 때문에 가비지 컬렉션을 거쳐도 신세대 객체는 세대 간 참조 덕에 구세대로 승격됩니다. 이렇게 같은 세대가 되었으므로 세대 간 참조는 자연스럽게 사라게 됩니다.&lt;/p&gt;
&lt;p&gt;따라서 이 가설에 따르면 세대 간 참조의 수는 아주 적기 때문에 구세대 전체를 훑는 건 시간 낭비라고 판단합니다.&lt;/p&gt;
&lt;h3 id=&quot;마크-스윕-알고리즘&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%A7%88%ED%81%AC-%EC%8A%A4%EC%9C%95-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98&quot; aria-label=&quot;마크 스윕 알고리즘 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;마크-스윕 알고리즘&lt;/h3&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/1c03ec5686b14ea083887c3f3ae33b77/2573e/mark-sweep-algorithm.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 56.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACzElEQVR42jWSWW8bZRSG519xA0K5QCoCSkFsAlykQlFR0iZCQQ1JTdxGWZx6qZc63uPd43h3HNvjOo5jOyFx3OKapiIC1KLyPx6Op+Li1Wi+OfN873nPUV6cafx5UuP3TpF+JUq/HOWxlqG148dyZw6rcY7Nn2/pst6Z5cHyjzzK+DitpYg7VvCsLhCx3yVmN3HeLaH881jj5bDO+CDHqJUh79/k9vWvWLhhEMg0duMsKfcqqmcd9715bL/Msb8TkPo8QfMSlsWbzHx9hasfTHGyF0N5NdL4d9wUmMqgFiNsMXJ56g2uffIu9aSbSsTO/cVpzAs/YJq9xtL0NyzLc3X+ew6LQS6OKxhnrvLtx+8w1BIof5+UeTVqkPOtc8vwITe+eJ/PLr3Fl++9zU3DR8x/9ynb1iXC1kUMl6f4/NKbrP10HadpVhxF+GuwS867Rsxq5PwwOwGWeCmHx+UQGc8KWd8a+cCGLnXrHqWwmef9HH8c5dHSDvbiNobNGE/back9w/NeTtdFv8CLsyrK01aSgdx0Wo3QSruox+3UE3YeqS5G7ZRklWbQiOiQyftoP0kz7aQmNYN6RAePOyrnvSwXR0WUsQDHrTQnu2H21dfAluqkIT/k/GsUQxv0yj5pLyxuNykEN2QD3HQLXqoRC3tRK8NGnGfi9llbRfmtmRBgil7BTyV8n3Jok+NKiE7OS9S2RNK5zH72Id2Sj1bGpatb9In8dPJbAvbRLwYksgBPtDjKpN0zUTfvk1ZcaAkHBwJr73j0zBrJiR7QVB16DFrKQdp9l5TLJHA3/VKQctDMrhgZVMMov8owJvQj+XCQ3ZIc3XSyXsrbFhnKig6buKonbAJ16q4OC1u64+NqSLIPcypxDWvbMgsBHoqbbs5DPWrDbZojsH5bMnTrqzFjuEJSnExg6kOZeMhMW2r/B/ZLfjEiZsqvW+4VvPwHJs17iXKqppUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;mark sweep algorithm&apos; title=&apos;&apos; src=&apos;/static/1c03ec5686b14ea083887c3f3ae33b77/ca1dc/mark-sweep-algorithm.png&apos; srcset=&apos;/static/1c03ec5686b14ea083887c3f3ae33b77/e7570/mark-sweep-algorithm.png 170w,
/static/1c03ec5686b14ea083887c3f3ae33b77/f46e7/mark-sweep-algorithm.png 340w,
/static/1c03ec5686b14ea083887c3f3ae33b77/ca1dc/mark-sweep-algorithm.png 680w,
/static/1c03ec5686b14ea083887c3f3ae33b77/02d09/mark-sweep-algorithm.png 1020w,
/static/1c03ec5686b14ea083887c3f3ae33b77/9d567/mark-sweep-algorithm.png 1360w,
/static/1c03ec5686b14ea083887c3f3ae33b77/2573e/mark-sweep-algorithm.png 1380w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
가장 기본적인 가비지 컬렉션 알고리즘입니다. 먼저 회수할 객체들에 모두 표시(mark)한 다음, 표시된 객체들을 쓸어 담는(sweep) 방식입니다. 반대로, 살릴 객체에 표시(mark)하고, 표시되지 않은 객체를 회수(sweep) 하기도 합니다.&lt;/p&gt;
&lt;h4 id=&quot;단점은&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%8B%A8%EC%A0%90%EC%9D%80&quot; aria-label=&quot;단점은 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;단점은?&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;실행 효율이 일정하지 않음 : 자바 힙이 다량의 객체로 가득 차 있고 대부분이 회수 대상이라면? 표시하는 일 &amp;#x26; 회수하는 일 모두 커짐 → 객체가 많아질수록 표시하고 쓸어 담는 작업의 효율이 떨어짐&lt;/li&gt;
&lt;li&gt;메모리 파편화가 심함 : 가비지 컬렉터가 쓸고 간 자리에는 불연속적인 메모리 파편이 만들어짐. → 파편화가 너무 심하면 프로그램이 큰 객체를 만들려 할 때 충분한 크기의 연속된 메모리를 찾기가 점점 어려워짐 → 또 다른 가비지 컬렉션 유발&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;마크-카피-알고리즘&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%A7%88%ED%81%AC-%EC%B9%B4%ED%94%BC-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98&quot; aria-label=&quot;마크 카피 알고리즘 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;마크-카피 알고리즘&lt;/h3&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/c83d4b5d51797b6ba7b685c7fdc70aa7/64756/mark-copy-algorithm.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 58.235294117647065%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAADLklEQVR42i2SWVOaZxhA+R+9aGZy0Wkn0+lNp+2EMXFpVNxKNBpcUWtcAGMEWQRZRCMgRC24FDo2imsKRECrolFRUzXLJNqOndHkt5y+kl48892d93zPcySjgzaeOPvwWI14bL2MPXbg7bfQ2VyPRoyqsQ6Vsha3zURo1M3vfh/PpidJzE+Tis6TXo1wvJ3k3WGKy7MjJMN2E4O9Wmw9nRg0rdTfk1NVKqM49xbygrwM1KBupau1EYtWzYBJS8Dt4LcxD0uhACvhEOvPZthNLnH5/hCJ32Vn2G4UBgbMjzr45ovrfPf1VzjFIwNmnQAp6W5rygB7H6kEsBv/kI3giIvFoF8Ag5+A8UUuroCjj60MmrXcleWSJ/2WL699xo3rn1OSl8VPBbnU3SvlQU0F7UoFPapmzF3tDDuMXInMBHz8MT1Ocj7Ei+gcl6cHSEYGzAz16VBWlVFbXkzjfTnK+2U0VJagaqpmLjhCLDzFpLefKZ+T2QkvkZlx4gKSis6yt7rIy40Ir3cSfDgTwCGLln7DQ7Gnn9FrWjB1tYlpxW7QiIe0wr5bHEvPzKSX2Owka8vT7CYWSa8tc7QV481egrOXG5y/2ubj3/8DrdoOSu9kkX/7e4pypRRm36Qs/zaVpXeolsuEbSkOvYaAy8b0mEvsbYrkQpDtWJh0YomTVIx3e6vil/eReB0GnKZOymU5FOdJBegWspybyAtzUMgLqa0ookmswOvQi2RcRJ8G2P9ziYO1JY43o7x9EeefjOEWH07TSNzWHuw9apFItjD7QeQiJT9LmOZIBTSbqpIfaagoJvikn8TcBInwBPvJBQ7E7o42I5+Ah+ucH2/y8QroEPuziBw0zXW0NyjoaKymrb4q821vVKBurkEr0hl321kQB4oIw+3nc+zEF9hfXebV5nNO02vCcp2LtztI7CLo3ocdNCvKaamtFIFrUJQVZIxt+k48IhGP1ZCJeXbSx6++gcylNyJhcd0YJ1vxDPDfv1JcvNlFYtNpMoZGzQP06hbM3SqaBLzmbhE2nZohiw6nsYvRgT6e+j2YRAlGMYuhXzjZXuF4a4X3Anh+BXy9w3+uE2baBg26dAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;mark copy algorithm&apos; title=&apos;&apos; src=&apos;/static/c83d4b5d51797b6ba7b685c7fdc70aa7/ca1dc/mark-copy-algorithm.png&apos; srcset=&apos;/static/c83d4b5d51797b6ba7b685c7fdc70aa7/e7570/mark-copy-algorithm.png 170w,
/static/c83d4b5d51797b6ba7b685c7fdc70aa7/f46e7/mark-copy-algorithm.png 340w,
/static/c83d4b5d51797b6ba7b685c7fdc70aa7/ca1dc/mark-copy-algorithm.png 680w,
/static/c83d4b5d51797b6ba7b685c7fdc70aa7/02d09/mark-copy-algorithm.png 1020w,
/static/c83d4b5d51797b6ba7b685c7fdc70aa7/64756/mark-copy-algorithm.png 1200w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
회수할 객체가 많아질수록 효율이 떨어지는 마크-스윕 알고리즘의 문제를 해결하기 위해 생겨나게 되었습니다. 가용 메모리를 똑같은 크기의 두 블록으로 나눠서 한 번에 한 블록만 사용하고, 한쪽 블록이 꽉 차면 살아남은 객체들만 다른 블록에 복사하고 기존 블록 목록을 한 번에 청소하는 방식입니다.&lt;/p&gt;
&lt;p&gt;만약 대다수 객체가 살아남으면? 메모리 복사에 상당한 시간 허비를 하게 됩니다.
대다수 객체가 회수된다면? 생존한 소수의 객체만 복사하면 됨 &amp;#x26; 복사 과정에서 객체들이 메모리 한쪽 끝에서 차곡차곡 쌓이기 때문에 메모리 파편화 문제로부터 해방됩니다.&lt;/p&gt;
&lt;h3 id=&quot;단점은-1&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%8B%A8%EC%A0%90%EC%9D%80-1&quot; aria-label=&quot;단점은 1 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;단점은?&lt;/h3&gt;
&lt;p&gt;가용 메모리를 절반으로 줄여 낭비가 제법 심하다는 점&lt;/p&gt;
&lt;p&gt;오늘날 상용 자바 가상 머신은 대부분 신세대에 이 알고리즘을 적용합니다.
IBM의 연구에 따르면 신세대 객체 중 &lt;code class=&quot;language-text&quot;&gt;98&lt;/code&gt;%가 첫 번째 가비지 컬렉션에 살아남지 못했고, 이는 신세대용 메모리 영역을 1:1로 나눌 필요가 없다는 결론이 나게 됩니다.&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/6f7f2f8d672f9ffec5a6dd08595fa600/51f47/young-gen-and-old-gen.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 63.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACGElEQVR42o1SaW/aQBTk/39ppahV1NKqh4LTg4ZAOZJymGBOgwsFfGHAxvZiG4yh+AACSR9HRUu/dDT7tFrt7DtmfQ87PP4fTm76THOczxOVSrlKkmSlnM3iuq4f7v3Lv+GD1ZfVy9vcVbYSzBQ/p4thohYrUJFcJVasx8s/9kxUmhGixgk9SOYtFkexZk5fR3F/OOWPpF9F0i+uk2eB0DMs5A99e3mdPDCceoqFb5KZrtCZTqf70rZi27ZFSdJ1Q9ONoaYNkWZOrGa7TVKUgobiQO5LA0VF47Hpuu5p2cgYX+WqUBuUCjFcqCNjJCpIQpqgaOPZ/Ke7ZHoDBaHhECmKLIoizOWQGcTnwfjzD+Gzd5/OP0afvP/SoFlR1RptLl2sNhm+05OiqSzNcqCUFbnf76uqehCv1/cTgDmZWNbENEeGsdgBEu0a0YHQ1Hq9Pp22YehZPHNH5IlC8TaZZDrC6uHRcT3b9e7Xmz9tWq6WnuetVivIudlsDj13ZbXJdxXNKDXosTWz5jbFdnXTImnhTYIIpIoXyS2xVAlLk1gc1zTtOO2RNau12AbN5cg6zXdpTsiUalSLSZeoixh+eXMHxBLZQByH7/A2+FWSpIMYKoKd47j1ep36TjEM02q1Ab1ej2XpDs8JHZ7nOJ5jB2IfIpwghI5W7X8s9AOGL5fbUYGfEG3Hmc/ncAjLgec9z3Gd7ea3278AlpuyOpudEuYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;young gen and old gen&apos; title=&apos;&apos; src=&apos;/static/6f7f2f8d672f9ffec5a6dd08595fa600/ca1dc/young-gen-and-old-gen.png&apos; srcset=&apos;/static/6f7f2f8d672f9ffec5a6dd08595fa600/e7570/young-gen-and-old-gen.png 170w,
/static/6f7f2f8d672f9ffec5a6dd08595fa600/f46e7/young-gen-and-old-gen.png 340w,
/static/6f7f2f8d672f9ffec5a6dd08595fa600/ca1dc/young-gen-and-old-gen.png 680w,
/static/6f7f2f8d672f9ffec5a6dd08595fa600/51f47/young-gen-and-old-gen.png 892w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
신세대를 하나의 큰 에덴 공간(80%)과 두 개의 작은 생존자 공간(10%)으로 나누는데, 핫스팟 가상 머신에서 에덴과 생존자 공간의 비율은 기본적으로 8:1 (에덴 80% + 생존자 공간 중 하나 10%) 입니다. (낭비하는 공간은 단 10%뿐)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;98%의 객체가 회수된다는 데이터 = ‘일반적인 상황&apos;에서 측정된 결과&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;😮 10% 넘는 객체가 살아남는 특이 케이스는 어쩌고? &lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이런 케이스에 대처하기 위한 설계로 &lt;code class=&quot;language-text&quot;&gt;메모리 할당 보증 메커니즘&lt;/code&gt; 개념이 등장합니다.&lt;/p&gt;
&lt;h3 id=&quot;메모리-할당-보증-메커니즘&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%A9%94%EB%AA%A8%EB%A6%AC-%ED%95%A0%EB%8B%B9-%EB%B3%B4%EC%A6%9D-%EB%A9%94%EC%BB%A4%EB%8B%88%EC%A6%98&quot; aria-label=&quot;메모리 할당 보증 메커니즘 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;메모리 할당 보증 메커니즘&lt;/h3&gt;
&lt;p&gt;마이너 GC(신세대 GC)에서 살아남은 객체를 생존자 공간이 다 수용하지 못할 경우 다른 메모리 영역(구세대)를 활용해 메모리 할당을 보증하는 것으로, 이러한 할당 보증 메커니즘을 통해 가비지 컬렉션에서 살아남은 객체를 구세대에 바로 추가합니다.&lt;/p&gt;
&lt;h3 id=&quot;마크-컴팩트-알고리즘&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%A7%88%ED%81%AC-%EC%BB%B4%ED%8C%A9%ED%8A%B8-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98&quot; aria-label=&quot;마크 컴팩트 알고리즘 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;마크-컴팩트 알고리즘&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;마크-카피 알고리즘&lt;/code&gt;은 객체 생존율이 높을수록 복사할 게 많아져서 효율이 나빠집니다. 공간을 50%나 낭비하기 싫다면 할당 보증용 공간을 따로 마련하여 대다수 객체가 살아남는 극단적 상황에 대처해야 하기 때문에 구세대에는 적합하지 않습니다. (객체 생존율이 높기 때문)&lt;/p&gt;
&lt;p&gt;&lt;span class=&apos;gatsby-resp-image-wrapper&apos; style=&apos;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;&apos;&gt;
      &lt;a class=&apos;gatsby-resp-image-link&apos; href=&apos;/static/a998cb3743114039f2251e13585599cc/08188/mark-compact-algorithm.png&apos; style=&apos;display: block&apos; target=&apos;_blank&apos; rel=&apos;noopener&apos;&gt;
    &lt;span class=&apos;gatsby-resp-image-background-image&apos; style=&quot;padding-bottom: 57.64705882352942%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAADCElEQVR42iWTa1MaZxTH+UJ12um0b5JmOn3bSdsYkwlNY0ASbWzG6YRatRpJTCTcBEEEDCCXBWGBZZergPGGNkbbmk7b7/Prgbw48+yc2ed/zv/ymMpqEa1copBTUAsFDL1Ks26QV7IUd3LD3uCfcqlAqZinYWgc7HVo1jS5k6UsPUMrstuo8t/f55iUTBolkyIS3iCw5mNxYZ7f5ucYGx3lu2+uc++uGavlHuY7t7k1NorXtUq3VWNleYn735uZtFqw/GBm/pcZ/jw/wqRrsl0+Sz6XIbQe4NrVq3xx5QquV04ZEpKej2gkyMsVB47lRdb9HrYTUV7HwpQKCiG/mzs3b2CfmeaPt4eYKmoBv8/NXbOZWzdH+fijET4ZGcFms/LzzGMmrOPYpL768hqff/Yp317/mttjN2TTF1ycHVFQkjyZeYTX+Yz3F8eYhlMCXmwT4zy0WZh8YGVKavKhhZ+mH6BrefpHHZ4tz/NoakI2C6JXcqKhytlJj+P9Fr22xslBi38vTzElYpukkrEhjdR2DCWbEDPSaHKpUStR14u0GmW6uwadtk6vo7PXNWhLr9OscPimQf+wzbvTHv8MAIMBH27XS36dtbMwN8vTxQWeO5YIh3wkXoelNshl42TSW2KeVCpKMZ8kndwUunHUfEJcVgS8zF8XYkoqHiXgc7H6woFz9Tk+j1PcdqEWM9Rku5pRHG601zE43G/KqdMXenu7OscHzWGdv33DmWx4OQCMBAMC4CEU8rMhldjaZCsaIimDcsr2kL5eLQi4SqupDSXotiWrhkpPQHsiw+/HXU6E9uX5gVBe8+L3usWYNYmIn6CcsUiYdCpONj3QMyXG7IimOxJ6laqcdaMkxux80LcmOvZaYooAvtsfAHpYcTxlzv4Ex9IgZz4eT//IpMRm3e8ll0myHY+Ijgmhrw7Bmo0KjXpZAFWhXhNjWpz1ux8A/R6XvIxBJKaYtdvxul0SHRvW++N4XE4SQj0WXieV2JIt5WlqQr8q2g5kkO92vSKGaPQlPhenPf4HIoKamwzjuQEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&apos;gatsby-resp-image-image&apos; alt=&apos;mark compact algorithm&apos; title=&apos;&apos; src=&apos;/static/a998cb3743114039f2251e13585599cc/ca1dc/mark-compact-algorithm.png&apos; srcset=&apos;/static/a998cb3743114039f2251e13585599cc/e7570/mark-compact-algorithm.png 170w,
/static/a998cb3743114039f2251e13585599cc/f46e7/mark-compact-algorithm.png 340w,
/static/a998cb3743114039f2251e13585599cc/ca1dc/mark-compact-algorithm.png 680w,
/static/a998cb3743114039f2251e13585599cc/02d09/mark-compact-algorithm.png 1020w,
/static/a998cb3743114039f2251e13585599cc/08188/mark-compact-algorithm.png 1176w&apos; sizes=&apos;(max-width: 680px) 100vw, 680px&apos; style=&apos;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&apos; loading=&apos;lazy&apos; decoding=&apos;async&apos;&gt;
  &lt;/a&gt;
    &lt;/span&gt;
이는 마크-컴팩트 알고리즘인데, 표시 단계는 &lt;code class=&quot;language-text&quot;&gt;마크-스윕&lt;/code&gt;과 같습니다. 회수 대상 객체들을 모두 쓸어 담는 대신 생존한 모든 객체를 메모리 영역의 한쪽 끝으로 모은 다음, 나머지 공간을 한꺼번에 비웁니다. &lt;/p&gt;
&lt;h4 id=&quot;마크-스윕-알고리즘과의-차이는&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%EB%A7%88%ED%81%AC-%EC%8A%A4%EC%9C%95-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%EA%B3%BC%EC%9D%98-%EC%B0%A8%EC%9D%B4%EB%8A%94&quot; aria-label=&quot;마크 스윕 알고리즘과의 차이는 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;마크-스윕 알고리즘과의 차이는?&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;💬 메모리 이동이 일어난다는 점&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;그런데? 가비지 컬렉션 후 살아남은 객체를 이동할지는 양날의 검과 같은 결정입니다. 구세대에서는 회수 때마다 살아남는 객체가 상당히 많을텐데, 생존한 객체들을 이동시킨 후, 이동된 객체들을 가리키던 기존 참조를 모두 갱신하는 것은 매우 부담되고, 그렇다고 &lt;code class=&quot;language-text&quot;&gt;마크-스윕 알고리즘&lt;/code&gt;처럼 살아있는 객체를 전혀 이동시키지 않는다면 힙이 파편화되는 문제가 발생합니다. 그러나 이러한 문제는
&lt;span style=&quot;color:yellowgreen&quot;&gt;파편화 없는 할당 연결 리스트로 해결 가능&lt;/span&gt;합니다.&lt;/p&gt;
&lt;p&gt;하드디스크나 SSD에는 물리적으로 연속된 공간이 없더라도 큰 파일을 저장할 수 있는 이유가 파일을 조각으로 나눠 물리적으로 떨어진 파티션에 저장한 다음 이를 파티션 테이블로 관리하기 때문입니다.&lt;/p&gt;
&lt;p&gt;대부분의 경우 메모리 파편화를 감내하면서 &lt;code class=&quot;language-text&quot;&gt;마크-스윕&lt;/code&gt;을 사용하다가, 객체 할당에 영향을 줄 만큼 파편화가 심해지면 &lt;code class=&quot;language-text&quot;&gt;마크-컴팩트&lt;/code&gt;를 돌려 연속된 공간을 확보하는 해법도 있습니다.&lt;/p&gt;
&lt;h3 id=&quot;회고-및-마무리&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#%ED%9A%8C%EA%B3%A0-%EB%B0%8F-%EB%A7%88%EB%AC%B4%EB%A6%AC&quot; aria-label=&quot;회고 및 마무리 permalink&quot; class=&quot;heading-anchor before&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;15&quot; height=&quot;15&quot; viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;회고 및 마무리&lt;/h3&gt;
&lt;p&gt;책의 내용이 방대하였기에, 회사 동료분들과 함께 각 챕터별로 담당자를 맡아서 핵심 개념을 요약하여 공유하는 방식을 통해 효율적으로 스터디할 수 있었던 것 같습니다. 또한 &lt;code class=&quot;language-text&quot;&gt;JVM&lt;/code&gt;을 공부하면 공부할수록 이 분야는 논문을 준비하는 대학원 석사 연구생들이 연구해봐도 좋을 것 같다라고 느낄정도로 심오하고도 깊은 내용이 많았습니다. 안드로이드 개발을 하다보면, 필요에 따라 빌드 구성 시 &lt;code class=&quot;language-text&quot;&gt;JVM&lt;/code&gt; 옵션을 설정할 때도 있는데, 이와 관련해서도 그동안 몰랐던 옵션들도 새롭게 알게 되었습니다. 업무를 하면서 &lt;code class=&quot;language-text&quot;&gt;JVM, GC&lt;/code&gt;와 관련하여 더 공부해보고 싶을 때, 이 책을 자주 찾을 것 같습니다.&lt;/p&gt;</content:encoded></item></channel></rss>