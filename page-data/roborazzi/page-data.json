{"componentChunkName":"component---src-templates-post-jsx","path":"/roborazzi/","result":{"data":{"site":{"siteMetadata":{"title":"onseok.blog"}},"markdownRemark":{"id":"032d0d1f-ebb0-5b2e-bf65-6ff7aa77dac8","excerpt":"안드로이드 앱 개발 시 UI 변경사항이 제대로 적용되었는지 확인하는 과정은 필수적입니다. 특히 다양한 화면 크기와 해상도를 지원해야 하는 안드로이드 환경에서는 더욱 중요합니다. 하지만 코드 리뷰만으로는 이러한 UI 변경사항을 정확히 파악하기 어렵고, 특히 팀 규모가 커질수록 의도치 않은 UI 변경을 놓치기 쉽습니다. 최근 저는 회사 프로젝트에서 이 문제를…","html":"<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/ee990989deaf59b34f97eb22e027662c/06341/ui-testing.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD1klEQVR42pVUbUxbZRS+bcEYTVzMwg8z44zO6K/pD7eYzR9LxB9u0SzGbVEGmrhNExMwS8zGCKmRZArVuH8bOjbQWaB0QGkLt5dLSzsoDDpG6TdrO/qxtmsZUraWftz7Pt7ylWWhbjvJk/PmfZ/z5Jw35xyKKmIAJDAYSjaF8EY9qa0IAYUg0WN4oscJiQSI14mC3wmP53PE40cQi33BhUKV8PurYLUeRyr13gqHokTFxMQPnV8TsB/96hja2wBpHUF9LVB/BjjbQKCUAxrVosB5ZYUvlYo3TV3wWwXsIexwEFe7kNH28lHvDFkcHSRLIzqSMtNkacrER4MuktH0AJHIu48ms2Fk0VGH6R8SmDiaIpO/cggE+OUhhtwLuuCMhTARDoEJJXE9ECUJ4S7L9hcEd20qyKWTX8L9GULNh/lR6T8Evc8R3n0OMLC4MnUbki7g2U4eB7qNoLrTRGaJAXo1cnPhPZsK8rf+0oLZilDL0azplw4emi3IqXcTMHJIzRFs07bjfUMDquQDePtcnnxrSgDDGqTn7u4txCsUColUaiix2+3PrP5hsE0D1S74f/8x7/j5EqLNhwk3sJsHQ0Nlb8IpK4UGJ4XTg+VoO7YAVVsSnF5JQDNGBGfqhQyfByylG9mC+CqslxcgO6PLNZ5vzLV8F+HDw577uHYty9hrUX2TwqkbpTjtolDXtQ/sRS/yQ70EVy5hcXhueaQbvmktZ8ne5w5tlJ24g5/67lXit3kJjL7zi1jG1xw9EHX6FWhyvU6a7Nshs+2AzP0yRl1/CyWzcLNprvWbZU73YQtRfhWFuRXIZzL711unNJ51Hrclev4I5U1NhV7M0ur5BZ8bdtsocbtG4PNa4LSOIzTnwANtH67WJNF67AFMe6v59kpPVnkSuD3OK1cFFauz+VBPvsSxA/NzVjM65S1kmOnD9KRR6PMLmBxnkVL3o+NEnHRUeYn2wCCUFbe4zhrAyXL0RtkGg7Sk2XJi/XPLOJaOh6xj6FNcJmNDKjhvGKGS/4mpMRa5ET38ZzUYefMgdAf3YfCdD/LuGh3+TeL7YlPzIs/SkTueGRimbcRsc+C6ywO95SZxeV1I69U5OO7KexRHkrVuCirzx8jQExcLS2VTwVngBdA9EbnFhzIGue06nntVQFk/+EZrgodOAQRwyJy+MKUOVie9vEm2JiYqvnkMQ1PQ6wCzkYeeAc8MIEdrCdTCHPd1L2Wz2Z3I4C2Bu6UQI4VU/L97TvA7MDtbAY/zUwT8nyAe+QixcDnCsXLh7Y2n2o1PsYzFTyy2Ri55BJI1iIsF/gcaAkYM17wijAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='ui testing' title='' src='/static/ee990989deaf59b34f97eb22e027662c/06341/ui-testing.png' srcset='/static/ee990989deaf59b34f97eb22e027662c/e7570/ui-testing.png 170w,\n/static/ee990989deaf59b34f97eb22e027662c/f46e7/ui-testing.png 340w,\n/static/ee990989deaf59b34f97eb22e027662c/06341/ui-testing.png 512w' sizes='(max-width: 512px) 100vw, 512px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>안드로이드 앱 개발 시 UI 변경사항이 제대로 적용되었는지 확인하는 과정은 필수적입니다. 특히 다양한 화면 크기와 해상도를 지원해야 하는 안드로이드 환경에서는 더욱 중요합니다. 하지만 코드 리뷰만으로는 이러한 UI 변경사항을 정확히 파악하기 어렵고, 특히 팀 규모가 커질수록 의도치 않은 UI 변경을 놓치기 쉽습니다.</p>\n<p>최근 저는 회사 프로젝트에서 이 문제를 해결하기 위해 <a href=\"https://github.com/takahirom/roborazzi\">Roborazzi</a>를 활용한 스크린샷 테스트 시스템을 구축했습니다. 이 글에서는 <code class=\"language-text\">Roborazzi</code>의 적용부터, <code class=\"language-text\">GitHub Actions</code>를 활용한 CI 파이프라인 구축까지의 경험을 공유하려고 합니다.</p>\n<h2 id=\"Roborazzi-소개\" style=\"position:relative;\"><a href=\"#Roborazzi-%EC%86%8C%EA%B0%9C\" aria-label=\"Roborazzi 소개 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>Roborazzi 소개</h2>\n<p><a href=\"https://github.com/takahirom/roborazzi\">Roborazzi</a>는 <a href=\"https://robolectric.org/\">Robolectric</a> 기반의 안드로이드 스크린샷 테스트 라이브러리입니다. Robolectric의 Native Graphics Mode(RNG)를 활용하여 JVM 환경에서 실행되는 안드로이드 통합 테스트를 시각화할 수 있게 해줍니다. 아직 Experimental 단계이지만, <a href=\"https://github.com/takahirom/roborazzi?tab=readme-ov-file#experimental-feature-ios-support\">Compose Multiplatform iOS</a>와 <a href=\"https://github.com/takahirom/roborazzi?tab=readme-ov-file#experimental-feature-compose-desktop-support\">Compose Desktop</a>도 실험적으로 지원하고 있습니다.</p>\n<p>Roborazzi의 가장 큰 장점은 실제 기기 없이 JVM 환경에서 스크린샷을 생성하고 비교할 수 있어, CI 환경에서 빠르게 테스트를 실행할 수 있다는 점입니다. 또한 Google의 공식 샘플 프로젝트인 <a href=\"https://github.com/android/nowinandroid/blob/main/core/screenshot-testing/src/main/kotlin/com/google/samples/apps/nowinandroid/core/testing/util/ScreenshotHelper.kt\">Now in Android</a>에도 적용되어 있어 실제 프로덕션 수준의 구현 예시를 찾아볼 수 있습니다.</p>\n<h3 id=\"Paparazzi와-Roborazzi-비교\" style=\"position:relative;\"><a href=\"#Paparazzi%EC%99%80-Roborazzi-%EB%B9%84%EA%B5%90\" aria-label=\"Paparazzi와 Roborazzi 비교 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>Paparazzi와 Roborazzi 비교</h3>\n<p><a href=\"https://github.com/cashapp/paparazzi\">Paparazzi</a>는 JVM 환경에서 디스플레이를 시각화하는 훌륭한 도구이지만, 안드로이드 프레임워크를 모킹하는 Robolectric과는 호환되지 않습니다. Roborazzi는 이 간극을 메워줍니다. Robolectric과 통합되어 Hilt 등의 의존성 주입을 활용한 테스트가 가능하며, 실제 컴포넌트와 상호작용할 수 있습니다. 본질적으로 Roborazzi는 Paparazzi의 기능을 확장하여 Robolectric으로 스크린샷을 캡처함으로써 더 효율적이고 신뢰할 수 있는 테스트 프로세스를 제공합니다.</p>\n<h3 id=\"주요-Gradle-태스크\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-Gradle-%ED%83%9C%EC%8A%A4%ED%81%AC\" aria-label=\"주요 Gradle 태스크 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>주요 Gradle 태스크</h3>\n<p>Roborazzi는 다음과 같은 Gradle 태스크를 제공합니다.</p>\n<table>\n<thead>\n<tr>\n<th>태스크명</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>recordRoborazziDebug</strong></td>\n<td>스크린샷을 캡처하고 저장</td>\n</tr>\n<tr>\n<td><strong>compareRoborazziDebug</strong></td>\n<td>현재 이미지와 저장된 이미지를 비교</td>\n</tr>\n<tr>\n<td><strong>verifyRoborazziDebug</strong></td>\n<td>현재 이미지와 저장된 이미지 간의 차이 검증</td>\n</tr>\n<tr>\n<td><strong>verifyAndRecordRoborazziDebug</strong></td>\n<td>이미지 검증 후 차이가 있으면 새 기준 이미지 기록</td>\n</tr>\n<tr>\n<td><strong>clearRoborazziDebug</strong></td>\n<td>저장된 스크린샷 삭제 (실험적 기능)</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"프로젝트-설정\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%84%A4%EC%A0%95\" aria-label=\"프로젝트 설정 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>프로젝트 설정</h2>\n<h3 id=\"Gradle-설정\" style=\"position:relative;\"><a href=\"#Gradle-%EC%84%A4%EC%A0%95\" aria-label=\"Gradle 설정 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>Gradle 설정</h3>\n<p>먼저 프로젝트 레벨의 <code class=\"language-text\">build.gradle.kts</code>에 Roborazzi 플러그인을 추가합니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// root build.gradle.kts</span>\nplugins <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token function\">id</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"io.github.takahirom.roborazzi\"</span></span><span class=\"token punctuation\">)</span> version <span class=\"token string-literal singleline\"><span class=\"token string\">\"[version]\"</span></span> apply <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>만약, buildScript 블록을 사용할 경우에는 아래와 같이 설정해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// root build.gradle.kts</span>\nbuildscript <span class=\"token punctuation\">{</span>\n  dependencies <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token function\">classpath</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"io.github.takahirom.roborazzi:roborazzi-gradle-plugin:[version]\"</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 모듈 레벨의 <code class=\"language-text\">build.gradle.kts</code>에 다음과 같이 설정합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// module build.gradle.kts</span>\nplugins <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token function\">id</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"io.github.takahirom.roborazzi\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nandroid <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 기존 설정</span>\n    \n    testOptions <span class=\"token punctuation\">{</span>\n        unitTests <span class=\"token punctuation\">{</span>\n            isIncludeAndroidResources <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n            <span class=\"token comment\">// Robolectric의 하드웨어 렌더링 모드 사용</span>\n            all <span class=\"token punctuation\">{</span>\n                it<span class=\"token punctuation\">.</span>systemProperties<span class=\"token punctuation\">[</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"robolectric.pixelCopyRenderMode\"</span></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"hardware\"</span></span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\ndependencies <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Core functions</span>\n    <span class=\"token function\">testImplementation</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"io.github.takahirom.roborazzi:roborazzi:[version]\"</span></span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// Jetpack Compose</span>\n    <span class=\"token function\">testImplementation</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"io.github.takahirom.roborazzi:roborazzi-compose:[version]\"</span></span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// JUnit rules</span>\n    <span class=\"token function\">testImplementation</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"io.github.takahirom.roborazzi:roborazzi-junit-rule:[version]\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Roborazzi 설정</span>\nroborazzi <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 레퍼런스 이미지 저장 경로 설정</span>\n    outputDir<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token function\">file</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"src/test/screenshots\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// 비교 이미지 저장 경로 (Experimental option)</span>\n    compare <span class=\"token punctuation\">{</span>\n        outputDir<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token function\">file</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"build/outputs/screenshots_comparison\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"gradleproperties-추가-설정\" style=\"position:relative;\"><a href=\"#gradleproperties-%EC%B6%94%EA%B0%80-%EC%84%A4%EC%A0%95\" aria-label=\"gradleproperties 추가 설정 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>gradle.properties 추가 설정</h3>\n<p>Roborazzi는 <code class=\"language-text\">gradle.properties</code> 파일에서 다양한 옵션을 설정할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"properties\"><pre class=\"language-properties\"><code class=\"language-properties\"><span class=\"token comment\"># 스크린샷 테스트 활성화 옵션</span>\n<span class=\"token key attr-name\">roborazzi.test.record</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">true</span>\n<span class=\"token comment\"># roborazzi.test.compare=true</span>\n<span class=\"token comment\"># roborazzi.test.verify=true</span>\n\n<span class=\"token comment\"># 이미지 리사이즈 스케일 설정</span>\n<span class=\"token key attr-name\">roborazzi.record.resizeScale</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">0.5</span>\n\n<span class=\"token comment\"># 파일 경로 전략 설정</span>\n<span class=\"token comment\"># 기본값은 relativePathFromCurrentDirectory</span>\n<span class=\"token key attr-name\">roborazzi.record.filePathStrategy</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">relativePathFromRoborazziContextOutputDirectory</span>\n\n<span class=\"token comment\"># 이미지 포맷 설정 (WebP 지원, Experimental)</span>\n<span class=\"token comment\"># roborazzi.record.image.extension=webp</span>\n\n<span class=\"token comment\"># 오래된 스크린샷 자동 정리 (주의 필요)</span>\n<span class=\"token comment\"># roborazzi.cleanupOldScreenshots=true</span></code></pre></div>\n<h2 id=\"스크린샷-테스트-작성\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%9E%91%EC%84%B1\" aria-label=\"스크린샷 테스트 작성 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>스크린샷 테스트 작성</h2>\n<p>이제 실제 스크린샷 테스트를 작성해보겠습니다. <code class=\"language-text\">Roborazzi</code>는 다양한 방식의 스크린샷 캡처를 지원하며, 주요 API는 다음과 같습니다.</p>\n<table>\n<thead>\n<tr>\n<th>캡처 대상</th>\n<th>코드 예시</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Jetpack Compose</strong></td>\n<td><code class=\"language-text\">composeTestRule.onNodeWithTag(\"AddBoxButton\").captureRoboImage()</code></td>\n</tr>\n<tr>\n<td><strong>Espresso View</strong></td>\n<td><code class=\"language-text\">onView(ViewMatchers.isRoot()).captureRoboImage()</code></td>\n</tr>\n<tr>\n<td><strong>일반 View</strong></td>\n<td><code class=\"language-text\">view.captureRoboImage()</code></td>\n</tr>\n<tr>\n<td><strong>Compose 람다</strong></td>\n<td><code class=\"language-text\">captureRoboImage { Text(\"Hello Compose!\") }</code></td>\n</tr>\n<tr>\n<td><strong>전체 화면 (Experimental)</strong></td>\n<td><code class=\"language-text\">captureScreenRoboImage()</code></td>\n</tr>\n<tr>\n<td><strong>Bitmap</strong></td>\n<td><code class=\"language-text\">bitmap.captureRoboImage()</code></td>\n</tr>\n</tbody>\n</table>\n<p>다음은 Jetpack Compose 기반 로그인 화면의 스크린샷 테스트 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@RunWith</span><span class=\"token punctuation\">(</span>RobolectricTestRunner<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation builtin\">@GraphicsMode</span><span class=\"token punctuation\">(</span>GraphicsMode<span class=\"token punctuation\">.</span>Mode<span class=\"token punctuation\">.</span>NATIVE<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Robolectric Native Graphics 모드 활성화 (필수)</span>\n<span class=\"token keyword\">class</span> LoginScreenshotTest <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation builtin\">@get:Rule</span>\n    <span class=\"token keyword\">val</span> composeTestRule <span class=\"token operator\">=</span> <span class=\"token function\">createComposeRule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    \n    <span class=\"token annotation builtin\">@Test</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">captureLoginScreen_defaultState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 컴포즈 UI 설정</span>\n        composeTestRule<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span> <span class=\"token punctuation\">{</span>\n            MyAppTheme <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">LoginScreen</span><span class=\"token punctuation\">(</span>\n                    uiState <span class=\"token operator\">=</span> LoginUiState<span class=\"token punctuation\">.</span>Default<span class=\"token punctuation\">,</span>\n                    onLoginClick <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                    onEmailChanged <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                    onPasswordChanged <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token comment\">// 스크린샷 캡처</span>\n        composeTestRule<span class=\"token punctuation\">.</span><span class=\"token function\">onRoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">captureRoboImage</span><span class=\"token punctuation\">(</span>\n                <span class=\"token comment\">// 파일명 지정 (기본 출력 디렉토리에 저장됨)</span>\n                <span class=\"token string-literal singleline\"><span class=\"token string\">\"loginScreen_defaultState\"</span></span><span class=\"token punctuation\">,</span>\n                <span class=\"token comment\">// 추가 옵션 설정</span>\n                roborazziOptions <span class=\"token operator\">=</span> <span class=\"token function\">RoborazziOptions</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token comment\">// 이미지 리사이징</span>\n                    recordOptions <span class=\"token operator\">=</span> RoborazziOptions<span class=\"token punctuation\">.</span><span class=\"token function\">RecordOptions</span><span class=\"token punctuation\">(</span>\n                        resizeScale <span class=\"token operator\">=</span> <span class=\"token number\">0.75f</span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token comment\">// 비교 옵션</span>\n                    compareOptions <span class=\"token operator\">=</span> RoborazziOptions<span class=\"token punctuation\">.</span><span class=\"token function\">CompareOptions</span><span class=\"token punctuation\">(</span>\n                        changeThreshold <span class=\"token operator\">=</span> <span class=\"token number\">0.01f</span>\n                    <span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token annotation builtin\">@Test</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">captureLoginScreen_errorState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        composeTestRule<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span> <span class=\"token punctuation\">{</span>\n            MyAppTheme <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">LoginScreen</span><span class=\"token punctuation\">(</span>\n                    uiState <span class=\"token operator\">=</span> LoginUiState<span class=\"token punctuation\">.</span><span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Invalid credentials\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    onLoginClick <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                    onEmailChanged <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                    onPasswordChanged <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token comment\">// 특정 컴포넌트만 캡처할 수도 있음</span>\n        composeTestRule<span class=\"token punctuation\">.</span><span class=\"token function\">onNodeWithTag</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"errorMessage\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">captureRoboImage</span><span class=\"token punctuation\">(</span>\n                <span class=\"token string-literal singleline\"><span class=\"token string\">\"loginScreen_errorMessage\"</span></span>\n            <span class=\"token punctuation\">)</span>\n        \n        <span class=\"token comment\">// 전체 화면 캡처</span>\n        composeTestRule<span class=\"token punctuation\">.</span><span class=\"token function\">onRoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">captureRoboImage</span><span class=\"token punctuation\">(</span>\n                <span class=\"token string-literal singleline\"><span class=\"token string\">\"loginScreen_errorState\"</span></span>\n            <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"RoborazziRule-활용\" style=\"position:relative;\"><a href=\"#RoborazziRule-%ED%99%9C%EC%9A%A9\" aria-label=\"RoborazziRule 활용 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>RoborazziRule 활용</h3>\n<p>Roborazzi는 JUnit 규칙을 통해 더 편리한 테스트 작성을 지원합니다. <code class=\"language-text\">RoborazziRule</code>은 선택적이지만, 다음과 같은 이점을 제공합니다.</p>\n<ol>\n<li><code class=\"language-text\">RoborazziOptions</code>, <code class=\"language-text\">outputDirectoryPath</code> 등의 컨텍스트 제공</li>\n<li>다양한 캡처 유형 설정 (LastImage, AllImage, Gif 등)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@RunWith</span><span class=\"token punctuation\">(</span>RobolectricTestRunner<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation builtin\">@GraphicsMode</span><span class=\"token punctuation\">(</span>GraphicsMode<span class=\"token punctuation\">.</span>Mode<span class=\"token punctuation\">.</span>NATIVE<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> RuleTest <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation builtin\">@get:Rule</span>\n    <span class=\"token keyword\">val</span> composeTestRule <span class=\"token operator\">=</span> <span class=\"token function\">createComposeRule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    \n    <span class=\"token annotation builtin\">@get:Rule</span>\n    <span class=\"token keyword\">val</span> roborazziRule <span class=\"token operator\">=</span> <span class=\"token function\">RoborazziRule</span><span class=\"token punctuation\">(</span>\n        composeRule <span class=\"token operator\">=</span> composeTestRule<span class=\"token punctuation\">,</span>\n        captureRoot <span class=\"token operator\">=</span> composeTestRule<span class=\"token punctuation\">.</span><span class=\"token function\">onRoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        options <span class=\"token operator\">=</span> RoborazziRule<span class=\"token punctuation\">.</span><span class=\"token function\">Options</span><span class=\"token punctuation\">(</span>\n            <span class=\"token comment\">// 테스트 실패 시에만 이미지 캡처</span>\n            captureType <span class=\"token operator\">=</span> RoborazziRule<span class=\"token punctuation\">.</span>CaptureType<span class=\"token punctuation\">.</span><span class=\"token function\">Gif</span><span class=\"token punctuation\">(</span>onlyFail <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token comment\">// 이미지 비교 옵션 설정</span>\n            roborazziOptions <span class=\"token operator\">=</span> <span class=\"token function\">RoborazziOptions</span><span class=\"token punctuation\">(</span>\n                compareOptions <span class=\"token operator\">=</span> RoborazziOptions<span class=\"token punctuation\">.</span><span class=\"token function\">CompareOptions</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token comment\">// 안티앨리어싱 문제 해결을 위한 설정</span>\n                    imageComparator <span class=\"token operator\">=</span> <span class=\"token function\">SimpleImageComparator</span><span class=\"token punctuation\">(</span>\n                        maxDistance <span class=\"token operator\">=</span> <span class=\"token number\">0.007f</span><span class=\"token punctuation\">,</span>\n                        vShift <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>    <span class=\"token comment\">// 수직 이동 허용</span>\n                        hShift <span class=\"token operator\">=</span> <span class=\"token number\">2</span>     <span class=\"token comment\">// 수평 이동 허용</span>\n                    <span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n    \n    <span class=\"token annotation builtin\">@Test</span>\n    <span class=\"token comment\">// RoborazziRule 무시 어노테이션</span>\n    <span class=\"token comment\">// @RoborazziRule.Ignore</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">testWithRule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        composeTestRule<span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span> <span class=\"token punctuation\">{</span>\n            MyAppTheme <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// ...</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token comment\">// RoborazziRule이 테스트 실행 과정에서 자동으로 이미지 캡처</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"GIF-이미지-캡처\" style=\"position:relative;\"><a href=\"#GIF-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%BA%A1%EC%B2%98\" aria-label=\"GIF 이미지 캡처 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>GIF 이미지 캡처</h3>\n<p>Roborazzi는 애니메이션이나 사용자 상호작용을 보여주는 GIF 이미지 생성도 지원합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Test</span>\n<span class=\"token keyword\">fun</span> <span class=\"token function\">captureRoboGifSample</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">onView</span><span class=\"token punctuation\">(</span>ViewMatchers<span class=\"token punctuation\">.</span><span class=\"token function\">isRoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">captureRoboGif</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"build/test.gif\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// 앱 실행</span>\n            ActivityScenario<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span>MainActivity<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">)</span>\n            <span class=\"token comment\">// 다음 페이지로 이동</span>\n            <span class=\"token function\">onView</span><span class=\"token punctuation\">(</span><span class=\"token function\">withId</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>button_first<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token comment\">// 뒤로 가기</span>\n            <span class=\"token function\">pressBack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token comment\">// 다시 다음 페이지로 이동</span>\n            <span class=\"token function\">onView</span><span class=\"token punctuation\">(</span><span class=\"token function\">withId</span><span class=\"token punctuation\">(</span>R<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">.</span>button_first<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"다양한-디바이스-설정-테스트\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%96%91%ED%95%9C-%EB%94%94%EB%B0%94%EC%9D%B4%EC%8A%A4-%EC%84%A4%EC%A0%95-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"다양한 디바이스 설정 테스트 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>다양한 디바이스 설정 테스트</h3>\n<p>실제 사용 환경을 더 잘 반영하기 위해 다양한 디바이스 설정(화면 크기, 방향, 다크 모드 등)에서 스크린샷을 캡처하는 것이 좋습니다. Roborazzi는 <code class=\"language-text\">RobolectricDeviceQualifiers</code>를 통해 미리 정의된 디바이스 설정을 제공합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// 클래스 레벨에서 기본 디바이스 설정</span>\n<span class=\"token annotation builtin\">@RunWith</span><span class=\"token punctuation\">(</span>RobolectricTestRunner<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation builtin\">@GraphicsMode</span><span class=\"token punctuation\">(</span>GraphicsMode<span class=\"token punctuation\">.</span>Mode<span class=\"token punctuation\">.</span>NATIVE<span class=\"token punctuation\">)</span>\n<span class=\"token annotation builtin\">@Config</span><span class=\"token punctuation\">(</span>qualifiers <span class=\"token operator\">=</span> RobolectricDeviceQualifiers<span class=\"token punctuation\">.</span>Pixel5<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> DeviceSpecificScreenshotTest <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 특정 테스트 메서드에만 다른 설정 적용</span>\n<span class=\"token annotation builtin\">@Test</span>\n<span class=\"token annotation builtin\">@Config</span><span class=\"token punctuation\">(</span>qualifiers <span class=\"token operator\">=</span> RobolectricDeviceQualifiers<span class=\"token punctuation\">.</span>MediumTablet <span class=\"token operator\">+</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"+land\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">fun</span> <span class=\"token function\">captureLoginScreen_landscapeTablet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 다크 모드 설정</span>\n<span class=\"token annotation builtin\">@Test</span>\n<span class=\"token annotation builtin\">@Config</span><span class=\"token punctuation\">(</span>qualifiers <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"+night\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">fun</span> <span class=\"token function\">captureLoginScreen_darkMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 로케일 설정</span>\n<span class=\"token annotation builtin\">@Test</span>\n<span class=\"token annotation builtin\">@Config</span><span class=\"token punctuation\">(</span>qualifiers <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"+ja\"</span></span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// 일본어 로케일</span>\n<span class=\"token keyword\">fun</span> <span class=\"token function\">captureLoginScreen_japaneseLocale</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"운영체제별-렌더링-차이\" style=\"position:relative;\"><a href=\"#%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EB%B3%84-%EB%A0%8C%EB%8D%94%EB%A7%81-%EC%B0%A8%EC%9D%B4\" aria-label=\"운영체제별 렌더링 차이 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>운영체제별 렌더링 차이</h2>\n<p>다만, Roborazzi를 사용하면서 몇 가지 주의할 점들이 있습니다.</p>\n<h3 id=\"1-OS별-렌더링-불일치-문제\" style=\"position:relative;\"><a href=\"#1-OS%EB%B3%84-%EB%A0%8C%EB%8D%94%EB%A7%81-%EB%B6%88%EC%9D%BC%EC%B9%98-%EB%AC%B8%EC%A0%9C\" aria-label=\"1 OS별 렌더링 불일치 문제 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1. OS별 렌더링 불일치 문제</h3>\n<p>Roborazzi는 <a href=\"https://skia.org/\">Skia</a> 라이브러리를 사용하여 UI를 렌더링하는데, 이 렌더링 결과는 운영체제마다 약간씩 다를 수 있습니다. 이는 <a href=\"https://github.com/takahirom/roborazzi?tab=readme-ov-file#q-why-do-my-screenshot-tests-fail-inconsistently-across-different-operating-systems-like-macos-ubuntu-and-windows\">FAQ - Why do my screenshot tests fail inconsistently across different operating systems like MacOS, Ubuntu, and Windows?</a>에서도 언급된 노운 이슈입니다.</p>\n<p>이 문제는 Now in Android 프로젝트에서도 <a href=\"https://github.com/android/nowinandroid/issues/1242#issuecomment-2032962982\">논의된 바 있으며</a>, 모든 환경에서 동일한 렌더링을 보장할 수 없다는 점이 확인되었습니다.  참고로 이러한 이유로 저의 로컬 PC(Mac)에서도 스크린샷 검증 태스크를 수행하면 실패하였습니다. 주요 원인은 다음과 같습니다.</p>\n<ul>\n<li>각 OS의 그래픽 드라이버 구현 차이</li>\n<li>폰트 렌더링 방식의 차이</li>\n<li>안티앨리어싱 처리 방식의 차이</li>\n</ul>\n<p>이 문제를 해결하기 위해 <code class=\"language-text\">RoborazziOptions.CompareOptions</code>의 옵션들을 변경해주어도 되겠지만, 저는 이렇게 조금씩 검증 조건을 완화해주다보면 스크린샷을 비교하는 의미가 없어진다는 생각이 들었습니다. 그래서 Roborazzi의 저자인 <a href=\"https://github.com/takahirom\">takahirom</a>님의 의견에 따라 일관성을 위해 기준 이미지 생성과 검증을 모두 동일한 CI 환경에서 수행하도록 구성하였습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/6a5924b5e21b5f68f8d37a7c9a211ce5/be2fd/now-in-android-roborazzi-compare-options.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 32.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQ0lEQVR42n1Rt04FMRB89QsXfHf25exLL94LiCcBBRIFoQFRIf6FitTxx8OeJaCjGO2O157ZXY987qFKO9TygCpbopNbFAPPV5DE4yCHpmmY6gwzUxD4vxhNDQeeX6Cujig2D+gOT5D9I8r+Hqw4B8vPwMoLmGGHsW5iojsYa5bCRLcVpgaBohIcXCfkrosC+c07ytsPyLtP5NdvCC9fkF29Ev9CfXwGYxyCOnbDDEEiKU9VbokQlp9BY2IQ5OTAoVsCi3WP9XaPZr5UiKIEedahkRu07R5td4I4bVA2S2RyjqwiyBbCT+DSuWF7P4KOIjldWO9O0a32Ko/jCpJ2Wlc7lOUGsu6Rlo2qFc0CrheD0bqcsMB4Zv7tkPGAOnRhuxF4kICT4zCGaXmweQxHpCpaTgSHRIY6p3EtemfyiBD8fso32zSkgc9WczgAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='now in android roborazzi compare options' title='' src='/static/6a5924b5e21b5f68f8d37a7c9a211ce5/ca1dc/now-in-android-roborazzi-compare-options.png' srcset='/static/6a5924b5e21b5f68f8d37a7c9a211ce5/e7570/now-in-android-roborazzi-compare-options.png 170w,\n/static/6a5924b5e21b5f68f8d37a7c9a211ce5/f46e7/now-in-android-roborazzi-compare-options.png 340w,\n/static/6a5924b5e21b5f68f8d37a7c9a211ce5/ca1dc/now-in-android-roborazzi-compare-options.png 680w,\n/static/6a5924b5e21b5f68f8d37a7c9a211ce5/be2fd/now-in-android-roborazzi-compare-options.png 952w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<blockquote>\n<p>실제로 <a href=\"https://github.com/android/nowinandroid/blob/main/core/screenshot-testing/src/main/kotlin/com/google/samples/apps/nowinandroid/core/testing/util/ScreenshotHelper.kt\">nowinandroid</a>에서도 이미지 비교 옵션에 대해서는 타협하지 않은 점을 확인할 수 있습니다. </p>\n</blockquote>\n<h3 id=\"2-메모리-문제-해결\" style=\"position:relative;\"><a href=\"#2-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0\" aria-label=\"2 메모리 문제 해결 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>2. 메모리 문제 해결</h3>\n<p>복잡한 UI에서 많은 스크린샷 테스트를 실행할 경우 <code class=\"language-text\">OutOfMemoryError</code>가 발생할 수 있습니다. 이는 <a href=\"https://github.com/takahirom/roborazzi/issues/272\">Issue #272</a>에서도 논의된 문제로, 다음과 같이 <code class=\"language-text\">maxHeapSize</code>를 조정하여 해결할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// build.gradle.kts</span>\nandroid <span class=\"token punctuation\">{</span>\n    testOptions <span class=\"token punctuation\">{</span>\n        unitTests<span class=\"token punctuation\">.</span><span class=\"token function\">all</span> <span class=\"token punctuation\">{</span>\n            maxHeapSize <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"4096m\"</span></span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"3-깨진-이미지-문제-해결\" style=\"position:relative;\"><a href=\"#3-%EA%B9%A8%EC%A7%84-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0\" aria-label=\"3 깨진 이미지 문제 해결 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>3. 깨진 이미지 문제 해결</h3>\n<p>일부 경우에 Roborazzi로 캡처한 이미지가 깨져 보일 수 있습니다. 이는 주로 API 레벨이 너무 낮거나 Robolectric의 렌더링 모드 설정 문제일 수 있습니다. <a href=\"https://github.com/takahirom/roborazzi/issues/255#issuecomment-1972838571\">Issue #255</a>에서 논의된 것처럼, 다음과 같은 설정으로 해결할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// 테스트 클래스에 적용</span>\n<span class=\"token annotation builtin\">@Config</span><span class=\"token punctuation\">(</span>sdk <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">35</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// 최신 API 레벨 사용</span>\n<span class=\"token annotation builtin\">@GraphicsMode</span><span class=\"token punctuation\">(</span>GraphicsMode<span class=\"token punctuation\">.</span>Mode<span class=\"token punctuation\">.</span>NATIVE<span class=\"token punctuation\">)</span>  <span class=\"token comment\">// Native Graphics 모드 필수</span>\n\n<span class=\"token comment\">// build.gradle.kts</span>\nandroid <span class=\"token punctuation\">{</span>\n    testOptions <span class=\"token punctuation\">{</span>\n        unitTests<span class=\"token punctuation\">.</span><span class=\"token function\">all</span> <span class=\"token punctuation\">{</span>\n            it<span class=\"token punctuation\">.</span>systemProperties<span class=\"token punctuation\">[</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"robolectric.pixelCopyRenderMode\"</span></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"hardware\"</span></span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이러한 설정을 통해 대부분의 렌더링 문제를 해결할 수 있었습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/47f62cea7df9a0f17684f59f737e42f0/f766a/robolectric-4.1.4.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 28.235294117647058%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBklEQVR42o2RS1OEMBCEc9aFBZLAAsubgICurKXlo/SwZZWe/P8/p52JsHr08NV0kkpPTyLeP7/wdvrA0+sJ8/0zjg8vcHwNx1PYePrfOH5oEf10RDscUJkJeXOFrDLwwgx+bCDjCjrOoXYZdFJARnv4OkG4aDeI7BlzNtx4LCKs1eWDIMFW53BlSgYpArr8Y5bCUzHpzBpv5Q5BmFrYnBFlO2BfGhTNgNKMpDtKOyKvO9TdBEUJLxyJS1edR/s74i+RRRgal2n6a1u78dZWfgY2ZF1QU17zqKsZp3GYpcGKqOhSTWacihOa4cbqZtlbmzE8TbmY8+cZat5PMw53j5hpnRYtvgF2259qX0IZJwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='robolectric 4 1 4' title='' src='/static/47f62cea7df9a0f17684f59f737e42f0/ca1dc/robolectric-4.1.4.png' srcset='/static/47f62cea7df9a0f17684f59f737e42f0/e7570/robolectric-4.1.4.png 170w,\n/static/47f62cea7df9a0f17684f59f737e42f0/f46e7/robolectric-4.1.4.png 340w,\n/static/47f62cea7df9a0f17684f59f737e42f0/ca1dc/robolectric-4.1.4.png 680w,\n/static/47f62cea7df9a0f17684f59f737e42f0/02d09/robolectric-4.1.4.png 1020w,\n/static/47f62cea7df9a0f17684f59f737e42f0/9d567/robolectric-4.1.4.png 1360w,\n/static/47f62cea7df9a0f17684f59f737e42f0/f766a/robolectric-4.1.4.png 1808w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<blockquote>\n<p>참고로 <a href=\"https://github.com/robolectric/robolectric/releases/tag/robolectric-4.14\">Robolectric 4.14</a> 버전부터 Android V(SDK 35)를 지원합니다.</p>\n</blockquote>\n<h2 id=\"CI-파이프라인-구축\" style=\"position:relative;\"><a href=\"#CI-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8-%EA%B5%AC%EC%B6%95\" aria-label=\"CI 파이프라인 구축 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>CI 파이프라인 구축</h2>\n<p>테스트를 작성한 후, 이를 CI 파이프라인에 통합하는 것이 중요합니다. 저는 GitHub Actions를 활용하여 PR이 생성될 때마다 스크린샷 테스트를 자동으로 실행하고, 변경사항이 있을 경우 시각적으로 표시하는 시스템을 구축했습니다.</p>\n<h3 id=\"GitHub-Actions-워크플로우-구성\" style=\"position:relative;\"><a href=\"#GitHub-Actions-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EA%B5%AC%EC%84%B1\" aria-label=\"GitHub Actions 워크플로우 구성 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>GitHub Actions 워크플로우 구성</h3>\n<p>다음은 GitHub Actions를 사용한 워크플로우 설정 예시입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Android Pull Request CI\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> main<span class=\"token punctuation\">,</span> develop <span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">verify-screenshots</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    \n    <span class=\"token key atrule\">permissions</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">checks</span><span class=\"token punctuation\">:</span> write\n      <span class=\"token key atrule\">pull-requests</span><span class=\"token punctuation\">:</span> write\n      <span class=\"token key atrule\">contents</span><span class=\"token punctuation\">:</span> write\n      \n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout the code\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v4\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">fetch-depth</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n        \n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set up JDK\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>java@v4\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">distribution</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'temurin'</span>\n          <span class=\"token key atrule\">java-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'17'</span>\n          <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'gradle'</span>\n          \n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set up Android SDK\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> android<span class=\"token punctuation\">-</span>actions/setup<span class=\"token punctuation\">-</span>android@v3\n        \n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Grant execute permission for gradlew\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> chmod +x gradlew\n        \n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run ktlint\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> ./gradlew ktlintCheck\n        \n      <span class=\"token comment\"># 스크린샷 검증 단계</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Verify Roborazzi Screenshots\n        <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> screenshotsverify\n        <span class=\"token key atrule\">continue-on-error</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> ./gradlew verifyRoborazziDebug\n        \n      <span class=\"token comment\"># 검증 실패 시 새 스크린샷 생성</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Generate new screenshots if verification failed\n        <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> screenshotsrecord\n        <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> steps.screenshotsverify.outcome == 'failure'\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> ./gradlew recordRoborazziDebug\n        \n      <span class=\"token comment\"># 브랜치명에서 JIRA 티켓 추출 (회사 상황에 맞게 조정)</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Extract JIRA ticket\n        <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> extract_ticket\n        <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> steps.screenshotsrecord.outcome == 'success'\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          BRANCH_NAME=$(echo ${{ github.head_ref }})\n          echo \"branch_name=$BRANCH_NAME\" >> $GITHUB_OUTPUT</span>\n          \n          if <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> $BRANCH_NAME =~ (TICKET<span class=\"token punctuation\">-</span><span class=\"token punctuation\">[</span>0<span class=\"token punctuation\">-</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span>+) <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>; then\n            TICKET=\"$<span class=\"token punctuation\">{</span>BASH_REMATCH<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\"\n            echo \"ticket=$TICKET\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $GITHUB_OUTPUT\n            <span class=\"token key atrule\">echo \"Found JIRA ticket</span><span class=\"token punctuation\">:</span> $TICKET\"\n          else\n            echo \"ticket=NO<span class=\"token punctuation\">-</span>TICKET\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $GITHUB_OUTPUT\n            echo \"No JIRA ticket found in branch name\"\n          fi\n          \n      <span class=\"token comment\"># 새 스크린샷 커밋</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Push new screenshots if available\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> stefanzweifel/git<span class=\"token punctuation\">-</span>auto<span class=\"token punctuation\">-</span>commit<span class=\"token punctuation\">-</span>action@v5\n        <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> steps.screenshotsrecord.outcome == 'success'\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">file_pattern</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'**/*.png'</span>\n          <span class=\"token key atrule\">disable_globbing</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n          <span class=\"token key atrule\">commit_message</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"${{ steps.extract_ticket.outputs.ticket != 'NO-TICKET' &amp;&amp; format('{0} feat: 스크린샷 업데이트', steps.extract_ticket.outputs.ticket) || 'NO-TICKET feat: 스크린샷 업데이트' }}\"</span>\n          \n      <span class=\"token comment\"># 비교 이미지 수집</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Copy screenshot comparison files\n        <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> copy_screenshots\n        <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> steps.screenshotsverify.outcome == 'failure'\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          mkdir -p /tmp/screenshot-diff</span>\n          \n          cd $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github.workspace <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          find . <span class=\"token punctuation\">-</span>name \"<span class=\"token important\">*_compare.png\"</span> <span class=\"token punctuation\">-</span>exec cp <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> /tmp/screenshot<span class=\"token punctuation\">-</span>diff/ \\;\n          \n          if <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">-</span>z \"$(find /tmp/screenshot<span class=\"token punctuation\">-</span>diff <span class=\"token punctuation\">-</span>type f <span class=\"token punctuation\">-</span>name '<span class=\"token important\">*.png')\"</span> <span class=\"token punctuation\">]</span>; then\n            echo \"No screenshot files found\"\n            echo \"has_images=false\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $GITHUB_OUTPUT\n          else\n            echo \"Found screenshot comparison images<span class=\"token punctuation\">:</span>\"\n            ls <span class=\"token punctuation\">-</span>la /tmp/screenshot<span class=\"token punctuation\">-</span>diff\n            echo \"has_images=true\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $GITHUB_OUTPUT\n          fi\n          \n      <span class=\"token comment\"># Companion Branch 생성</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Create companion branch for screenshot comparison\n        <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> companion_branch\n        <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> steps.copy_screenshots.outputs.has_images == 'true'\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          BRANCH_NAME=\"screenshot-compare-${{ github.event.pull_request.number }}\"\n          echo \"branch_name=$BRANCH_NAME\" >> $GITHUB_OUTPUT</span>\n          \n          git config <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>global user.name \"GitHub Actions\"\n          git config <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>global user.email \"actions@github.com\"\n          \n          git stash <span class=\"token punctuation\">-</span>u <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> true\n          \n          git branch <span class=\"token punctuation\">-</span>D \"$BRANCH_NAME\" <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> true\n          git checkout <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>orphan \"$BRANCH_NAME\"\n          git rm <span class=\"token punctuation\">-</span>rf .\n          \n          mkdir <span class=\"token punctuation\">-</span>p screenshot<span class=\"token punctuation\">-</span>diff\n          \n          cp /tmp/screenshot<span class=\"token punctuation\">-</span>diff/<span class=\"token important\">*.png</span> screenshot<span class=\"token punctuation\">-</span>diff/\n          \n          git add screenshot<span class=\"token punctuation\">-</span>diff\n          git commit <span class=\"token punctuation\">-</span>m \"Add screenshot comparison results\"\n          git push origin \"$BRANCH_NAME\" <span class=\"token punctuation\">-</span>f\n          \n          echo \"companion_push_success=echo \"companion_push_success=true\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $GITHUB_OUTPUT\n\n          git checkout <span class=\"token punctuation\">-</span>f $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github.head_ref <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">|</span><span class=\"token punctuation\">|</span> git checkout <span class=\"token punctuation\">-</span>f HEAD\n          \n      <span class=\"token comment\"># 마크다운 리포트 생성</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Generate markdown report for screenshot diffs\n        <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> generate_report\n        <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> steps.companion_branch.outputs.companion_push_success == 'true'\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          REPORT=\"## 📸 스크린샷 비교 결과\\n\\n\"\n          REPORT+=\"| 화면 이름 | 비교 이미지 |\\n\"\n          REPORT+=\"|:--------:|:----------:|\\n\"</span>\n          \n          BRANCH_NAME=\"$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> steps.companion_branch.outputs.branch_name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\"\n          \n          for FILE in /tmp/screenshot<span class=\"token punctuation\">-</span>diff/<span class=\"token important\">*.png;</span> do\n            FILENAME=$(basename \"$FILE\")\n            SCREENNAME=$<span class=\"token punctuation\">{</span>FILENAME%_compare.png<span class=\"token punctuation\">}</span>\n          \n            IMG_URL=\"https<span class=\"token punctuation\">:</span>//github.com/$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github.repository <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>/blob/$BRANCH_NAME/screenshot<span class=\"token punctuation\">-</span>diff/$FILENAME<span class=\"token punctuation\">?</span>raw=true\"\n          \n            REPORT+=\"<span class=\"token punctuation\">|</span> \\`$SCREENNAME\\` <span class=\"token punctuation\">|</span> <span class=\"token tag\">!</span><span class=\"token punctuation\">[</span>Screenshot<span class=\"token punctuation\">]</span>($IMG_URL) <span class=\"token punctuation\">|</span>\\n\"\n          done\n          \n          EOF=$(dd if=/dev/urandom bs=15 count=1 status=none <span class=\"token punctuation\">|</span> base64)\n          echo \"report&lt;&lt;$EOF\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $GITHUB_OUTPUT\n          echo <span class=\"token punctuation\">-</span>e \"$REPORT\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $GITHUB_OUTPUT\n          echo \"$EOF\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $GITHUB_OUTPUT\n          \n          echo \"found_images=true\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $GITHUB_OUTPUT\n          \n      <span class=\"token comment\"># 기존 PR 코멘트 찾기</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Find existing comment\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peter<span class=\"token punctuation\">-</span>evans/find<span class=\"token punctuation\">-</span>comment@v3\n        <span class=\"token key atrule\">id</span><span class=\"token punctuation\">:</span> find_comment\n        <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> steps.generate_report.outputs.found_images == 'true'\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">issue-number</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github.event.pull_request.number <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">comment-author</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'github-actions[bot]'</span>\n          <span class=\"token key atrule\">body-includes</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'## 📸 스크린샷 비교 결과'</span>\n          \n      <span class=\"token comment\"># PR 코멘트 생성 또는 업데이트</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Create or update comment with comparison results\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> peter<span class=\"token punctuation\">-</span>evans/create<span class=\"token punctuation\">-</span>or<span class=\"token punctuation\">-</span>update<span class=\"token punctuation\">-</span>comment@v4\n        <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> steps.generate_report.outputs.found_images == 'true'\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">comment-id</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> steps.find_comment.outputs.comment<span class=\"token punctuation\">-</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">issue-number</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github.event.pull_request.number <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">body</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> steps.generate_report.outputs.report <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">edit-mode</span><span class=\"token punctuation\">:</span> replace\n          \n      <span class=\"token comment\"># 단위 테스트 실행</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run unit tests\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> ./gradlew testDebugUnitTest <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>stacktrace</code></pre></div>\n<p>위 과정에 성공하면 다음과 같이 정상적으로 코멘트가 생성되는 것을 확인할 수 있습니다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/9ae60c4bda5d7505e098d4adbed5ef27/c807c/github-pr-comment-sample.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 71.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC2UlEQVR42oWTW0hUURSGD2rjOHOcOZc5c2bO3M4Mc3G0cRwdAyshKAItoknsQkQF9RCBCAUFgQRSWJr1EHirnkQSDCJIfPDN3nroMtmDhreKNAuhR334W/uMYw0Vbfg5a6+99rfXXnsdLl5VjXgihXBlChGSR49BC0S35PSE4HDr/5WiBSG7AuBk1QPNFwQDp3bsRk39LiTTOw07mW6AoGiwO9x/SJDdEEUVIvs6PYYEhwbOalfACwpE2sicElskOxitgjcYBS86YZNdBbJLTpgpzhbbDhMlVGzisa3MDpukgiunDXYWSBMGttodhhhUoEyYzfwsjmXlJFAp6YyoYMzCozsWx/mLbTh99hxc3mAhkMnIlF2TfAyYn+fXVbI5lw8DVhvAcfhcn8bzyUmMPh5FIBTLAdk1ueIyXKCTFpc+4s3bLN5NvzeUzU5jdvYDDmVaUVTKQyMYA/ZtAueSSYyMPcHgwAB8euQ3YJEZbe2Xsba2hrm5eSwuLmGBaX4By8srONJ6AkUm6xawn88BvzU2YnpmBi+mphCMVOaANomuTF9WL4tN/qt4WmMxquImoBeDm8D1piaw8X11FZGKxK8aik4vtYP2TwmKx4hR3X5Y3AG0yCp6Si3oSNTg6vVOtF+6As0fZkCFgPR6vggEZwBWUQMveQrEfKKqQ/VH4aNmtwTj6BUcWKcMXyaqcbevD123uuEPVeSA7DUll450wx5kWk/iwOGjOJg5lhPZzJeobTBiAvQnmUNxPLBLxpU/1dXh2cQERkZGoIcr84/ihYl3oH/okVGPjY0N5EfevtbRiRKLjBDBzJTh0CZwqbYWT8fHMTw8/Ato9JnDi5bjp3Dn3n103ryNG109hpjdS779zRmUU4yuVxgZPhTk3KM0NxsHrq58Rawqla+hC6ovDKukodgiocQqF4j52IEq1dnnj6CMMuyRFPxgfbh3Hxa+rODV6ywi8SR+AvKu4f6frOyxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='(화면이름은 보안상 흰색박스로 가렸습니다.)' title='' src='/static/9ae60c4bda5d7505e098d4adbed5ef27/ca1dc/github-pr-comment-sample.png' srcset='/static/9ae60c4bda5d7505e098d4adbed5ef27/e7570/github-pr-comment-sample.png 170w,\n/static/9ae60c4bda5d7505e098d4adbed5ef27/f46e7/github-pr-comment-sample.png 340w,\n/static/9ae60c4bda5d7505e098d4adbed5ef27/ca1dc/github-pr-comment-sample.png 680w,\n/static/9ae60c4bda5d7505e098d4adbed5ef27/02d09/github-pr-comment-sample.png 1020w,\n/static/9ae60c4bda5d7505e098d4adbed5ef27/9d567/github-pr-comment-sample.png 1360w,\n/static/9ae60c4bda5d7505e098d4adbed5ef27/c807c/github-pr-comment-sample.png 1850w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>(화면이름은 보안상 흰색박스로 가렸습니다.)</figcaption>\n  </figure></p>\n<p>이 워크플로우는 다음과 같은 순서로 동작합니다.</p>\n<ol>\n<li>PR이 생성되면 스크린샷 검증 작업(<code class=\"language-text\">verifyRoborazziDebug</code>)을 실행합니다.</li>\n<li>검증에 실패하면(UI 변경이 있으면) 새로운 스크린샷을 생성합니다(<code class=\"language-text\">recordRoborazziDebug</code>).</li>\n<li>브랜치 이름에서 JIRA 티켓 번호를 추출하여 커밋 메시지에 포함합니다. 이 부분은 각 회사나 팀의 작업 방식에 맞게 조정할 수 있습니다. (예를 들어, JIRA 대신 GitLab 이슈 번호나 다른 형식의 작업 ID를 사용할 수 있을 것 같습니다.)</li>\n<li>스크린샷 비교 이미지를 별도의 임시 브랜치(companion branch)에 저장합니다.</li>\n<li>비교 이미지를 포함한 마크다운 보고서를 생성하여 PR 코멘트로 추가합니다.</li>\n</ol>\n<h3 id=\"Companion-Branch-접근법\" style=\"position:relative;\"><a href=\"#Companion-Branch-%EC%A0%91%EA%B7%BC%EB%B2%95\" aria-label=\"Companion Branch 접근법 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>Companion Branch 접근법</h3>\n<p>문득 이런 생각이 들 수도 있습니다. 스크린샷의 이미지가 과도하게 많아지면 저장소의 용량도 계속해서 증가하는 것은 아닐까?\n그래서 <code class=\"language-text\">Companion Branch Approach</code>가 <a href=\"https://github.com/DroidKaigi/conference-app-2022/pull/616\">DroidKaigi/conference-app-2022</a>에서 제안되었습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/a615bc58211cd02b65ae2b097b60ca5e/3643c/companion-branch-approach.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 71.17647058823529%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACDUlEQVR42l1SWY6cMBTs+58m/zlBRvMxa6+ADXjfsLGhIaMsxfQoUloyCBvXq6r3aieMr1pedbxqRd2LumWUqzgt47zE6RrLPOQ5lquLWdqg3HDb3tYOzzBOPk1lXoyPVadbboT2lFsXp1TWtBVaTUh1J1ph7sGxLHleGlc6H73jJ8beCPGm8b4bE9dO98oBb2PBZdT6nzlfl2X9XseHZv8xK6MuXJzKPMUcxxIJV7Q95akonyDwH/ILjGJ2GJnUb4dTzb3pSQnVEJn3PeraODtLx5IlwON0z5zK1afCTVSKCqPrujbWpVxoV9kQyvI7j6JMGXZh+B6MBWZYkqq1MTaEbnjBe9kqa02cmWg0ZOigfLyXjWbgVNjwfCKt8k50RgrF2gMRTDsM6b3qOuk6abkO92DCFObcCo1hSJfOTVvVjeqpieXY9EgBLuTrT3uTvTX4a/gbOGxzLmDAt/bx0kvKJSEEDbhQhl+4gF/SxTDOkIlCeMP8DknCJn8eYd9J83q8PL4en4/10/78fm5Q9JYTgOEO/AildIMJ484OCaFTLoKzl+ZCethjTJCqotI0TB4JOpVCnpgJL4fqcKGUa8oUN37HtSdMghCRRvoQpnX9eOjCtx97RMSN07kVwg4gREgen/ZPr6f11x8IwdqNEwSvn062lea1TNc3Nb5wm/IWCTgaP2W7WG76/8X7L6/fBteLElXvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='companion branch approach' title='' src='/static/a615bc58211cd02b65ae2b097b60ca5e/ca1dc/companion-branch-approach.png' srcset='/static/a615bc58211cd02b65ae2b097b60ca5e/e7570/companion-branch-approach.png 170w,\n/static/a615bc58211cd02b65ae2b097b60ca5e/f46e7/companion-branch-approach.png 340w,\n/static/a615bc58211cd02b65ae2b097b60ca5e/ca1dc/companion-branch-approach.png 680w,\n/static/a615bc58211cd02b65ae2b097b60ca5e/02d09/companion-branch-approach.png 1020w,\n/static/a615bc58211cd02b65ae2b097b60ca5e/9d567/companion-branch-approach.png 1360w,\n/static/a615bc58211cd02b65ae2b097b60ca5e/3643c/companion-branch-approach.png 1400w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>제가 작성한 워크플로우는 비교 이미지들은 메인 코드베이스의 저장소 크기가 커지는 것을 방지하기 위해 임시 브랜치에 저장되어 관리되도록 하였지만, 레퍼런스 이미지들은 저장소에 커밋하고 있습니다. 첨부한 사진처럼 레퍼런스 이미지들도 GitHub Actions Artifact에 업로드하여 이를 <code class=\"language-text\">companion branch</code>에 생성한 비교이미지와 검증 태스크를 수행하는 방법으로 조금 더 개선할 수 있을 것 같습니다. 또한 Github Actions Artifact의 기본 보관 기간은 90일이지만, 보통 PR 생성 후 리뷰, 머지되기까지 길어봐야 1달 이내에 완료된다고 예상하면 보존 기간을 아래와 같이 30일로 설정할 수도 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Store reference images as artifacts\n  <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/upload<span class=\"token punctuation\">-</span>artifact@v4\n  <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> reference<span class=\"token punctuation\">-</span>screenshots\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> src/test/screenshots\n    <span class=\"token key atrule\">retention-days</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span></code></pre></div>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>결론</h2>\n<p>Roborazzi를 활용한 스크린샷 테스트는 안드로이드 앱의 UI 품질을 높이는 데 큰 도움될 수 있습니다. 특히 CI 파이프라인과 통합하여 자동화된 UI 검증 시스템을 구축하면, 의도치 않은 UI 변경을 사전에 감지하고 시각적으로 확인할 수 있게 되어 좋았던 것 같습니다.\n참고로 해당 포스팅에서 Roborazzi의 모든 기능들을 전부 다룬 것은 아닙니다. <a href=\"https://github.com/takahirom/roborazzi/releases\">릴리즈</a>가 될때마다 신규 기능 추가 및 변경사항들을 꾸준히 모니터링하는 것이 중요할 것 같습니다.</p>\n<h2 id=\"참고-자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\"참고 자료 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>참고 자료</h2>\n<ul>\n<li><a href=\"https://github.com/takahirom/roborazzi\">https://github.com/takahirom/roborazzi</a></li>\n<li><a href=\"https://github.com/android/nowinandroid/blob/main/core/screenshot-testing/src/main/kotlin/com/google/samples/apps/nowinandroid/core/testing/util/ScreenshotHelper.kt\">https://github.com/android/nowinandroid/blob/main/core/screenshot-testing/src/main/kotlin/com/google/samples/apps/nowinandroid/core/testing/util/ScreenshotHelper.kt</a></li>\n<li><a href=\"https://github.com/android/nowinandroid/issues/1242#issuecomment-2032962982\">https://github.com/android/nowinandroid/issues/1242#issuecomment-2032962982</a></li>\n<li><a href=\"https://github.com/DroidKaigi/conference-app-2022/pull/616\">https://github.com/DroidKaigi/conference-app-2022/pull/616</a></li>\n<li><a href=\"https://github.com/takahirom/roborazzi-compare-on-github-comment-sample\">https://github.com/takahirom/roborazzi-compare-on-github-comment-sample</a></li>\n<li><a href=\"https://robolectric.org/configuring/\">https://robolectric.org/configuring/</a></li>\n<li><a href=\"https://github.com/actions/upload-artifact?tab=readme-ov-file#retention-period\">https://github.com/actions/upload-artifact?tab=readme-ov-file#retention-period</a></li>\n</ul>","frontmatter":{"title":"Roborazzi로 안드로이드 스크린샷 변경점 시각화 테스트 구축하기","date":"March 09, 2025","update":"March 09, 2025","tags":["robolectric","roborazzi"],"series":null},"fields":{"slug":"/roborazzi/","readingTime":{"minutes":20.06}}},"seriesList":{"edges":[{"node":{"id":"8e7bdff8-a60d-50a5-aa84-fbc6f7569ebb","fields":{"slug":"/aws-amplify/"},"frontmatter":{"title":"AWS Amplify Android 오픈소스 기여하기"}}},{"node":{"id":"304406d0-f9d7-5cb1-9204-66cda7adc7e3","fields":{"slug":"/fitts-law/"},"frontmatter":{"title":"안드로이드 개발자가 놓치기 쉬운 UX (feat. 피츠의 법칙)"}}},{"node":{"id":"b6eb455b-15e0-51eb-8c18-31e889b742d5","fields":{"slug":"/junit4-junit5/"},"frontmatter":{"title":"JUnit4 vs JUnit5 그리고 Robolectric 호환성 문제 해결하기"}}},{"node":{"id":"032d0d1f-ebb0-5b2e-bf65-6ff7aa77dac8","fields":{"slug":"/roborazzi/"},"frontmatter":{"title":"Roborazzi로 안드로이드 스크린샷 변경점 시각화 테스트 구축하기"}}},{"node":{"id":"438afae6-59fd-5aab-9adf-5c731d92309d","fields":{"slug":"/about/"},"frontmatter":{"title":"안녕하세요 김원석입니다"}}}]},"previous":{"fields":{"slug":"/junit4-junit5/"},"frontmatter":{"title":"JUnit4 vs JUnit5 그리고 Robolectric 호환성 문제 해결하기"}},"next":null},"pageContext":{"id":"032d0d1f-ebb0-5b2e-bf65-6ff7aa77dac8","series":null,"previousPostId":"b6eb455b-15e0-51eb-8c18-31e889b742d5","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}