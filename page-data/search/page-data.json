{"componentChunkName":"component---src-pages-search-jsx","path":"/search/","result":{"data":{"allMarkdownRemark":{"nodes":[{"excerpt":"ì•ˆë“œë¡œì´ë“œ ì•± ê°œë°œ ì‹œ UI ë³€ê²½ì‚¬í•­ì´ ì œëŒ€ë¡œ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ê³¼ì •ì€ í•„ìˆ˜ì ì…ë‹ˆë‹¤. íŠ¹íˆ ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸°ì™€ í•´ìƒë„ë¥¼ ì§€ì›í•´ì•¼ í•˜ëŠ” ì•ˆë“œë¡œì´ë“œ í™˜ê²½ì—ì„œëŠ” ë”ìš± ì¤‘ìš”í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì½”ë“œ ë¦¬ë·°ë§Œìœ¼ë¡œëŠ” ì´ëŸ¬í•œ UI ë³€ê²½ì‚¬í•­ì„ ì •í™•íˆ íŒŒì•…í•˜ê¸° ì–´ë µê³ , íŠ¹íˆ íŒ€ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ì˜ë„ì¹˜ ì•Šì€ UI ë³€ê²½ì„ ë†“ì¹˜ê¸° ì‰½ìŠµë‹ˆë‹¤. ìµœê·¼ ì €ëŠ” íšŒì‚¬ í”„ë¡œì íŠ¸ì—ì„œ ì´ ë¬¸ì œë¥¼â€¦","fields":{"slug":"/roborazzi/"},"frontmatter":{"date":"March 09, 2025","title":"Roborazzië¡œ ì•ˆë“œë¡œì´ë“œ ìŠ¤í¬ë¦°ìƒ· ë³€ê²½ì  ì‹œê°í™” í…ŒìŠ¤íŠ¸ êµ¬ì¶•í•˜ê¸°","tags":["robolectric","roborazzi"]},"rawMarkdownBody":"\n![](ui-testing.png)\n\nì•ˆë“œë¡œì´ë“œ ì•± ê°œë°œ ì‹œ UI ë³€ê²½ì‚¬í•­ì´ ì œëŒ€ë¡œ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ê³¼ì •ì€ í•„ìˆ˜ì ì…ë‹ˆë‹¤. íŠ¹íˆ ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸°ì™€ í•´ìƒë„ë¥¼ ì§€ì›í•´ì•¼ í•˜ëŠ” ì•ˆë“œë¡œì´ë“œ í™˜ê²½ì—ì„œëŠ” ë”ìš± ì¤‘ìš”í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì½”ë“œ ë¦¬ë·°ë§Œìœ¼ë¡œëŠ” ì´ëŸ¬í•œ UI ë³€ê²½ì‚¬í•­ì„ ì •í™•íˆ íŒŒì•…í•˜ê¸° ì–´ë µê³ , íŠ¹íˆ íŒ€ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ì˜ë„ì¹˜ ì•Šì€ UI ë³€ê²½ì„ ë†“ì¹˜ê¸° ì‰½ìŠµë‹ˆë‹¤.\n\nìµœê·¼ ì €ëŠ” íšŒì‚¬ í”„ë¡œì íŠ¸ì—ì„œ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ [Roborazzi](https://github.com/takahirom/roborazzi)ë¥¼ í™œìš©í•œ ìŠ¤í¬ë¦°ìƒ· í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” `Roborazzi`ì˜ ì ìš©ë¶€í„°, `GitHub Actions`ë¥¼ í™œìš©í•œ CI íŒŒì´í”„ë¼ì¸ êµ¬ì¶•ê¹Œì§€ì˜ ê²½í—˜ì„ ê³µìœ í•˜ë ¤ê³  í•©ë‹ˆë‹¤.\n\n## Roborazzi ì†Œê°œ\n\n[Roborazzi](https://github.com/takahirom/roborazzi)ëŠ” [Robolectric](https://robolectric.org/) ê¸°ë°˜ì˜ ì•ˆë“œë¡œì´ë“œ ìŠ¤í¬ë¦°ìƒ· í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. Robolectricì˜ Native Graphics Mode(RNG)ë¥¼ í™œìš©í•˜ì—¬ JVM í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì•ˆë“œë¡œì´ë“œ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì‹œê°í™”í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ì•„ì§ Experimental ë‹¨ê³„ì´ì§€ë§Œ, [Compose Multiplatform iOS](https://github.com/takahirom/roborazzi?tab=readme-ov-file#experimental-feature-ios-support)ì™€ [Compose Desktop](https://github.com/takahirom/roborazzi?tab=readme-ov-file#experimental-feature-compose-desktop-support)ë„ ì‹¤í—˜ì ìœ¼ë¡œ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\nRoborazziì˜ ê°€ì¥ í° ì¥ì ì€ ì‹¤ì œ ê¸°ê¸° ì—†ì´ JVM í™˜ê²½ì—ì„œ ìŠ¤í¬ë¦°ìƒ·ì„ ìƒì„±í•˜ê³  ë¹„êµí•  ìˆ˜ ìˆì–´, CI í™˜ê²½ì—ì„œ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ë˜í•œ Googleì˜ ê³µì‹ ìƒ˜í”Œ í”„ë¡œì íŠ¸ì¸ [Now in Android](https://github.com/android/nowinandroid/blob/main/core/screenshot-testing/src/main/kotlin/com/google/samples/apps/nowinandroid/core/testing/util/ScreenshotHelper.kt)ì—ë„ ì ìš©ë˜ì–´ ìˆì–´ ì‹¤ì œ í”„ë¡œë•ì…˜ ìˆ˜ì¤€ì˜ êµ¬í˜„ ì˜ˆì‹œë¥¼ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### Paparazziì™€ Roborazzi ë¹„êµ\n\n[Paparazzi](https://github.com/cashapp/paparazzi)ëŠ” JVM í™˜ê²½ì—ì„œ ë””ìŠ¤í”Œë ˆì´ë¥¼ ì‹œê°í™”í•˜ëŠ” í›Œë¥­í•œ ë„êµ¬ì´ì§€ë§Œ, ì•ˆë“œë¡œì´ë“œ í”„ë ˆì„ì›Œí¬ë¥¼ ëª¨í‚¹í•˜ëŠ” Robolectricê³¼ëŠ” í˜¸í™˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. RoborazziëŠ” ì´ ê°„ê·¹ì„ ë©”ì›Œì¤ë‹ˆë‹¤. Robolectricê³¼ í†µí•©ë˜ì–´ Hilt ë“±ì˜ ì˜ì¡´ì„± ì£¼ì…ì„ í™œìš©í•œ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ë©°, ì‹¤ì œ ì»´í¬ë„ŒíŠ¸ì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³¸ì§ˆì ìœ¼ë¡œ RoborazziëŠ” Paparazziì˜ ê¸°ëŠ¥ì„ í™•ì¥í•˜ì—¬ Robolectricìœ¼ë¡œ ìŠ¤í¬ë¦°ìƒ·ì„ ìº¡ì²˜í•¨ìœ¼ë¡œì¨ ë” íš¨ìœ¨ì ì´ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” í…ŒìŠ¤íŠ¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\n### ì£¼ìš” Gradle íƒœìŠ¤í¬\n\nRoborazziëŠ” ë‹¤ìŒê³¼ ê°™ì€ Gradle íƒœìŠ¤í¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤:\n\n| íƒœìŠ¤í¬ëª… | ì„¤ëª… |\n|---------|------|\n| **recordRoborazziDebug** | ìŠ¤í¬ë¦°ìƒ·ì„ ìº¡ì²˜í•˜ê³  ì €ì¥ |\n| **compareRoborazziDebug** | í˜„ì¬ ì´ë¯¸ì§€ì™€ ì €ì¥ëœ ì´ë¯¸ì§€ë¥¼ ë¹„êµ |\n| **verifyRoborazziDebug** | í˜„ì¬ ì´ë¯¸ì§€ì™€ ì €ì¥ëœ ì´ë¯¸ì§€ ê°„ì˜ ì°¨ì´ ê²€ì¦ |\n| **verifyAndRecordRoborazziDebug** | ì´ë¯¸ì§€ ê²€ì¦ í›„ ì°¨ì´ê°€ ìˆìœ¼ë©´ ìƒˆ ê¸°ì¤€ ì´ë¯¸ì§€ ê¸°ë¡ |\n| **clearRoborazziDebug** | ì €ì¥ëœ ìŠ¤í¬ë¦°ìƒ· ì‚­ì œ (ì‹¤í—˜ì  ê¸°ëŠ¥) |\n\n## í”„ë¡œì íŠ¸ ì„¤ì •\n\n### Gradle ì„¤ì •\n\në¨¼ì € í”„ë¡œì íŠ¸ ë ˆë²¨ì˜ `build.gradle.kts`ì— Roborazzi í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤. \n\n```kotlin\n// root build.gradle.kts\nplugins {\n    // ...\n    id(\"io.github.takahirom.roborazzi\") version \"[version]\" apply false\n}\n```\n\në§Œì•½, buildScript ë¸”ë¡ì„ ì‚¬ìš©í•  ê²½ìš°ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì¤ë‹ˆë‹¤.\n```kotlin\n// root build.gradle.kts\nbuildscript {\n  dependencies {\n    // ...\n    classpath(\"io.github.takahirom.roborazzi:roborazzi-gradle-plugin:[version]\")\n  }\n}\n```\n\n\nê·¸ë¦¬ê³  ëª¨ë“ˆ ë ˆë²¨ì˜ `build.gradle.kts`ì— ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤.\n\n```kotlin\n// module build.gradle.kts\nplugins {\n    // ...\n    id(\"io.github.takahirom.roborazzi\")\n}\n\nandroid {\n    // ê¸°ì¡´ ì„¤ì •\n    \n    testOptions {\n        unitTests {\n            isIncludeAndroidResources = true\n            // Robolectricì˜ í•˜ë“œì›¨ì–´ ë Œë”ë§ ëª¨ë“œ ì‚¬ìš©\n            all {\n                it.systemProperties[\"robolectric.pixelCopyRenderMode\"] = \"hardware\"\n            }\n        }\n    }\n}\n\ndependencies {\n    // Core functions\n    testImplementation(\"io.github.takahirom.roborazzi:roborazzi:[version]\")\n\n    // Jetpack Compose\n    testImplementation(\"io.github.takahirom.roborazzi:roborazzi-compose:[version]\")\n\n    // JUnit rules\n    testImplementation(\"io.github.takahirom.roborazzi:roborazzi-junit-rule:[version]\")\n}\n\n// Roborazzi ì„¤ì •\nroborazzi {\n    // ë ˆí¼ëŸ°ìŠ¤ ì´ë¯¸ì§€ ì €ì¥ ê²½ë¡œ ì„¤ì •\n    outputDir.set(file(\"src/test/screenshots\"))\n\n    // ë¹„êµ ì´ë¯¸ì§€ ì €ì¥ ê²½ë¡œ (Experimental option)\n    compare {\n        outputDir.set(file(\"build/outputs/screenshots_comparison\"))\n    }\n}\n```\n\n### gradle.properties ì¶”ê°€ ì„¤ì •\n\nRoborazziëŠ” `gradle.properties` íŒŒì¼ì—ì„œ ë‹¤ì–‘í•œ ì˜µì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```properties\n# ìŠ¤í¬ë¦°ìƒ· í…ŒìŠ¤íŠ¸ í™œì„±í™” ì˜µì…˜\nroborazzi.test.record=true\n# roborazzi.test.compare=true\n# roborazzi.test.verify=true\n\n# ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ ìŠ¤ì¼€ì¼ ì„¤ì •\nroborazzi.record.resizeScale=0.5\n\n# íŒŒì¼ ê²½ë¡œ ì „ëµ ì„¤ì •\n# ê¸°ë³¸ê°’ì€ relativePathFromCurrentDirectory\nroborazzi.record.filePathStrategy=relativePathFromRoborazziContextOutputDirectory\n\n# ì´ë¯¸ì§€ í¬ë§· ì„¤ì • (WebP ì§€ì›, Experimental)\n# roborazzi.record.image.extension=webp\n\n# ì˜¤ë˜ëœ ìŠ¤í¬ë¦°ìƒ· ìë™ ì •ë¦¬ (ì£¼ì˜ í•„ìš”)\n# roborazzi.cleanupOldScreenshots=true\n```\n\n## ìŠ¤í¬ë¦°ìƒ· í…ŒìŠ¤íŠ¸ ì‘ì„±\n\nì´ì œ ì‹¤ì œ ìŠ¤í¬ë¦°ìƒ· í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤. `Roborazzi`ëŠ” ë‹¤ì–‘í•œ ë°©ì‹ì˜ ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ë¥¼ ì§€ì›í•˜ë©°, ì£¼ìš” APIëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n| ìº¡ì²˜ ëŒ€ìƒ | ì½”ë“œ ì˜ˆì‹œ |\n|---------|----------|\n| **Jetpack Compose** | `composeTestRule.onNodeWithTag(\"AddBoxButton\").captureRoboImage()` |\n| **Espresso View** | `onView(ViewMatchers.isRoot()).captureRoboImage()` |\n| **ì¼ë°˜ View** | `view.captureRoboImage()` |\n| **Compose ëŒë‹¤** | `captureRoboImage { Text(\"Hello Compose!\") }` |\n| **ì „ì²´ í™”ë©´ (Experimental)** | `captureScreenRoboImage()` |\n| **Bitmap** | `bitmap.captureRoboImage()` |\n\në‹¤ìŒì€ Jetpack Compose ê¸°ë°˜ ë¡œê·¸ì¸ í™”ë©´ì˜ ìŠ¤í¬ë¦°ìƒ· í…ŒìŠ¤íŠ¸ ì˜ˆì‹œì…ë‹ˆë‹¤:\n\n```kotlin\n@RunWith(RobolectricTestRunner::class)\n@GraphicsMode(GraphicsMode.Mode.NATIVE) // Robolectric Native Graphics ëª¨ë“œ í™œì„±í™” (í•„ìˆ˜)\nclass LoginScreenshotTest {\n\n    @get:Rule\n    val composeTestRule = createComposeRule()\n    \n    @Test\n    fun captureLoginScreen_defaultState() {\n        // ì»´í¬ì¦ˆ UI ì„¤ì •\n        composeTestRule.setContent {\n            MyAppTheme {\n                LoginScreen(\n                    uiState = LoginUiState.Default,\n                    onLoginClick = {},\n                    onEmailChanged = {},\n                    onPasswordChanged = {}\n                )\n            }\n        }\n        \n        // ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜\n        composeTestRule.onRoot()\n            .captureRoboImage(\n                // íŒŒì¼ëª… ì§€ì • (ê¸°ë³¸ ì¶œë ¥ ë””ë ‰í† ë¦¬ì— ì €ì¥ë¨)\n                \"loginScreen_defaultState\",\n                // ì¶”ê°€ ì˜µì…˜ ì„¤ì •\n                roborazziOptions = RoborazziOptions(\n                    // ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§•\n                    recordOptions = RoborazziOptions.RecordOptions(\n                        resizeScale = 0.75f\n                    ),\n                    // ë¹„êµ ì˜µì…˜\n                    compareOptions = RoborazziOptions.CompareOptions(\n                        changeThreshold = 0.01f\n                    )\n                )\n            )\n    }\n    \n    @Test\n    fun captureLoginScreen_errorState() {\n        composeTestRule.setContent {\n            MyAppTheme {\n                LoginScreen(\n                    uiState = LoginUiState.Error(\"Invalid credentials\"),\n                    onLoginClick = {},\n                    onEmailChanged = {},\n                    onPasswordChanged = {}\n                )\n            }\n        }\n        \n        // íŠ¹ì • ì»´í¬ë„ŒíŠ¸ë§Œ ìº¡ì²˜í•  ìˆ˜ë„ ìˆìŒ\n        composeTestRule.onNodeWithTag(\"errorMessage\")\n            .captureRoboImage(\n                \"loginScreen_errorMessage\"\n            )\n        \n        // ì „ì²´ í™”ë©´ ìº¡ì²˜\n        composeTestRule.onRoot()\n            .captureRoboImage(\n                \"loginScreen_errorState\"\n            )\n    }\n}\n```\n\n### RoborazziRule í™œìš©\n\nRoborazziëŠ” JUnit ê·œì¹™ì„ í†µí•´ ë” í¸ë¦¬í•œ í…ŒìŠ¤íŠ¸ ì‘ì„±ì„ ì§€ì›í•©ë‹ˆë‹¤. `RoborazziRule`ì€ ì„ íƒì ì´ì§€ë§Œ, ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì„ ì œê³µí•©ë‹ˆë‹¤.\n\n1. `RoborazziOptions`, `outputDirectoryPath` ë“±ì˜ ì»¨í…ìŠ¤íŠ¸ ì œê³µ\n2. ë‹¤ì–‘í•œ ìº¡ì²˜ ìœ í˜• ì„¤ì • (LastImage, AllImage, Gif ë“±)\n\n```kotlin\n@RunWith(RobolectricTestRunner::class)\n@GraphicsMode(GraphicsMode.Mode.NATIVE)\nclass RuleTest {\n    @get:Rule\n    val composeTestRule = createComposeRule()\n    \n    @get:Rule\n    val roborazziRule = RoborazziRule(\n        composeRule = composeTestRule,\n        captureRoot = composeTestRule.onRoot(),\n        options = RoborazziRule.Options(\n            // í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œì—ë§Œ ì´ë¯¸ì§€ ìº¡ì²˜\n            captureType = RoborazziRule.CaptureType.Gif(onlyFail = true),\n            // ì´ë¯¸ì§€ ë¹„êµ ì˜µì…˜ ì„¤ì •\n            roborazziOptions = RoborazziOptions(\n                compareOptions = RoborazziOptions.CompareOptions(\n                    // ì•ˆí‹°ì•¨ë¦¬ì–´ì‹± ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ì„¤ì •\n                    imageComparator = SimpleImageComparator(\n                        maxDistance = 0.007f,\n                        vShift = 2,    // ìˆ˜ì§ ì´ë™ í—ˆìš©\n                        hShift = 2     // ìˆ˜í‰ ì´ë™ í—ˆìš©\n                    )\n                )\n            )\n        )\n    )\n    \n    @Test\n    // RoborazziRule ë¬´ì‹œ ì–´ë…¸í…Œì´ì…˜\n    // @RoborazziRule.Ignore\n    fun testWithRule() {\n        composeTestRule.setContent {\n            MyAppTheme {\n                // ...\n            }\n        }\n        \n        // RoborazziRuleì´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê³¼ì •ì—ì„œ ìë™ìœ¼ë¡œ ì´ë¯¸ì§€ ìº¡ì²˜\n    }\n}\n```\n\n### GIF ì´ë¯¸ì§€ ìº¡ì²˜\n\nRoborazziëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ë‚˜ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì„ ë³´ì—¬ì£¼ëŠ” GIF ì´ë¯¸ì§€ ìƒì„±ë„ ì§€ì›í•©ë‹ˆë‹¤:\n\n```kotlin\n@Test\nfun captureRoboGifSample() {\n    onView(ViewMatchers.isRoot())\n        .captureRoboGif(\"build/test.gif\") {\n            // ì•± ì‹¤í–‰\n            ActivityScenario.launch(MainActivity::class.java)\n            // ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™\n            onView(withId(R.id.button_first))\n                .perform(click())\n            // ë’¤ë¡œ ê°€ê¸°\n            pressBack()\n            // ë‹¤ì‹œ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™\n            onView(withId(R.id.button_first))\n                .perform(click())\n        }\n}\n```\n\n### ë‹¤ì–‘í•œ ë””ë°”ì´ìŠ¤ ì„¤ì • í…ŒìŠ¤íŠ¸\n\nì‹¤ì œ ì‚¬ìš© í™˜ê²½ì„ ë” ì˜ ë°˜ì˜í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ë””ë°”ì´ìŠ¤ ì„¤ì •(í™”ë©´ í¬ê¸°, ë°©í–¥, ë‹¤í¬ ëª¨ë“œ ë“±)ì—ì„œ ìŠ¤í¬ë¦°ìƒ·ì„ ìº¡ì²˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. RoborazziëŠ” `RobolectricDeviceQualifiers`ë¥¼ í†µí•´ ë¯¸ë¦¬ ì •ì˜ëœ ë””ë°”ì´ìŠ¤ ì„¤ì •ì„ ì œê³µí•©ë‹ˆë‹¤:\n\n```kotlin\n// í´ë˜ìŠ¤ ë ˆë²¨ì—ì„œ ê¸°ë³¸ ë””ë°”ì´ìŠ¤ ì„¤ì •\n@RunWith(RobolectricTestRunner::class)\n@GraphicsMode(GraphicsMode.Mode.NATIVE)\n@Config(qualifiers = RobolectricDeviceQualifiers.Pixel5)\nclass DeviceSpecificScreenshotTest {\n    // ...\n}\n\n// íŠ¹ì • í…ŒìŠ¤íŠ¸ ë©”ì„œë“œì—ë§Œ ë‹¤ë¥¸ ì„¤ì • ì ìš©\n@Test\n@Config(qualifiers = RobolectricDeviceQualifiers.MediumTablet + \"+land\")\nfun captureLoginScreen_landscapeTablet() {\n    // ...\n}\n\n// ë‹¤í¬ ëª¨ë“œ ì„¤ì •\n@Test\n@Config(qualifiers = \"+night\")\nfun captureLoginScreen_darkMode() {\n    // ...\n}\n\n// ë¡œì¼€ì¼ ì„¤ì •\n@Test\n@Config(qualifiers = \"+ja\")  // ì¼ë³¸ì–´ ë¡œì¼€ì¼\nfun captureLoginScreen_japaneseLocale() {\n    // ...\n}\n```\n\n## ìš´ì˜ì²´ì œë³„ ë Œë”ë§ ì°¨ì´\n\në‹¤ë§Œ, Roborazzië¥¼ ì‚¬ìš©í•˜ë©´ì„œ ëª‡ ê°€ì§€ ì£¼ì˜í•  ì ë“¤ì´ ìˆìŠµë‹ˆë‹¤.\n\n### 1. OSë³„ ë Œë”ë§ ë¶ˆì¼ì¹˜ ë¬¸ì œ\n\nRoborazziëŠ” [Skia](https://skia.org/) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ UIë¥¼ ë Œë”ë§í•˜ëŠ”ë°, ì´ ë Œë”ë§ ê²°ê³¼ëŠ” ìš´ì˜ì²´ì œë§ˆë‹¤ ì•½ê°„ì”© ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” [FAQ - Why do my screenshot tests fail inconsistently across different operating systems like MacOS, Ubuntu, and Windows?](https://github.com/takahirom/roborazzi?tab=readme-ov-file#q-why-do-my-screenshot-tests-fail-inconsistently-across-different-operating-systems-like-macos-ubuntu-and-windows)ì—ì„œë„ ì–¸ê¸‰ëœ ë…¸ìš´ ì´ìŠˆì…ë‹ˆë‹¤.\n\nì´ ë¬¸ì œëŠ” Now in Android í”„ë¡œì íŠ¸ì—ì„œë„ [ë…¼ì˜ëœ ë°” ìˆìœ¼ë©°](https://github.com/android/nowinandroid/issues/1242#issuecomment-2032962982), ëª¨ë“  í™˜ê²½ì—ì„œ ë™ì¼í•œ ë Œë”ë§ì„ ë³´ì¥í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.  ì°¸ê³ ë¡œ ì´ëŸ¬í•œ ì´ìœ ë¡œ ì €ì˜ ë¡œì»¬ PC(Mac)ì—ì„œë„ ìŠ¤í¬ë¦°ìƒ· ê²€ì¦ íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ë©´ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤. ì£¼ìš” ì›ì¸ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- ê° OSì˜ ê·¸ë˜í”½ ë“œë¼ì´ë²„ êµ¬í˜„ ì°¨ì´\n- í°íŠ¸ ë Œë”ë§ ë°©ì‹ì˜ ì°¨ì´\n- ì•ˆí‹°ì•¨ë¦¬ì–´ì‹± ì²˜ë¦¬ ë°©ì‹ì˜ ì°¨ì´\n\nì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ `RoborazziOptions.CompareOptions`ì˜ ì˜µì…˜ë“¤ì„ ë³€ê²½í•´ì£¼ì–´ë„ ë˜ê² ì§€ë§Œ, ì €ëŠ” ì´ë ‡ê²Œ ì¡°ê¸ˆì”© ê²€ì¦ ì¡°ê±´ì„ ì™„í™”í•´ì£¼ë‹¤ë³´ë©´ ìŠ¤í¬ë¦°ìƒ·ì„ ë¹„êµí•˜ëŠ” ì˜ë¯¸ê°€ ì—†ì–´ì§„ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ Roborazziì˜ ì €ìì¸ [takahirom](https://github.com/takahirom)ë‹˜ì˜ ì˜ê²¬ì— ë”°ë¼ ì¼ê´€ì„±ì„ ìœ„í•´ ê¸°ì¤€ ì´ë¯¸ì§€ ìƒì„±ê³¼ ê²€ì¦ì„ ëª¨ë‘ ë™ì¼í•œ CI í™˜ê²½ì—ì„œ ìˆ˜í–‰í•˜ë„ë¡ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n![](now-in-android-roborazzi-compare-options.png)\n> ì‹¤ì œë¡œ [nowinandroid](https://github.com/android/nowinandroid/blob/main/core/screenshot-testing/src/main/kotlin/com/google/samples/apps/nowinandroid/core/testing/util/ScreenshotHelper.kt)ì—ì„œë„ ì´ë¯¸ì§€ ë¹„êµ ì˜µì…˜ì— ëŒ€í•´ì„œëŠ” íƒ€í˜‘í•˜ì§€ ì•Šì€ ì ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n\n### 2. ë©”ëª¨ë¦¬ ë¬¸ì œ í•´ê²°\n\në³µì¡í•œ UIì—ì„œ ë§ì€ ìŠ¤í¬ë¦°ìƒ· í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ê²½ìš° `OutOfMemoryError`ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” [Issue #272](https://github.com/takahirom/roborazzi/issues/272)ì—ì„œë„ ë…¼ì˜ëœ ë¬¸ì œë¡œ, ë‹¤ìŒê³¼ ê°™ì´ `maxHeapSize`ë¥¼ ì¡°ì •í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```kotlin\n// build.gradle.kts\nandroid {\n    testOptions {\n        unitTests.all {\n            maxHeapSize = \"4096m\"\n        }\n    }\n}\n```\n\n### 3. ê¹¨ì§„ ì´ë¯¸ì§€ ë¬¸ì œ í•´ê²°\n\nì¼ë¶€ ê²½ìš°ì— Roborazzië¡œ ìº¡ì²˜í•œ ì´ë¯¸ì§€ê°€ ê¹¨ì ¸ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì£¼ë¡œ API ë ˆë²¨ì´ ë„ˆë¬´ ë‚®ê±°ë‚˜ Robolectricì˜ ë Œë”ë§ ëª¨ë“œ ì„¤ì • ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. [Issue #255](https://github.com/takahirom/roborazzi/issues/255#issuecomment-1972838571)ì—ì„œ ë…¼ì˜ëœ ê²ƒì²˜ëŸ¼, ë‹¤ìŒê³¼ ê°™ì€ ì„¤ì •ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```kotlin\n// í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ì— ì ìš©\n@Config(sdk = [35])  // ìµœì‹  API ë ˆë²¨ ì‚¬ìš©\n@GraphicsMode(GraphicsMode.Mode.NATIVE)  // Native Graphics ëª¨ë“œ í•„ìˆ˜\n\n// build.gradle.kts\nandroid {\n    testOptions {\n        unitTests.all {\n            it.systemProperties[\"robolectric.pixelCopyRenderMode\"] = \"hardware\"\n        }\n    }\n}\n```\nì´ëŸ¬í•œ ì„¤ì •ì„ í†µí•´ ëŒ€ë¶€ë¶„ì˜ ë Œë”ë§ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\n\n> ì°¸ê³ ë¡œ Robolectric 4.14 ë²„ì „ë¶€í„° Android V(SDK 35)ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.\n![](robolectric-4.1.4.png)\n\n## CI íŒŒì´í”„ë¼ì¸ êµ¬ì¶•\n\ní…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•œ í›„, ì´ë¥¼ CI íŒŒì´í”„ë¼ì¸ì— í†µí•©í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì €ëŠ” GitHub Actionsë¥¼ í™œìš©í•˜ì—¬ PRì´ ìƒì„±ë  ë•Œë§ˆë‹¤ ìŠ¤í¬ë¦°ìƒ· í…ŒìŠ¤íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰í•˜ê³ , ë³€ê²½ì‚¬í•­ì´ ìˆì„ ê²½ìš° ì‹œê°ì ìœ¼ë¡œ í‘œì‹œí•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.\n\n### GitHub Actions ì›Œí¬í”Œë¡œìš° êµ¬ì„±\n\në‹¤ìŒì€ GitHub Actionsë¥¼ ì‚¬ìš©í•œ ì›Œí¬í”Œë¡œìš° ì„¤ì • ì˜ˆì‹œì…ë‹ˆë‹¤.\n\n```yaml\nname: Android Pull Request CI\n\non:\n  pull_request:\n    branches: [ main, develop ]\n\njobs:\n  verify-screenshots:\n    runs-on: ubuntu-latest\n    \n    permissions:\n      checks: write\n      pull-requests: write\n      contents: write\n      \n    steps:\n      - name: Checkout the code\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n        \n      - name: Set up JDK\n        uses: actions/setup-java@v4\n        with:\n          distribution: 'temurin'\n          java-version: '17'\n          cache: 'gradle'\n          \n      - name: Set up Android SDK\n        uses: android-actions/setup-android@v3\n        \n      - name: Grant execute permission for gradlew\n        run: chmod +x gradlew\n        \n      - name: Run ktlint\n        run: ./gradlew ktlintCheck\n        \n      # ìŠ¤í¬ë¦°ìƒ· ê²€ì¦ ë‹¨ê³„\n      - name: Verify Roborazzi Screenshots\n        id: screenshotsverify\n        continue-on-error: true\n        run: ./gradlew verifyRoborazziDebug\n        \n      # ê²€ì¦ ì‹¤íŒ¨ ì‹œ ìƒˆ ìŠ¤í¬ë¦°ìƒ· ìƒì„±\n      - name: Generate new screenshots if verification failed\n        id: screenshotsrecord\n        if: steps.screenshotsverify.outcome == 'failure'\n        run: ./gradlew recordRoborazziDebug\n        \n      # ë¸Œëœì¹˜ëª…ì—ì„œ JIRA í‹°ì¼“ ì¶”ì¶œ (íšŒì‚¬ ìƒí™©ì— ë§ê²Œ ì¡°ì •)\n      - name: Extract JIRA ticket\n        id: extract_ticket\n        if: steps.screenshotsrecord.outcome == 'success'\n        run: |\n          BRANCH_NAME=$(echo ${{ github.head_ref }})\n          echo \"branch_name=$BRANCH_NAME\" >> $GITHUB_OUTPUT\n          \n          if [[ $BRANCH_NAME =~ (TICKET-[0-9]+) ]]; then\n            TICKET=\"${BASH_REMATCH[1]}\"\n            echo \"ticket=$TICKET\" >> $GITHUB_OUTPUT\n            echo \"Found JIRA ticket: $TICKET\"\n          else\n            echo \"ticket=NO-TICKET\" >> $GITHUB_OUTPUT\n            echo \"No JIRA ticket found in branch name\"\n          fi\n          \n      # ìƒˆ ìŠ¤í¬ë¦°ìƒ· ì»¤ë°‹\n      - name: Push new screenshots if available\n        uses: stefanzweifel/git-auto-commit-action@v5\n        if: steps.screenshotsrecord.outcome == 'success'\n        with:\n          file_pattern: '**/*.png'\n          disable_globbing: false\n          commit_message: \"${{ steps.extract_ticket.outputs.ticket != 'NO-TICKET' && format('{0} feat: ìŠ¤í¬ë¦°ìƒ· ì—…ë°ì´íŠ¸', steps.extract_ticket.outputs.ticket) || 'NO-TICKET feat: ìŠ¤í¬ë¦°ìƒ· ì—…ë°ì´íŠ¸' }}\"\n          \n      # ë¹„êµ ì´ë¯¸ì§€ ìˆ˜ì§‘\n      - name: Copy screenshot comparison files\n        id: copy_screenshots\n        if: steps.screenshotsverify.outcome == 'failure'\n        run: |\n          mkdir -p /tmp/screenshot-diff\n          \n          cd ${{ github.workspace }}\n          find . -name \"*_compare.png\" -exec cp {} /tmp/screenshot-diff/ \\;\n          \n          if [ -z \"$(find /tmp/screenshot-diff -type f -name '*.png')\" ]; then\n            echo \"No screenshot files found\"\n            echo \"has_images=false\" >> $GITHUB_OUTPUT\n          else\n            echo \"Found screenshot comparison images:\"\n            ls -la /tmp/screenshot-diff\n            echo \"has_images=true\" >> $GITHUB_OUTPUT\n          fi\n          \n      # Companion Branch ìƒì„±\n      - name: Create companion branch for screenshot comparison\n        id: companion_branch\n        if: steps.copy_screenshots.outputs.has_images == 'true'\n        run: |\n          BRANCH_NAME=\"screenshot-compare-${{ github.event.pull_request.number }}\"\n          echo \"branch_name=$BRANCH_NAME\" >> $GITHUB_OUTPUT\n          \n          git config --global user.name \"GitHub Actions\"\n          git config --global user.email \"actions@github.com\"\n          \n          git stash -u || true\n          \n          git branch -D \"$BRANCH_NAME\" || true\n          git checkout --orphan \"$BRANCH_NAME\"\n          git rm -rf .\n          \n          mkdir -p screenshot-diff\n          \n          cp /tmp/screenshot-diff/*.png screenshot-diff/\n          \n          git add screenshot-diff\n          git commit -m \"Add screenshot comparison results\"\n          git push origin \"$BRANCH_NAME\" -f\n          \n          echo \"companion_push_success=echo \"companion_push_success=true\" >> $GITHUB_OUTPUT\n\n          git checkout -f ${{ github.head_ref }} || git checkout -f HEAD\n          \n      # ë§ˆí¬ë‹¤ìš´ ë¦¬í¬íŠ¸ ìƒì„±\n      - name: Generate markdown report for screenshot diffs\n        id: generate_report\n        if: steps.companion_branch.outputs.companion_push_success == 'true'\n        run: |\n          REPORT=\"## ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· ë¹„êµ ê²°ê³¼\\n\\n\"\n          REPORT+=\"| í™”ë©´ ì´ë¦„ | ë¹„êµ ì´ë¯¸ì§€ |\\n\"\n          REPORT+=\"|:--------:|:----------:|\\n\"\n          \n          BRANCH_NAME=\"${{ steps.companion_branch.outputs.branch_name }}\"\n          \n          for FILE in /tmp/screenshot-diff/*.png; do\n            FILENAME=$(basename \"$FILE\")\n            SCREENNAME=${FILENAME%_compare.png}\n          \n            IMG_URL=\"https://github.com/${{ github.repository }}/blob/$BRANCH_NAME/screenshot-diff/$FILENAME?raw=true\"\n          \n            REPORT+=\"| \\`$SCREENNAME\\` | ![Screenshot]($IMG_URL) |\\n\"\n          done\n          \n          EOF=$(dd if=/dev/urandom bs=15 count=1 status=none | base64)\n          echo \"report<<$EOF\" >> $GITHUB_OUTPUT\n          echo -e \"$REPORT\" >> $GITHUB_OUTPUT\n          echo \"$EOF\" >> $GITHUB_OUTPUT\n          \n          echo \"found_images=true\" >> $GITHUB_OUTPUT\n          \n      # ê¸°ì¡´ PR ì½”ë©˜íŠ¸ ì°¾ê¸°\n      - name: Find existing comment\n        uses: peter-evans/find-comment@v3\n        id: find_comment\n        if: steps.generate_report.outputs.found_images == 'true'\n        with:\n          issue-number: ${{ github.event.pull_request.number }}\n          comment-author: 'github-actions[bot]'\n          body-includes: '## ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· ë¹„êµ ê²°ê³¼'\n          \n      # PR ì½”ë©˜íŠ¸ ìƒì„± ë˜ëŠ” ì—…ë°ì´íŠ¸\n      - name: Create or update comment with comparison results\n        uses: peter-evans/create-or-update-comment@v4\n        if: steps.generate_report.outputs.found_images == 'true'\n        with:\n          comment-id: ${{ steps.find_comment.outputs.comment-id }}\n          issue-number: ${{ github.event.pull_request.number }}\n          body: ${{ steps.generate_report.outputs.report }}\n          edit-mode: replace\n          \n      # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰\n      - name: Run unit tests\n        run: ./gradlew testDebugUnitTest --stacktrace\n```\n\nìœ„ ê³¼ì •ì— ì„±ê³µí•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ì½”ë©˜íŠ¸ê°€ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n![(í™”ë©´ì´ë¦„ì€ ë³´ì•ˆìƒ í°ìƒ‰ë°•ìŠ¤ë¡œ ê°€ë ¸ìŠµë‹ˆë‹¤.)](github-pr-comment-sample.png)\n\nì´ ì›Œí¬í”Œë¡œìš°ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ ë™ì‘í•©ë‹ˆë‹¤.\n1. PRì´ ìƒì„±ë˜ë©´ ìŠ¤í¬ë¦°ìƒ· ê²€ì¦ ì‘ì—…(`verifyRoborazziDebug`)ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\n2. ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´(UI ë³€ê²½ì´ ìˆìœ¼ë©´) ìƒˆë¡œìš´ ìŠ¤í¬ë¦°ìƒ·ì„ ìƒì„±í•©ë‹ˆë‹¤(`recordRoborazziDebug`).\n3. ë¸Œëœì¹˜ ì´ë¦„ì—ì„œ JIRA í‹°ì¼“ ë²ˆí˜¸ë¥¼ ì¶”ì¶œí•˜ì—¬ ì»¤ë°‹ ë©”ì‹œì§€ì— í¬í•¨í•©ë‹ˆë‹¤. ì´ ë¶€ë¶„ì€ ê° íšŒì‚¬ë‚˜ íŒ€ì˜ ì‘ì—… ë°©ì‹ì— ë§ê²Œ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì˜ˆë¥¼ ë“¤ì–´, JIRA ëŒ€ì‹  GitLab ì´ìŠˆ ë²ˆí˜¸ë‚˜ ë‹¤ë¥¸ í˜•ì‹ì˜ ì‘ì—… IDë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.)\n4. ìŠ¤í¬ë¦°ìƒ· ë¹„êµ ì´ë¯¸ì§€ë¥¼ ë³„ë„ì˜ ì„ì‹œ ë¸Œëœì¹˜(companion branch)ì— ì €ì¥í•©ë‹ˆë‹¤.\n5. ë¹„êµ ì´ë¯¸ì§€ë¥¼ í¬í•¨í•œ ë§ˆí¬ë‹¤ìš´ ë³´ê³ ì„œë¥¼ ìƒì„±í•˜ì—¬ PR ì½”ë©˜íŠ¸ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.\n\n### Companion Branch ì ‘ê·¼ë²•\n\në¬¸ë“ ì´ëŸ° ìƒê°ì´ ë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ìŠ¤í¬ë¦°ìƒ·ì˜ ì´ë¯¸ì§€ê°€ ê³¼ë„í•˜ê²Œ ë§ì•„ì§€ë©´ ì €ì¥ì†Œì˜ ìš©ëŸ‰ë„ ê³„ì†í•´ì„œ ì¦ê°€í•˜ëŠ” ê²ƒì€ ì•„ë‹ê¹Œ?\nê·¸ë˜ì„œ `Companion Branch Approach`ê°€ [DroidKaigi/conference-app-2022](https://github.com/DroidKaigi/conference-app-2022/pull/616)ì—ì„œ ì œì•ˆë˜ì—ˆìŠµë‹ˆë‹¤.\n\n![](companion-branch-approach.png)\n\nì œê°€ ì‘ì„±í•œ ì›Œí¬í”Œë¡œìš°ëŠ” ë¹„êµ ì´ë¯¸ì§€ë“¤ì€ ë©”ì¸ ì½”ë“œë² ì´ìŠ¤ì˜ ì €ì¥ì†Œ í¬ê¸°ê°€ ì»¤ì§€ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì„ì‹œ ë¸Œëœì¹˜ì— ì €ì¥ë˜ì–´ ê´€ë¦¬ë˜ë„ë¡ í•˜ì˜€ì§€ë§Œ, ë ˆí¼ëŸ°ìŠ¤ ì´ë¯¸ì§€ë“¤ì€ ì €ì¥ì†Œì— ì»¤ë°‹í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì²¨ë¶€í•œ ì‚¬ì§„ì²˜ëŸ¼ ë ˆí¼ëŸ°ìŠ¤ ì´ë¯¸ì§€ë“¤ë„ GitHub Actions Artifactì— ì—…ë¡œë“œí•˜ì—¬ ì´ë¥¼ `companion branch`ì— ìƒì„±í•œ ë¹„êµì´ë¯¸ì§€ì™€ ê²€ì¦ íƒœìŠ¤í¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ì¡°ê¸ˆ ë” ê°œì„ í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë˜í•œ Github Actions Artifactì˜ ê¸°ë³¸ ë³´ê´€ ê¸°ê°„ì€ 90ì¼ì´ì§€ë§Œ, ë³´í†µ PR ìƒì„± í›„ ë¦¬ë·°, ë¨¸ì§€ë˜ê¸°ê¹Œì§€ ê¸¸ì–´ë´ì•¼ 1ë‹¬ ì´ë‚´ì— ì™„ë£Œëœë‹¤ê³  ì˜ˆìƒí•˜ë©´ ë³´ì¡´ ê¸°ê°„ì„ ì•„ë˜ì™€ ê°™ì´ 30ì¼ë¡œ ì„¤ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\n```yaml\n- name: Store reference images as artifacts\n  uses: actions/upload-artifact@v4\n  with:\n    name: reference-screenshots\n    path: src/test/screenshots\n    retention-days: 30\n```\n> https://github.com/actions/upload-artifact?tab=readme-ov-file#retention-period\n\n## ê²°ë¡ \n\nRoborazzië¥¼ í™œìš©í•œ ìŠ¤í¬ë¦°ìƒ· í…ŒìŠ¤íŠ¸ëŠ” ì•ˆë“œë¡œì´ë“œ ì•±ì˜ UI í’ˆì§ˆì„ ë†’ì´ëŠ” ë° í° ë„ì›€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ CI íŒŒì´í”„ë¼ì¸ê³¼ í†µí•©í•˜ì—¬ ìë™í™”ëœ UI ê²€ì¦ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ë©´, ì˜ë„ì¹˜ ì•Šì€ UI ë³€ê²½ì„ ì‚¬ì „ì— ê°ì§€í•˜ê³  ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆê²Œ ë˜ì–´ ì¢‹ì•˜ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.\nì°¸ê³ ë¡œ í•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œ Roborazziì˜ ëª¨ë“  ê¸°ëŠ¥ë“¤ì„ ì „ë¶€ ë‹¤ë£¬ ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. [ë¦´ë¦¬ì¦ˆ](https://github.com/takahirom/roborazzi/releases)ê°€ ë ë•Œë§ˆë‹¤ ì‹ ê·œ ê¸°ëŠ¥ ì¶”ê°€ ë° ë³€ê²½ì‚¬í•­ë“¤ì„ ê¾¸ì¤€íˆ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n\n## ì°¸ê³  ìë£Œ\n\n- https://github.com/takahirom/roborazzi\n- https://github.com/android/nowinandroid/blob/main/core/screenshot-testing/src/main/kotlin/com/google/samples/apps/nowinandroid/core/testing/util/ScreenshotHelper.kt\n- https://github.com/android/nowinandroid/issues/1242#issuecomment-2032962982\n- https://github.com/DroidKaigi/conference-app-2022/pull/616\n- https://github.com/takahirom/roborazzi-compare-on-github-comment-sample\n- https://robolectric.org/configuring/"},{"excerpt":"ì•ˆë“œë¡œì´ë“œ ê°œë°œì—ì„œ í…ŒìŠ¤íŒ…ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í’ˆì§ˆì„ ë³´ì¥í•˜ëŠ” ì¤‘ìš”í•œ ë‹¨ê³„ì…ë‹ˆë‹¤. íŠ¹íˆ JUnitì€ ìë°”ì™€ ì½”í‹€ë¦° í™˜ê²½ì—ì„œ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” í…ŒìŠ¤íŒ… í”„ë ˆì„ì›Œí¬ì´ì§€ë§Œ, JUnit4ì™€ JUnit5 ì‚¬ì´ì—ëŠ” ìƒë‹¹í•œ ì°¨ì´ê°€ ìˆìœ¼ë©° ì´ëŠ” ì•ˆë“œë¡œì´ë“œ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” JUnit4ì™€ JUnit5ì˜ ì£¼ìš” ì°¨ì´ì , Robolecâ€¦","fields":{"slug":"/junit4-junit5/"},"frontmatter":{"date":"March 07, 2025","title":"JUnit4 vs JUnit5 ê·¸ë¦¬ê³  Robolectric í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°í•˜ê¸°","tags":["testing","junit","robolectric"]},"rawMarkdownBody":"\nì•ˆë“œë¡œì´ë“œ ê°œë°œì—ì„œ í…ŒìŠ¤íŒ…ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í’ˆì§ˆì„ ë³´ì¥í•˜ëŠ” ì¤‘ìš”í•œ ë‹¨ê³„ì…ë‹ˆë‹¤. íŠ¹íˆ JUnitì€ ìë°”ì™€ ì½”í‹€ë¦° í™˜ê²½ì—ì„œ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” í…ŒìŠ¤íŒ… í”„ë ˆì„ì›Œí¬ì´ì§€ë§Œ, JUnit4ì™€ JUnit5 ì‚¬ì´ì—ëŠ” ìƒë‹¹í•œ ì°¨ì´ê°€ ìˆìœ¼ë©° ì´ëŠ” ì•ˆë“œë¡œì´ë“œ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” JUnit4ì™€ JUnit5ì˜ ì£¼ìš” ì°¨ì´ì , Robolectricì´ JUnit4ë§Œ ì§€ì›í•˜ëŠ” ì œì•½ì„ í•´ê²°í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n## JUnit4 vs JUnit5\n\n![](junit5-release.png)\n\n`JUnit5`ëŠ” [2017ë…„ 9ì›” 10ì¼ì— ì²˜ìŒ ë¦´ë¦¬ì¦ˆ](https://junit.org/junit5/docs/5.1.0/release-notes/index.html#release-notes-5.0.0) ë˜ì—ˆìŠµë‹ˆë‹¤. `JUnit4`ë³´ë‹¤ ì—¬ëŸ¬ ë©´ì—ì„œ ê°œì„ ë˜ì—ˆëŠ”ë°,ê°€ì¥ í° ì°¨ì´ì ë“¤ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n### 1. ì•„í‚¤í…ì²˜ ì°¨ì´\n\n**JUnit4**:\n- ë‹¨ì¼ `jar` íŒŒì¼ë¡œ ì œê³µ\n- ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜\n\n**JUnit5**:\n- ëª¨ë“ˆí™”ëœ êµ¬ì¡°\n  - `JUnit Platform`: í…ŒìŠ¤íŠ¸ ì‹¤í–‰ì„ ìœ„í•œ ê¸°ë°˜\n  - `JUnit Jupiter`: ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ API\n  - `JUnit Vintage`: JUnit3, JUnit4 í˜¸í™˜ì„± ì§€ì›\n\n### 2. ì–´ë…¸í…Œì´ì…˜ ë³€ê²½\n\n| JUnit4 | JUnit5 | ì„¤ëª… |\n|--------|--------|------|\n| `@Before` | `@BeforeEach` | ê° í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ì „ì— ì‹¤í–‰ |\n| `@After` | `@AfterEach` | ê° í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ í›„ì— ì‹¤í–‰ |\n| `@BeforeClass` | `@BeforeAll` | í´ë˜ìŠ¤ì˜ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì „ì— ì‹¤í–‰ |\n| `@AfterClass` | `@AfterAll` | í´ë˜ìŠ¤ì˜ ëª¨ë“  í…ŒìŠ¤íŠ¸ í›„ì— ì‹¤í–‰ |\n| `@Ignore` | `@Disabled` | í…ŒìŠ¤íŠ¸ ë¹„í™œì„±í™” |\n| N/A | `@DisplayName` | í…ŒìŠ¤íŠ¸ì— ì‚¬ìš©ì ì •ì˜ ì´ë¦„ ë¶€ì—¬ |\n\n### 3. ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤\n\n**JUnit5**ì—ì„œ ì¶”ê°€ëœ ì£¼ìš” ê¸°ëŠ¥ë“¤:\n- **ì¤‘ì²© í…ŒìŠ¤íŠ¸**: `@Nested` ì–´ë…¸í…Œì´ì…˜\n- **íƒœê·¸ í•„í„°ë§**: `@Tag` ì–´ë…¸í…Œì´ì…˜\n- **íŒŒë¼ë¯¸í„°í™”ëœ í…ŒìŠ¤íŠ¸ ê°œì„ **: `@ParameterizedTest`, `@ValueSource`, `@CsvSource` ë“±\n- **í™•ì¥ ëª¨ë¸**: `@ExtendWith` ì‚¬ìš©\n- **ì¡°ê±´ë¶€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰**: `@EnabledOnOs`, `@EnabledIfSystemProperty` ë“±\n- **ì¸í„°í˜ì´ìŠ¤ ê¸°ë³¸ ë©”ì„œë“œë¡œ í…ŒìŠ¤íŠ¸ ì„ ì–¸ ì§€ì›**\n\n```kotlin\n// JUnit4 ì˜ˆì‹œ\n@Test\n@Category(SlowTests.class)\npublic void myTest() {\n    // í…ŒìŠ¤íŠ¸ ì½”ë“œ\n}\n\n// JUnit5 ì˜ˆì‹œ\n@Test\n@Tag(\"slow\")\n@DisplayName(\"ìƒ˜í”Œ í…ŒìŠ¤íŠ¸\")\nvoid myTest() {\n    // í…ŒìŠ¤íŠ¸ ì½”ë“œ\n}\n```\n\n## ì•ˆë“œë¡œì´ë“œì—ì„œì˜ JUnit4ì™€ JUnit5\n\nì•ˆë“œë¡œì´ë“œ í…ŒìŠ¤íŠ¸ í™˜ê²½ì€ ì£¼ë¡œ `JUnit4`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ë§ì€ ì‚¬ìš©í•´ë³´ì…¨ì„ë§Œí•œ ì•„ë˜ì˜ ì•ˆë“œë¡œì´ë“œ í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ì—¬ì „íˆ `JUnit4` ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.\n\n1. [Espresso](https://developer.android.com/training/testing/espresso?hl=en)\n2. [AndroidX Test APIs](https://developer.android.com/jetpack/androidx/releases/test?hl=en)\n3. [Mockito](https://site.mockito.org/)\n4. [PowerMock](https://github.com/powermock/powermock?tab=readme-ov-file)\b\n5. [Hamcrest](https://hamcrest.org/)\n\nì´ëŸ¬í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì€ ëŒ€ë¶€ë¶„ JUnit4ì˜ `@RunWith`, `@Rule` ë“±ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.\n\nìµœê·¼ì— íšŒì‚¬ì—ì„œ ìŠ¤í¬ë¦°ìƒ· í†µí•© í…ŒìŠ¤íŠ¸ êµ¬ì¶• ì‘ì—…ì„ ì§„í–‰í•˜ë‹¤ê°€, ê¸°ì¡´ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œë“¤ì´ `Junit5` ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ê³  ìˆì–´ì„œ JVM UI í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ [Robolectric](http://robolectric.org/)ì„ ì…‹ì—…í•˜ëŠ” ê³¼ì •ì—ì„œ ì—¬ëŸ¬ ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤.\n\n### Robolectric\n\nê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ìë©´, [Robolectric](http://robolectric.org/)ì€ ì•ˆë“œë¡œì´ë“œ UI í…ŒìŠ¤íŠ¸ë¥¼ JVM ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê°•ë ¥í•œ ë„êµ¬ì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì•„ì‰½ê²Œë„ `Robolectric`ì€ í˜„ì¬ê¹Œì§€ë„ `JUnit4` ê¸°ë°˜ì—ì„œë§Œ ë™ì‘í•©ë‹ˆë‹¤.\n\nì°¸ê³ ë¡œ, ì´ì™€ ê´€ë ¨í•œ ì˜¤í”ˆ ì´ìŠˆë„ ìˆìŠµë‹ˆë‹¤.\n![https://github.com/robolectric/robolectric/issues/3477](robolectric-junit5-support-issue.png)\n\n`Robolectric`ì˜ í•µì‹¬ ê¸°ëŠ¥ì€ JUnit4ì˜ `@RunWith` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì‘ë™í•˜ê³  ìˆê³ , ì•„ë˜ì˜ ì˜ˆì‹œì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```kotlin\n// Robolectric í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ\n@RunWith(RobolectricTestRunner::class)\nclass MyRobolectricTest {\n    @Test\n    fun testButton_click() {\n        val activity = Robolectric.setupActivity(MyActivity::class.java)\n        val button = activity.findViewById<Button>(R.id.my_button)\n        button.performClick()\n        // ê²€ì¦ ë¡œì§\n    }\n}\n```\n\n## JUnit5ë¥¼ ì•ˆë“œë¡œì´ë“œì— ì ìš©í•˜ê¸°\n\nGradle í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ `JUnit5`ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ `useJUnitPlatform()` êµ¬ì„±ì´ í•„ìš”í•©ë‹ˆë‹¤.\n\n![](use-junit-platform-description.png)\n\n```kotlin\n// build.gradle.kts\ntasks.withType<Test> {\n    useJUnitPlatform()\n}\n\ndependencies {\n    testImplementation(\"org.junit.jupiter:junit-jupiter-api:5.9.3\")\n    testRuntimeOnly(\"org.junit.jupiter:junit-jupiter-engine:5.9.3\")\n}\n```\n\nê·¸ë ‡ë‹¤ë©´ `JUnit5`ì™€ `Robolectric`ì„ í•¨ê»˜ ì‚¬ìš©í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?\n\nì•ì„œ ì„¤ëª…í–ˆë˜ `JUnit Vintage`ë¥¼ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.\n\n![https://junit.org/junit5/docs/current/user-guide/](junit-vintage-description.png)\n\n`JUnit Vintage`ëŠ” JUnit3ì™€ JUnit4 ê¸°ë°˜ì˜ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ í…ŒìŠ¤íŠ¸ ì—”ì§„ì„ ì œê³µí•´ì¤ë‹ˆë‹¤.\n\n```kotlin\n// build.gradle.kts\ndependencies {\n    testRuntimeOnly(\"org.junit.vintage:junit-vintage-engine:5.9.3\")\n}\n```\n\nì´ ë°©ë²•ìœ¼ë¡œ `JUnit4 + Robolectric í…ŒìŠ¤íŠ¸`ë¥¼ `JUnit5` í™˜ê²½ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n## ê²°ë¡ \n\nì•ˆë“œë¡œì´ë“œ ê°œë°œ ìƒíƒœê³„ì—ì„œëŠ” ë‹¹ë¶„ê°„ JUnit4, JUnit5 ë‘ ë²„ì „ì´ ê³µì¡´í•  ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. `Robolectric`ê³¼ ê°™ì€ ì¤‘ìš”í•œ ë„êµ¬ë“¤ì´ ì—¬ì „íˆ JUnit4ì— ì˜ì¡´í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, ì ì§„ì  ì „í™˜ ì ‘ê·¼ ë°©ì‹ì´ í˜„ì‹¤ì ì¼ ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n\n1. ìƒˆë¡œìš´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì— JUnit5 ì‚¬ìš©í•˜ê¸°\n2. UI ë° í†µí•© í…ŒìŠ¤íŠ¸ì—ëŠ” JUnit4 + Robolectric ìœ ì§€í•˜ê¸°\n3. JUnit Vintageë¥¼ í†µí•´ ë‘ í™˜ê²½ í†µí•©í•˜ê¸°\n4. (ì¤‘ìš”) ì»¤ë®¤ë‹ˆí‹°ì˜ ì§„í–‰ ìƒí™©ì„ ì£¼ì‹œí•˜ë©° ì ì°¨ì ìœ¼ë¡œ ì „í™˜ ê³„íš ì„¸ìš°ê¸°\n\n## ì°¸ê³ \n- https://junit.org/junit5/docs/5.1.0/release-notes/index.html#release-notes-5.0.0\n- https://github.com/robolectric/robolectric/issues/3477 \n- https://junit.org/junit5/docs/current/user-guide/\n- https://github.com/android/android-test/issues/409\n- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api\n- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-engine\n- https://mvnrepository.com/artifact/org.junit.vintage/junit-vintage-engine"},{"excerpt":"ì•ˆë“œë¡œì´ë“œ ì•±ì„ ê°œë°œí•˜ë‹¤ ë³´ë©´ UIëŠ” ì™„ë²½í•´ ë³´ì—¬ë„(ì ì–´ë„ í”„ë¡œë•íŠ¸ ë””ìì´ë„ˆë¶„ë“¤ê»˜ì„œ ìš”êµ¬í•˜ëŠ” ì‚¬í•­ë“¤ì„ ì „ë¶€ ë§Œì¡±í•˜ë”ë¼ë„?), ì‚¬ìš©ì ê²½í—˜(UX) ì¸¡ë©´ì—ì„œ ì‚¬ì†Œí•˜ì§€ë§Œ ì¹˜ëª…ì ì¸ ìš”ì†Œë“¤ì„ ê°„ê³¼í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤. íŠ¹íˆ í”¼ì¸ ì˜ ë²•ì¹™(Fittsâ€™ Law)ì„ ì´í•´í•˜ë©´ ë²„íŠ¼ í„°ì¹˜ ì˜ì—­, ì œìŠ¤ì²˜ ë™ì‘ ë“±ì—ì„œ í”íˆ ë†“ì¹˜ëŠ” UX í¬ì¸íŠ¸ë¥¼ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” í”¼ì¸ â€¦","fields":{"slug":"/fitts-law/"},"frontmatter":{"date":"March 04, 2025","title":"ì•ˆë“œë¡œì´ë“œ ê°œë°œìê°€ ë†“ì¹˜ê¸° ì‰¬ìš´ UX (feat. í”¼ì¸ ì˜ ë²•ì¹™)","tags":["ux"]},"rawMarkdownBody":"\nì•ˆë“œë¡œì´ë“œ ì•±ì„ ê°œë°œí•˜ë‹¤ ë³´ë©´ UIëŠ” ì™„ë²½í•´ ë³´ì—¬ë„(ì ì–´ë„ í”„ë¡œë•íŠ¸ ë””ìì´ë„ˆë¶„ë“¤ê»˜ì„œ ìš”êµ¬í•˜ëŠ” ì‚¬í•­ë“¤ì„ ì „ë¶€ ë§Œì¡±í•˜ë”ë¼ë„?), ì‚¬ìš©ì ê²½í—˜(UX) ì¸¡ë©´ì—ì„œ ì‚¬ì†Œí•˜ì§€ë§Œ ì¹˜ëª…ì ì¸ ìš”ì†Œë“¤ì„ ê°„ê³¼í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤. íŠ¹íˆ **í”¼ì¸ ì˜ ë²•ì¹™(Fittsâ€™ Law)**ì„ ì´í•´í•˜ë©´ ë²„íŠ¼ í„°ì¹˜ ì˜ì—­, ì œìŠ¤ì²˜ ë™ì‘ ë“±ì—ì„œ í”íˆ ë†“ì¹˜ëŠ” UX í¬ì¸íŠ¸ë¥¼ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” í”¼ì¸ ì˜ ë²•ì¹™ ê°œë…ë¶€í„° ì‹œì‘í•´, ì•ˆë“œë¡œì´ë“œ ê°œë°œìê°€ ì±™ê²¨ì•¼ í•  UX ìš”ì†Œë“¤ê³¼ ì‹¤ì œ ê°œì„  ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n### í”¼ì¸ ì˜ ë²•ì¹™?\n![](fitts_law.png)\n\ní”¼ì¸ ì˜ ë²•ì¹™ì€ ê°„ë‹¨íˆ ë§í•´ *â€œëª©í‘œ(target)ê¹Œì§€ì˜ ê±°ë¦¬(D)ê°€ ë©€ìˆ˜ë¡, ê·¸ë¦¬ê³  ëª©í‘œ í¬ê¸°(W)ê°€ ì‘ì„ìˆ˜ë¡ ë„ë‹¬(í´ë¦­/í„°ì¹˜) ì‹œê°„ì´ ëŠ˜ì–´ë‚œë‹¤â€*ëŠ” ì¸ê°„ ë™ì‘ ëª¨ë¸ì…ë‹ˆë‹¤. ì›ë˜ëŠ” ë§ˆìš°ìŠ¤ ì»¤ì„œ ê°™ì€ í¬ì¸í„° ì´ë™ì— ëŒ€í•œ ì—°êµ¬ì˜€ì§€ë§Œ, í„°ì¹˜ìŠ¤í¬ë¦° í™˜ê²½ì—ë„ ê·¸ëŒ€ë¡œ ì‘ìš©ë©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ í™”ë©´ì—ì„œ ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œ ê±¸ë¦¬ëŠ” ì‹œê°„ì€ ë²„íŠ¼ì˜ í¬ê¸°ì™€ í˜„ì¬ ì†ê°€ë½ ìœ„ì¹˜ë¡œë¶€í„°ì˜ ê±°ë¦¬ì— ì˜í–¥ì„ ë°›ìŠµë‹ˆë‹¤.\n\n\n![](fitts_law_2.png)\n> í´ë¦­/í„°ì¹˜ ì‹œê°„ TëŠ” ê±°ë¦¬(D)ì™€ í¬ê¸°(W)ì˜ í•¨ìˆ˜ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Target Aì™€ Bì˜ í¬ê¸°ê°€ ë™ì¼í•˜ë‹¤ë©´, ì†ê°€ë½/í¬ì¸í„°ì—ì„œ ê°€ê¹Œìš´ Aë¥¼ ë” ë¹¨ë¦¬ ëˆ„ë¥¼ ìˆ˜ ìˆê³ , Target Cì²˜ëŸ¼ í¬ê¸°ê°€ ì‘ì€ ê²½ìš° ê°€ê¹Œì´ ìˆì–´ë„ ì‹œê°„ì´ ë” ê±¸ë¦½ë‹ˆë‹¤.\n\nëª¨ë°”ì¼ì—ì„œëŠ” í”¼ì¸ ì˜ ë²•ì¹™ì´ ë”ìš± **ì¤‘ìš”**í•©ë‹ˆë‹¤. ì†ê°€ë½ì´ ì§ì ‘ í™”ë©´ì„ í„°ì¹˜í•˜ëŠ” ë°©ì‹ì´ê¸° ë•Œë¬¸ì¸ë°, ë§ˆìš°ìŠ¤ í¬ì¸í„°ëŠ” í™”ë©´ì˜ ì‘ì€ ì˜ì—­ë„ ì •í™•íˆ ê°€ë¦¬í‚¬ ìˆ˜ ìˆì§€ë§Œ, ì†ê°€ë½ì€ í¬ê¸°ë„ í¬ê³  í„°ì¹˜í•  ë•Œ í™”ë©´ì„ ê°€ë ¤ì„œ ì •êµí•¨ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤. ì‹¤ì œë¡œë„ ì œ ì—„ì§€ì†ê°€ë½ì´ ë‚¨ë“¤ë³´ë‹¤ êµµì€ í¸ì´ë¼ í„°ì¹˜í•  ë•Œ ë²„íŠ¼ì´ ì‘ìœ¼ë©´ í„°ì¹˜í•˜ê¸°ê°€ ë¶ˆí¸í–ˆë˜ ê²½í—˜ì´ ë§ì•˜ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´, í„°ì¹˜ëŠ” ë§ˆìš°ìŠ¤ë³´ë‹¤ `ì •ë°€ë„ê°€ ë‚®ì€ ì…ë ¥ ìˆ˜ë‹¨`ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ì•ˆë“œë¡œì´ë“œ UIë¥¼ ê°œë°œí•  ë•Œ í„°ì¹˜ ëŒ€ìƒì€ ì¶©ë¶„íˆ í¬ê²Œ, ê·¸ë¦¬ê³  ì¡°ì‘ ì˜ì—­ì—ì„œ ë„ˆë¬´ ë©€ë¦¬ ë–¨ì–´ì ¸ ìˆì§€ ì•Šê²Œ ë°°ì¹˜í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. `í”¼ì¸ ì˜ ë²•ì¹™`ì— ë”°ë¥´ë©´ ì‘ì€ ë²„íŠ¼ì´ë‚˜ êµ¬ì„ì§„ ìœ„ì¹˜ì˜ ë©”ë‰´ëŠ” ì‚¬ìš©ìê°€ ëˆ„ë¥´ê¸° ì–´ë µê³  ì‹œê°„ë„ ë” ê±¸ë¦¬ë¯€ë¡œ, UXë¥¼ í•´ì¹˜ê²Œ ë©ë‹ˆë‹¤.\n\në˜ í•œ ê°€ì§€, í„°ì¹˜ ëª©í‘œ ì‚¬ì´ì˜ ê°„ê²©ë„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. ë²„íŠ¼ë“¤ì´ ë„ˆë¬´ ì´˜ì´˜í•˜ê±°ë‚˜ ì‘ìœ¼ë©´ ì‚¬ìš©ìëŠ” ì›í•˜ëŠ” ëŒ€ìƒì„ ëˆ„ë¥´ê¸° í˜ë“¤ê³ , ì˜ëª» ëˆŒëŸ¬ ì˜¤ë™ì‘(ì˜ëª»ëœ ëŒ€ìƒ í„°ì¹˜)í•  í™•ë¥ ì´ ë†’ì•„ì§‘ë‹ˆë‹¤. ì´ëŠ” ì‚¬ìš©ìê°€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¶ˆí¸í•˜ê²Œ ëŠë¼ê²Œ ë§Œë“œëŠ” ìš”ì¸ì´ ë©ë‹ˆë‹¤.\n\n### ê°œë°œì—ëŠ” ì–´ë–»ê²Œ ì ìš©í•´ë³¼ê¹Œ?\n\nAndroid UIë¥¼ ê°œë°œí•  ë•Œ, **í´ë¦­ ë¦¬ìŠ¤ë„ˆ(OnClickListener)**ë¥¼ UI ìš”ì†Œì˜ íŠ¹ì • ë·°ì—ë§Œ ê±¸ì–´ë‘ê³ , ì •ì‘ ì‚¬ìš©ìê°€ ëˆ„ë¥¼ ìˆ˜ ìˆëŠ” ì‹¤ì œ ì˜ì—­ì€ ì•„ì£¼ ì¢ê²Œ ë‚¨ì•„ìˆëŠ” ê²½ìš°ê°€ í”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ì „ì²´ë¥¼ ëˆŒëŸ¬ì•¼ í•  ê²ƒ ê°™ì§€ë§Œ, ê°œë°œìê°€ ì•„ì´ì½˜ì´ë‚˜ í…ìŠ¤íŠ¸ ë·°ì—ë§Œ ë¦¬ìŠ¤ë„ˆë¥¼ ë‹¬ë©´ ì‚¬ìš©ìëŠ” ë¹ˆ ê³µê°„ì„ ëˆŒë €ì„ ë•Œ ë°˜ì‘ì´ ì—†ì–´ ë‹¹í™©í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ëŠ” í”¼ì¸ ì˜ ë²•ì¹™ ì¸¡ë©´ì—ì„œ ë³´ë©´ ëª©í‘œ ì˜ì—­ì´ ë¶ˆí•„ìš”í•˜ê²Œ ì‘ì•„ì§„ ì‚¬ë¡€ì…ë‹ˆë‹¤.\n\nì´ëŸ° ë¬¸ì œëŠ” í„°ì¹˜ ì˜ì—­ì„ í™•ì¥í•¨ìœ¼ë¡œì¨ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•ˆë“œë¡œì´ë“œ Material Design ê°€ì´ë“œë¼ì¸ì—ì„œë„ *â€œì•„ì´ì½˜ì´ 24dpë¡œ ë³´ì—¬ë„ ì£¼ë³€ íŒ¨ë”©ì„ í•©ì³ ì‹¤ì œ í„°ì¹˜ ì˜ì—­ì€ 48x48dpë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤â€*ê³  ê¶Œì¥í•©ë‹ˆë‹¤. ë˜í•œ `android:padding`ì´ë‚˜ `TouchDelegate` ë“±ì„ í™œìš©í•´ ë²„íŠ¼ ì£¼ìœ„ì˜ íˆ¬ëª…í•œ ê³µê°„ë„ í´ë¦­ì„ ê°ì§€í•˜ë„ë¡ ê°œë°œí•˜ëŠ” ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤. ì „ì²´ ë ˆì´ì•„ì›ƒì„ í´ë¦­ ê°€ëŠ¥í•˜ê²Œ ì˜µì…˜ì„ ì£¼ê±°ë‚˜, í„°ì¹˜ ì˜ì—­ì„ ë„“íˆëŠ” ê²ƒë„ ë°©ë²•ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### í–…í‹± í”¼ë“œë°±(Haptic Feedback)ë„ ìˆë‹¤\n\nì•±ì„ ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ ì§„ë™ í”¼ë“œë°±ì„ í†µí•´ ëˆŒë¦¼ì´ë‚˜ ë™ì‘ ì™„ë£Œë¥¼ ëŠë‚„ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ `í–…í‹± í”¼ë“œë°±`ì¸ë°ìš”, ì €ëŠ” ì´ì „ì— ì°½ì—…ì„ í•˜ì—¬ [Preat](https://play.google.com/store/apps/details?id=com.freetreechair.preat&pli=1)ì´ë¼ëŠ” ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•  ë•Œ, ì´ë¥¼ êµ¬í˜„í–ˆì—ˆë˜ ê²½í—˜ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ê°„í˜¹ê°€ë‹¤ê°€ ê¸°ëŠ¥ êµ¬í˜„ì— ëª°ë‘í•˜ë‹¤ ë³´ë©´ ì´ëŸ¬í•œ í–…í‹± í”¼ë“œë°±ì„ ìŠëŠ” ê²½ìš°ë„ ë§ìŠµë‹ˆë‹¤. ê°€ë ¹ ë¡±í”„ë ˆìŠ¤(ê¸¸ê²Œ ëˆ„ë¥´ê¸°) ë™ì‘ì´ë‚˜ ë“œë˜ê·¸ ì•¤ ë“œë¡­, ë˜ëŠ” ìŠ¤ì™€ì´í”„ ì œìŠ¤ì²˜ ë“±ì—ì„œ ì§§ì€ ì§„ë™ì„ ì£¼ë©´ ì‚¬ìš©ìëŠ” `â€œì§€ê¸ˆ ë™ì‘ì´ ì¸ì‹ëêµ¬ë‚˜â€`ë¥¼ ì§ê°ì ìœ¼ë¡œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì•ˆë“œë¡œì´ë“œì—ì„œëŠ” Vibrator í´ë˜ìŠ¤ë¥¼ í†µí•´ ì‰½ê²Œ `í–…í‹±`ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```kotlin\nColumn(\n    modifier = Modifier.fillMaxSize(),\n    horizontalAlignment = Alignment.CenterHorizontally,\n    verticalArrangement = Arrangement.Center\n) {\n    // Vibration Controller\n    val vibrator = getSystemService(Context.VIBRATOR_SERVICE) as Vibrator\n\n    // Vibration Button - OneShot\n    Button(onClick = {\n        // Safely cancel any ongoing vibrations\n        vibrator.cancel()\n\n        // Handling vibrations for Android 8.0 (Oreo) and above\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {\n            val effect = VibrationEffect.createOneShot(100, VibrationEffect.DEFAULT_AMPLITUDE)\n            vibrator.vibrate(effect)\n        } else {\n            // Handling vibrations for devices below Android 8.0\n            vibrator.vibrate(100)\n        }\n    }) {\n        Text(text = \"Vibration Button OneShot\")\n    }\n\n    // Vibration Button - Predefined Effect (Android 10 or above)\n    Button(onClick = {\n        // Safely cancel any ongoing vibrations\n        vibrator.cancel()\n\n        // Checking for Android 10 or above\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {\n            val effect = VibrationEffect.createPredefined(VibrationEffect.EFFECT_CLICK)\n            vibrator.vibrate(effect)\n        } else {\n            // Handling vibrations for devices below Android 10\n            vibrator.vibrate(100)\n        }\n    }) {\n        Text(text = \"Vibration Button Predefined\")\n    }\n}\n```\n\n> ê°œì¸ì ìœ¼ë¡œ ì§„ë™ì„ ë„ˆë¬´ ì¦ê²Œ í˜¹ì€ ê°•í•˜ê²Œ ì£¼ë©´ ì˜¤íˆë ¤ ê±°ìŠ¬ë¦¬ë‹¤ê³  ëŠë‚€ ê²½í—˜ì´ ìˆì–´, ìƒí™©ì— ë§ëŠ” íŒ¨í„´ê³¼ ì„¸ê¸°ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n\n### Android Predictive Back APIëŠ” ë˜ ë­”ë°?\n\nì•ˆë“œë¡œì´ë“œ 13ë¶€í„° ë„ì…ëœ `Predictive Back ì œìŠ¤ì²˜(ì˜ˆì¸¡ì„± ë’¤ë¡œ ê°€ê¸°)`ëŠ” UX í–¥ìƒì„ ìœ„í•œ ìƒˆë¡œìš´ ì‹œìŠ¤í…œ ê¸°ëŠ¥ì…ë‹ˆë‹¤. `Predictive Back`ì„ ì ìš©í•˜ë©´ ì‚¬ìš©ìê°€ ë’¤ë¡œ ìŠ¤ì™€ì´í”„ ì œìŠ¤ì²˜ë¥¼ ì‹œì‘í•˜ëŠ” ìˆœê°„ ë‹¤ìŒ í™”ë©´ì„ ë¯¸ë¦¬ ë³´ì—¬ì£¼ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ìëŠ” ì´ ì œìŠ¤ì²˜ë¥¼ ê³„ì† í•˜ë©´ ì–´ë””ë¡œ ê°ˆì§€ ë¯¸ë¦¬ í™•ì¸í•˜ê³  ê²°ì •í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\n\n![](predictive-back-nav-home.gif)\n\nAndroid 15ë¶€í„°ëŠ” ê°œë°œì ì˜µì…˜ ì„¤ì • ì—†ì´ ë””í´íŠ¸ë¡œ ë³¼ ìˆ˜ ìˆê³ , [AndroidX Activity 1.6.0-alpha05](https://developer.android.com/jetpack/androidx/releases/activity#1.6.0-alpha05) ì´í›„ì˜ ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³ , `Manifest`íŒŒì¼ì˜ `application` íƒœê·¸ì— `android:enableOnBackInvokedCallback=â€œtrueâ€`ë¥¼ ì ìš©í•˜ë©´ ì‹œìŠ¤í…œì´ ë’¤ë¡œ ê°€ê¸° ì œìŠ¤ì²˜ë¥¼ ë¯¸ë¦¬ ì•Œê³  ì• ë‹ˆë©”ì´ì…˜ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\n\n```xml\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\">\n    ...\n    <application\n        ...\n        android:enableOnBackInvokedCallback=\"true\">\n        ...\n    </application>\n\n</manifest>\n```\n\n> ë§Œì•½ `android:enableOnBackInvokedCallback` í”Œë˜ê·¸ë¥¼ `false`ë¡œ ì„¤ì •í•´ë‘ë©´, ì‹œìŠ¤í…œì€ `OnBackInvokedCallback` êµ¬í˜„ë¶€ì—ì„œ í˜¸ì¶œí•˜ëŠ” ë™ì‘ì„ ëª¨ë‘ ë¬´ì‹œí•˜ê²Œ ë©ë‹ˆë‹¤. ëŒ€ì‹  ì—¬ì „íˆ í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•´ ê¸°ì¡´ì˜ `onBackPressed API`ë¥¼ í˜¸ì¶œí•˜ë¯€ë¡œ, `OnBackPressedCallback`ì€ ê³„ì† ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ê²Œ ë©ë‹ˆë‹¤.\n\në§Œì•½ ìœ ì €ì˜ Back ì œìŠ¤ì²˜ë¡œ ê³§ë°”ë¡œ ì´ì „ í™”ë©´ì„ ë³´ì—¬ì£¼ê³  ì‹¶ì§€ ì•Šì„ ë•Œ(ì˜ˆë¥¼ ë“¤ì–´, ìœ ì €ì—ê²Œ ì •ë§ë¡œ ë’¤ë¡œê°€ê³  ì‹¶ì€ì§€ ë¬¼ì–´ë³´ëŠ” ë‹¤ì´ì–¼ë¡œê·¸ë¥¼ ë…¸ì¶œí•˜ê³  ì‹¶ì„ ë•Œ)ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤.\n```kotlin\nprivate val onBackPressedCallback: OnBackPressedCallback = object : OnBackPressedCallback(true) {\n    override fun handleOnBackPressed() {\n        //your custom onBackPressed logic\n        showConfirmationDialog()\n    }\n}\n```\n\nê·¸ë¦¬ê³ , ì´ callbackì„ `OnBackPressedDispatcher`ì— ì¶”ê°€í•˜ë©´ ëì…ë‹ˆë‹¤.\n```kotlin\nonBackPressedDispatcher.addCallback(onBackPressedCallback)\n```\n\në” ìì„¸íˆ ì ìš©í•´ë³´ê³  ì‹¶ë‹¤ë©´, ì•„ë˜ ì½”ë“œë© ë§í¬ë“¤ì„ ì°¸ê³ í•˜ë©´ ë„ì›€ì´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n- https://codelabs.developers.google.com/handling-gesture-back-navigation\n- https://developer.android.com/guide/navigation/custom-back/predictive-back-gesture\n\n### ê²°ë¡ \n\nì§€ê¸ˆê¹Œì§€ `í”¼ì¸ ì˜ ë²•ì¹™`ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ëª…í•œ UX ìš”ì†Œë“¤ì€ ê°œì„ ì€ ê²°êµ­ ì‚¬ìš©ìë¥¼ ìœ„í•œ ë°°ë ¤ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë²„íŠ¼ì˜ í„°ì¹˜ ì˜ì—­ì„ ë„“íˆê³ , ì†ê°€ë½ì´ ë‹¿ëŠ” ë²”ìœ„ë¥¼ ê³ ë ¤í•´ ë°°ì¹˜í•˜ëŠ” ë“± ê°œë°œ ë‹¨ê³„ì—ì„œ ì¡°ê¸ˆë§Œ ì‹ ê²½ ì“°ë©´ ì‚¬ìš©ì ë¶ˆí¸ì„ í¬ê²Œ ì¤„ì¼ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.\n\níŠ¹íˆ ì•ˆë“œë¡œì´ë“œ ì•±ì€ ë‹¤ì–‘í•œ ê¸°ê¸° í™”ë©´ í¬ê¸°ì™€ ì‚¬ìš© í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ, ë³´í¸ì ì¸ UX ì›ì¹™ì„ ì§€í‚¤ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ê°œë°œìê°€ UXë¥¼ ë¨¼ì € ê³ ë ¤í•œë‹¤ë©´ ê¸°íš ë‹¨ê³„ì—ì„œë¶€í„° ì™„ì„±ë„ ë†’ì€ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê³ , íšŒì‚¬ì—ì„œ ê¸°íšìë‚˜ ë””ìì´ë„ˆì™€ì˜ ì˜ì‚¬ì†Œí†µë„ ì›í™œí•´ì§ˆ ìˆ˜ ìˆì„ ê²ƒì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. íŠ¹íˆ ì €ë„ ìì£¼ ë†“ì¹˜ëŠ” ë¶€ë¶„ì´ê¸°ëŠ” í•˜ì§€ë§Œ, ì•ˆë“œë¡œì´ë“œ ê°œë°œìë¡œì„œ UI ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ê³¼ì—° ë‚´ê°€ `Material Designì´ë‚˜ ì•ˆë“œë¡œì´ë“œ ì ‘ê·¼ì„± ê°€ì´ë“œ ë“± ê¶Œì¥ì‚¬í•­ì„ ë”°ë¥´ê³  ìˆëŠ”ê°€?` ë¼ê³  ëŠì„ì—†ì´ ë˜ë¬»ëŠ” ìì„¸ê°€ í•„ìš”í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n\nì‘ì€ ë²„íŠ¼ í•˜ë‚˜, ì§„ë™ í•œ ë²ˆì˜ ì°¨ì´ê°€ ëª¨ì—¬ ì•±ì˜ ì„±ê³µì„ ê²°ì •ì§“ëŠ” UXë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ë¯¿ìœ¼ë©°, ë†“ì¹˜ê¸° ì‰¬ìš´ UX ìš”ì†Œë“¤ì„ ì±™ê¸°ëŠ” ìŠµê´€ì´ AI ì‹œëŒ€ì˜ í”„ë¡œë•íŠ¸ ì—”ì§€ë‹ˆì–´ë¡œì„œ ê³§ ì‚¬ìš©ìì˜ í–‰ë³µì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.\n\n### ì°¸ê³  ìë£Œ\n- [[Accessibility] Why the recommended touch target size on android devices is 48 x 48 dp?](https://github.com/material-components/material-components-android/issues/1279)\n- [Android Vibrations in Jetpack Compose](https://medium.com/@EazSoftware/everything-you-need-to-know-about-android-vibrations-cf8759b15121)\n- [ë’¤ë¡œ íƒìƒ‰ ì˜ˆì¸¡ ë™ì‘ ì§€ì› ì¶”ê°€](https://developer.android.com/guide/navigation/custom-back/predictive-back-gesture?hl=ko)\n- [What Is Predictive Back Gesture?](https://pl-coding.com/2024/10/26/predictive-back-support/#:~:text=You%20can%20see%20predictive%20back,the%20predictive%20back%20gesture%20animations)\n- [Predictive Back Gesture On Android](https://adiandrea.medium.com/predictive-back-gesture-on-android-31610b1b58b7)"},{"excerpt":"AWS AmplifyëŠ” ëª¨ë°”ì¼ ë° í”„ëŸ°íŠ¸ì—”ë“œ ê°œë°œìê°€ AWSì—ì„œ ì•ˆì „í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ í’€ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê³  ë°°í¬í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ì œí’ˆì…ë‹ˆë‹¤. íšŒì‚¬ì—ì„œ ì„œë¹„ìŠ¤í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ì—ì„œ S3ë¡œ ë¡œê·¸ íŒŒì¼ì„ ì£¼ê¸°ì ìœ¼ë¡œ ì—…ë¡œë“œí•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³  ê¾¸ì¤€íˆ ëª¨ë‹ˆí„°ë§í•˜ì˜€ëŠ”ë°, ì—¬ëŸ¬ Android ê¸°ê¸°ì—ì„œ java.lang.OutOfMemoryError ì˜¤ë¥˜â€¦","fields":{"slug":"/aws-amplify/"},"frontmatter":{"date":"February 25, 2025","title":"AWS Amplify Android ì˜¤í”ˆì†ŒìŠ¤ ê¸°ì—¬í•˜ê¸°","tags":["opensource"]},"rawMarkdownBody":"\nAWS AmplifyëŠ” ëª¨ë°”ì¼ ë° í”„ëŸ°íŠ¸ì—”ë“œ ê°œë°œìê°€ AWSì—ì„œ ì•ˆì „í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ í’€ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê³  ë°°í¬í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ì œí’ˆì…ë‹ˆë‹¤. íšŒì‚¬ì—ì„œ ì„œë¹„ìŠ¤í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ì—ì„œ S3ë¡œ ë¡œê·¸ íŒŒì¼ì„ ì£¼ê¸°ì ìœ¼ë¡œ ì—…ë¡œë“œí•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³  ê¾¸ì¤€íˆ ëª¨ë‹ˆí„°ë§í•˜ì˜€ëŠ”ë°, ì—¬ëŸ¬ Android ê¸°ê¸°ì—ì„œ [java.lang.OutOfMemoryError](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html) ì˜¤ë¥˜ê°€ ë°˜ë³µì ìœ¼ë¡œ ë°œìƒí•˜ëŠ” ê²ƒì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.\n\n### ì›ì¸ì„ ë¶„ì„í•´ë³´ì\nìˆ˜ì§‘ëœ í¬ë˜ì‹œ ë¦¬í¬íŠ¸ë¥¼ ìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì•˜ìŠµë‹ˆë‹¤.\n```text\nFatal Exception: java.lang.OutOfMemoryError: Failed to allocate a 8388620 byte allocation with 8388608 free bytes and 19MB until OOM\n       at java.util.IdentityHashMap.resize(IdentityHashMap.java:476)\n       at java.util.IdentityHashMap.put(IdentityHashMap.java:452)\n       ...\n       at com.amplifyframework.storage.s3.transfer.TransferWorkerObserver$attachObserver$2.invokeSuspend(TransferWorkerObserver.kt:199)\n```\n\n[TransferWorkerObserver](https://github.com/aws-amplify/amplify-android/blob/main/aws-storage-s3/src/main/java/com/amplifyframework/storage/s3/transfer/TransferWorkerObserver.kt) í´ë˜ìŠ¤ì—ì„œ ë™ì¼í•œ ì „ì†¡ íƒœê·¸ì— ëŒ€í•´ `LiveData.observeForever()`ê°€ ì¤‘ë³µ í˜¸ì¶œë˜ë©°, ì—¬ëŸ¬ ê´€ì°°ìê°€ ë“±ë¡ëœ ê²ƒìœ¼ë¡œ ë³´ì˜€ê³ , ì´ëŠ” `LiveData` ë‚´ë¶€ì˜ [IdentityHashMap](https://docs.oracle.com/javase/8/docs/api/java/util/IdentityHashMap.html)ì´ ê³¼ë„í•˜ê²Œ ì»¤ì ¸ ë©”ëª¨ë¦¬ í• ë‹¹ì— ì‹¤íŒ¨í•˜ê²Œ ë§Œë“¤ê³ , íŠ¹íˆ `Room` ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ [InvalidationTracker](https://developer.android.com/reference/androidx/room/InvalidationTracker)ì™€ ì—°ê³„ëœ `LiveData` ì‚¬ìš©ìœ¼ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë” ì¦ê°€í•œ ê²ƒìœ¼ë¡œ íŒë‹¨í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n### ì´ìŠˆ ë“±ë¡í•˜ê¸°\nì €ëŠ” ë¨¼ì € ì´ ë¬¸ì œë¥¼ ê³µìœ í•˜ê¸° ìœ„í•´ í…œí”Œë¦¿ì— ë§ì¶”ì–´ [ì´ìŠˆ](https://github.com/aws-amplify/amplify-android/issues/2840)ë¥¼ ë“±ë¡í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.\n\në‹¤ë§Œ, **ë³´ì•ˆìƒ** íšŒì‚¬ ì½”ë“œë¥¼ ì „ë¶€ ìŠ¤ë‹ˆí«ì— ì²¨ë¶€í•  ìˆ˜ëŠ” ì—†ì—ˆê¸° ë•Œë¬¸ì— ë¯¼ê°í•œ ì½”ë“œëŠ” ì „ë¶€ ì œê±°í•˜ê³  í•µì‹¬ ë¡œì§ë§Œ ë‹¤ì‹œ ì¬ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ìŠˆë€ì— ì²¨ë¶€í•œ ì½”ë“œ ìŠ¤ë‹ˆí«ì€ ë‹¤ìŒê³¼ ê°™ì•˜ìŠµë‹ˆë‹¤.\n\n```kotlin\n@HiltWorker\nclass LogUploadWorker @AssistedInject constructor(\n    @Assisted private val appContext: Context,\n    @Assisted workerParams: WorkerParameters,\n    @Dispatcher(IO) private val ioDispatcher: CoroutineDispatcher\n) : CoroutineWorker(appContext, workerParams) {\n\n    override suspend fun getForegroundInfo(): ForegroundInfo =\n        appContext.logSyncForegroundInfo()\n\n    override suspend fun doWork(): Result = withContext(ioDispatcher) {\n        try {\n            val externalFilesDirPath = inputData.getString(\"externalFilesDirPath\")\n            val externalFilesDir = externalFilesDirPath?.let { File(it) }\n            if (externalFilesDir != null && externalFilesDir.exists()) {\n                uploadLogFiles(externalFilesDir)\n            }\n        } catch (e: Exception) {\n            Timber.e(\"Log upload exception: ${e.message}\")\n            Result.retry()\n        }\n        Result.success()\n    }\n\n    @OptIn(ExperimentalCoroutinesApi::class, FlowPreview::class)\n    private suspend fun uploadLogFiles(externalFilesDir: File) {\n        val curFiles = externalFilesDir.listFiles()?.filter { file ->\n            System.currentTimeMillis() - file.lastModified() < TWO_WEEK_TIME_MILLIS\n        }?.sortedByDescending { it.lastModified() }\n\n        if (curFiles.isNullOrEmpty()) {\n            Timber.i(\"No log files or directory found.\")\n            return\n        }\n        \n        val environmentPrefix = if (BuildConfig.DEBUG) \"debug\" else \"release\"\n        val dateFormat = SimpleDateFormat(\"yyyy-MM-dd\", Locale.getDefault())\n\n        curFiles.forEach { file ->\n            val date = dateFormat.format(Date(file.lastModified()))\n            val fileIndex = file.name.substringBefore(\"_logs.txt\").takeLastWhile { it.isDigit() }\n            val key = \"$environmentPrefix/sample/$date/log$fileIndex.txt\"\n\n            try {\n                val result = Amplify.Storage.uploadFile(\n                    StoragePath.fromString(\"public/$key\"),\n                    file\n                ).result()\n                Timber.i(\"Log file upload successful: ${result.path}\")\n            } catch (error: Exception) {\n                Timber.e(\"Log file upload failed: ${error.message} - ${error.cause}\")\n            }\n        }\n    }\n\n    companion object {\n        private const val TWO_WEEK_TIME_MILLIS = 14 * 24 * 60 * 60 * 1000L\n\n        fun startUpUploadWork(\n            externalFilesDirPath: File?\n        ) = PeriodicWorkRequestBuilder<LogUploadWorker>(\n            1, TimeUnit.HOURS,\n            5, TimeUnit.MINUTES\n        )\n            .setConstraints(LogSyncConstraints)\n            .setBackoffCriteria(\n                BackoffPolicy.LINEAR,\n                MIN_BACKOFF_MILLIS,\n                TimeUnit.MILLISECONDS\n            )\n            .setInputData(\n                Data.Builder()\n                    .putString(\"externalFilesDirPath\", externalFilesDirPath?.absolutePath)\n                    .build()\n            )\n            .build()\n    }\n}\n```\n\nê°„ë‹¨í•˜ê²Œ ìœ„ ìŠ¤ë‹ˆí«ì˜ ë¡œì§ì„ ì„¤ëª…í•˜ë©´, ë¨¼ì € ë¡œê·¸ íŒŒì¼ ë””ë ‰í„°ë¦¬ ê²½ë¡œë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒŒì¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , **2ì£¼** ì´ë‚´ì— ìˆ˜ì •ëœ íŒŒì¼ë“¤ì„ í•„í„°ë§í•˜ë©°, ìµœê·¼ ìˆ˜ì •ëœ ìˆœì„œë¡œ ì •ë ¬í•œ ë’¤, ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œì—ëŠ” `ì„ í˜• ì¬ì‹œë„` ì •ì±…ì„ ë”°ë¥´ë„ë¡ ì„¤ì •í•´ì£¼ì—ˆê³ , ê° íŒŒì¼ì— ëŒ€í•´ `ë¹Œë“œíƒ€ì…`ì— ë”°ë¥¸ ì •ë³´ì™€, íŒŒì¼ì˜ ìˆ˜ì • ë‚ ì§œ, íŒŒì¼ ì´ë¦„ì˜ ì¸ë±ìŠ¤ë¥¼ ì¡°í•©í•˜ì—¬ AWS S3ì— ì €ì¥í•  í‚¤ë¥¼ êµ¬ì„±í•˜ê³ , ì´í›„ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ê·¸ ê²°ê³¼ë¥¼ Timber ë¡œê·¸ë¡œ ë‚¨ê¸°ëŠ” íë¦„ì…ë‹ˆë‹¤. ì´ ì‘ì—…ì€ `ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì‘ì—…`ì— í•´ë‹¹í•˜ë¯€ë¡œ [Workmanager](https://developer.android.com/topic/libraries/architecture/workmanager?hl=ko)ì˜ [PeriodicWorkRequest.Builder](https://developer.android.com/reference/androidx/work/PeriodicWorkRequest.Builder)ë¥¼ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n![](aws-amplify-issue-comment.png)\n\nì´í›„ í•´ë‹¹ ì´ìŠˆë€ì˜ ì½”ë©˜íŠ¸ë¥¼ í†µí•´ ë©”ì¸í…Œì´ë„ˆë¶„ë“¤ê³¼ ì´ìŠˆì˜ ë°œìƒ ë¹ˆë„ì™€ ë¬¸ì œ ë°œìƒ ê¸°ê¸°ì˜ ìŠ¤í™ ì •ë³´ë“¤ì„ ìš”ì²­ë°›ì•˜ê³ , ë‹¹ì‹œì—ëŠ” [aws-amplify/amplify-android](https://github.com/aws-amplify/amplify-android) ë¼ì´ë¸ŒëŸ¬ë¦¬ ìì²´ì˜ ë¬¸ì œë¼ê¸°ë³´ë‹¤ëŠ” `ë‚´ê°€ êµ¬í˜„í•œ ì½”ë“œì— ë¬¸ì œê°€ ìˆì—ˆë‚˜?`, `OOMì´ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ë” ìµœì í™” í• ìˆ˜ëŠ” ì—†ëŠ”ê°€?`ë¼ê³  ê³ ë¯¼ì„ í•˜ì˜€ê³ , ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì•„ë˜ì˜ ê°œì„ ì‘ì—…ë“¤ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.\n\n- ë¡œê·¸ íŒŒì¼ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¦‰ì‹œ ëª¨ë‘ ë©”ëª¨ë¦¬ì— ë¡œë“œí•˜ì§€ ì•Šê³ , í•„ìš”í•œ ì‹œì ì—ë§Œ File ê°ì²´ë¥¼ ìƒì„±í•˜ë„ë¡ ê°œì„ í•˜ê¸°\n- 14ì¼ ì´ìƒëœ ì˜¤ë˜ëœ ë¡œê·¸ íŒŒì¼ë“¤ì„ ì£¼ê¸°ì ìœ¼ë¡œ ì‚­ì œí•˜ì—¬ ì²˜ë¦¬í•´ì•¼í•  ë¡œê·¸ íŒŒì¼ ìˆ˜ ìì²´ë¥¼ ì¤„ì´ê¸°\n\ní•˜ì§€ë§Œ, ì´ëŸ¬í•œ ë…¸ë ¥ì—ë„ ë¶ˆêµ¬í•˜ê³  ì—¬ì „íˆ ì£¼ê¸°ì ìœ¼ë¡œ OOM ì˜¤ë¥˜ë“¤ì´ ìˆ˜ì§‘ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n### ì§ì ‘ ìˆ˜ì •í•´ë³´ì\nì˜¤í”ˆì†ŒìŠ¤ì™€ ê´€ë ¨ëœ í™œë™ì„ í•œë‹¤ë©´, ë¼ì´ì„ ìŠ¤ ê·œì •ì„ ì˜ ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ì— ì»¨íŠ¸ë¦¬ë·°ì…˜ì„ í•˜ê¸° ì „ì—ëŠ” `CONTRIBUTING.md` íŒŒì¼ì„ ê¼¼ê¼¼í•˜ê²Œ ì½ì–´ ê°€ì´ë“œë¼ì¸ì„ ì˜ ì¤€ìˆ˜í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤.\n\nì €ëŠ” ì§ì ‘ ìˆ˜ì •í•´ë³´ê¸°ë¡œ ë§ˆìŒë¨¹ì—ˆìŠµë‹ˆë‹¤. ìˆ˜ì§‘ëœ í¬ë˜ì‹œ ë¦¬í¬íŠ¸ë¥¼ ë‹¤ì‹œ ë¶„ì„í•˜ì—¬ ì½”ë“œë¥¼ ìˆ˜ì •í•œ ë’¤ PRì„ ìƒì„±í•˜ì˜€ê³ , ìˆ˜ì •ëœ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\n\n```kotlin\nimport java.util.concurrent.ConcurrentHashMap\n\nprivate val observedTags = ConcurrentHashMap.newKeySet<String>()\n\nprivate suspend fun attachObserver(tag: String) {\n    withContext(Dispatchers.Main) {\n        if (!observedTags.add(tag)) return@withContext\n        val liveData = workManager.getWorkInfosByTagLiveData(tag)\n        liveData.observeForever(this@TransferWorkerObserver)\n    }\n}\n\nprivate suspend fun removeObserver(tag: String) {\n    withContext(Dispatchers.Main) {\n        if (!observedTags.remove(tag)) return@withContext\n        workManager.getWorkInfosByTagLiveData(tag)\n            .removeObserver(this@TransferWorkerObserver)\n    }\n}\n```\n\nAWS Amplify Storage ëª¨ë“ˆì˜ [TransferWorkerObserver](https://github.com/aws-amplify/amplify-android/blob/main/aws-storage-s3/src/main/java/com/amplifyframework/storage/s3/transfer/TransferWorkerObserver.kt) í´ë˜ìŠ¤ì— ì¤‘ë³µ ê´€ì°°ì ë“±ë¡ì„ ë°©ì§€í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•˜ì˜€ê³ , [ConcurrentHashMap](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html)ì€ `thread-safe`í•˜ë©°, `ConcurrentHashMap.newKeySet()`ì€ `Set` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•´ì£¼ëŠ”ë°, íƒœê·¸ê°€ ì´ë¯¸ ì¡´ì¬í•˜ë©´ `add()`ëŠ” `false`ë¥¼ ë°˜í™˜í•˜ê³ , ì–¼ë¦¬ ë¦¬í„´ì„ í†µí•´ í•¨ìˆ˜ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ `remove()`ëŠ” íƒœê·¸ê°€ `observedTags`ì— ì—†ìœ¼ë©´ falseë¥¼ ë°˜í™˜í•˜ê³  í•¨ìˆ˜ë¥¼ ì¢…ë£Œì‹œí‚µë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë¶ˆí•„ìš”í•œ ì¤‘ë³µëœ íƒœê·¸ ë“±ë¡ì„ ë°©ì§€í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n### ë¿Œë“¯í•œ ê²°ê³¼\n![](aws-amplify-approve-comment.png)\n\në©”ì¸í…Œì´ë„ˆë¶„ìœ¼ë¡œë¶€í„° ì¢‹ì€ ì•„ì´ë””ì–´ë¼ëŠ” ì˜ê²¬ê³¼ í•¨ê»˜ ëª‡ ê°€ì§€ ì œì•ˆì‚¬í•­ë“¤ì„ ìˆ˜ì •í•œ ë’¤ì— ìµœì¢… ìŠ¹ì¸ì´ ë˜ì—ˆê³ , [2.27.1](https://github.com/aws-amplify/amplify-android/releases/tag/release_v2.27.1) ë²„ì „ì— í•´ë‹¹ ì‘ì—…ì´ ë°˜ì˜ë˜ì–´ ë¦´ë¦¬ì¦ˆ ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ‰ \n\nì´ëŸ¬í•œ ê²½í—˜ì„ í†µí•´ì„œ íšŒì‚¬ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©ì¤‘ì¸ ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜¤ë¥˜ë¥¼ ë°œê²¬í•˜ë©´ ì ê·¹ì ìœ¼ë¡œ PRì„ ì˜¬ë ¤ ê¸°ì—¬í•˜ê³  ë¬¸ì œë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ëŠê¼ˆê³ , ìì£¼ ì‚¬ìš©í–ˆì§€ë§Œ ëª°ëë˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë‚´ë¶€ ë™ì‘ì„ ì‚´í´ë³´ëŠ” ê²½í—˜ì„ í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n### ì•„ì‰¬ì› ë˜ ì , ê·¸ë¦¬ê³  ë°˜ì„±\n\n> ë§Œì•½ Heap Dumpë¥¼ ë”ìš± ëˆì§ˆê¸°ê²Œ ë¶„ì„í–ˆë”ë¼ë©´, ë¬¸ì œì˜ ê·¼ë³¸ ì›ì¸ì„ ë” ë¹ ë¥´ê²Œ íŒŒì•…í•˜ê³  ë³´ë‹¤ ë” ê·¼ê±°ìˆëŠ” ì´ìŠˆ íŠ¸ë˜í‚¹ì— í° ë„ì›€ì´ ë˜ì—ˆì§€ ì•Šì•˜ì„ê¹Œ?"},{"excerpt":"ì•ˆë“œë¡œì´ë“œ ê°œë°œìë¼ë©´ Dalvik, ARTì— ëŒ€í•´ì„œ ë§ì´ ë“¤ì–´ë´¤ì„ ê²ƒì…ë‹ˆë‹¤. Dalvikì€ ì´ˆê¸° ì•ˆë“œë¡œì´ë“œì—ì„œ ì‚¬ìš©ëœ ê°€ìƒ ë¨¸ì‹ ìœ¼ë¡œ, ë©”ëª¨ë¦¬ì™€ ë°°í„°ë¦¬ ì œì•½ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ ìŠ¤íƒ ê¸°ë°˜ ëŒ€ì‹  ë ˆì§€ìŠ¤í„° ê¸°ë°˜ ë°”ì´íŠ¸ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ íš¨ìœ¨ì ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´í›„ Android 5.0ë¶€í„°ëŠ” ê°€ ê¸°ë³¸ ëŸ°íƒ€ì„ í™˜ê²½ìœ¼ë¡œ ì „í™˜ë˜ì—ˆëŠ”ë°, ARTëŠ” ì„¤ì¹˜ ì‹œ ë¥¼ í†µâ€¦","fields":{"slug":"/jvm-under-the-hood/"},"frontmatter":{"date":"August 21, 2024","title":"ì±… ã€JVM ë°‘ë°”ë‹¥ê¹Œì§€ íŒŒí—¤ì¹˜ê¸°ã€ í›„ê¸°","tags":["book"]},"rawMarkdownBody":"\nì•ˆë“œë¡œì´ë“œ ê°œë°œìë¼ë©´ **Dalvik, ART**ì— ëŒ€í•´ì„œ ë§ì´ ë“¤ì–´ë´¤ì„ ê²ƒì…ë‹ˆë‹¤. [Dalvik](https://en.wikipedia.org/wiki/Dalvik_(software))ì€ ì´ˆê¸° ì•ˆë“œë¡œì´ë“œì—ì„œ ì‚¬ìš©ëœ ê°€ìƒ ë¨¸ì‹ ìœ¼ë¡œ, ë©”ëª¨ë¦¬ì™€ ë°°í„°ë¦¬ ì œì•½ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ ìŠ¤íƒ ê¸°ë°˜ ëŒ€ì‹  ë ˆì§€ìŠ¤í„° ê¸°ë°˜ ë°”ì´íŠ¸ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ íš¨ìœ¨ì ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´í›„ Android 5.0ë¶€í„°ëŠ” `ART(Android Runtime)`ê°€ ê¸°ë³¸ ëŸ°íƒ€ì„ í™˜ê²½ìœ¼ë¡œ ì „í™˜ë˜ì—ˆëŠ”ë°, ARTëŠ” ì„¤ì¹˜ ì‹œ `AOT(Ahead-Of-Time)`ë¥¼ í†µí•´ ì•±ì„ ë„¤ì´í‹°ë¸Œ ì½”ë“œë¡œ ë³€í™˜í•˜ê³ , í•„ìš”ì— ë”°ë¼ `JIT(Just-In-Time)`ë¥¼ ì¶”ê°€ë¡œ ì ìš©í•˜ì—¬ ì‹¤í–‰ ì„±ëŠ¥ì„ í¬ê²Œ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\n\në§ˆì¹¨ íšŒì‚¬ ë°±ì—”ë“œ ê°œë°œìë¶„ë“¤ê»˜ì„œë„ JVMì— ê´€ì‹¬ì´ ìƒê²¨ ì‚¬ë‚´ì—ì„œ í•¨ê»˜ ê³µë¶€í•´ ë³´ìëŠ” ì œì•ˆì„ í•´ì£¼ì…¨ê³ , í‰ì†Œ ë” íŒŒë³´ê³  ì‹¶ì—ˆë˜ JVMì˜ `GC`, `ë©”ëª¨ë¦¬ ê´€ë¦¬ ê¸°ë²•` ë“±ì˜ ê°œë…ì„ ê³µë¶€í•˜ë©´ Android ëŸ°íƒ€ì„ í™˜ê²½ì˜ ë‚´ë¶€ ë™ì‘ ë°©ì‹ì„ ì´í•´í•˜ëŠ” ë°ì— ë„ì›€ì´ ë  ìˆ˜ ìˆì„ ê²ƒì´ë¼ê³  ìƒê°í•˜ì—¬ ì„¤ë ˆëŠ” ë§ˆìŒìœ¼ë¡œ ìŠ¤í„°ë””ì— í•©ë¥˜í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n![ì±…ì´ ìƒê°ë³´ë‹¤ í›¨ì”¬ ë‘êº¼ì›Œì„œ ë†€ëì—ˆë‹¤...](jvm-under-the-hood.png)\n\nìŠ¤í„°ë”” êµì¬ë¡œëŠ” [ã€JVM ë°‘ë°”ë‹¥ê¹Œì§€ íŒŒí—¤ì¹˜ê¸°ã€](https://www.yes24.com/Product/Goods/126114513)ë¼ëŠ” ì±…ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤. ì±…ì˜ ë¶„ëŸ‰ì´ ë§ì•˜ê¸° ë•Œë¬¸ì— ì±•í„°ë³„ë¡œ ë‹´ë‹¹ìë¥¼ ì§€ì •í•´ì„œ ì½ì–´ì˜¤ê³ , ì´ë¥¼ ì‚¬ë‚´ ì»¨í”Œë£¨ì–¸ìŠ¤ì— ë¬¸ì„œí™”í•˜ê³  ë°œí‘œí•˜ëŠ” ë°©ì‹ì˜ ìŠ¤í„°ë””ë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤. ë°œí‘œë¥¼ í•˜ë©´ì„œë„ ì§§ì€ ì§ˆë¬¸ê³¼ ì˜ê²¬ë“¤ì´ ì˜¤ê³ ê°”ê³ , ì£¼ë¡œ `ì´ ë¶€ë¶„ì—ì„œ ìì‹ ì´ ì´í•´í•œ ê²ƒì´ ë§ëŠ”ì§€?`ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê·¼ê±°ë¥¼ ì°¾ì•„ê°€ë©´ì„œ ìŠ¤í„°ë””ë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n> ì—¬ëŸ¬ ì±•í„°ì— ê±¸ì³ì„œ ì•ˆë“œë¡œì´ë“œ ê°œë°œìì—ê²Œ ì¢‹ì€ ë‚´ìš©ë“¤ì´ ë§ì•˜ì§€ë§Œ, ê°œì¸ì ìœ¼ë¡œëŠ” ê°€ë¹„ì§€ ì»¬ë ‰í„°ì˜ ë‚´ìš©ì´ ê°€ì¥ ì¢‹ì•˜ê¸° ë•Œë¬¸ì— '3ì¥ ê°€ë¹„ì§€ ì»¬ë ‰í„°ì™€ ë©”ëª¨ë¦¬ í• ë‹¹ ì „ëµ'ì˜ í•µì‹¬ ë‚´ìš©ë“¤ì„ ìš”ì•½í•´ì„œ ì •ë¦¬í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\n### ê°€ë¹„ì§€ ì»¬ë ‰ì…˜?\nê°€ë¹„ì§€ ì»¬ë ‰ì…˜(GC)ì€ ìë°” ì–¸ì–´ì—ì„œ ì²˜ìŒ ì†Œê°œí•œ ê¸°ìˆ ì´ ì•„ë‹ˆë©°, MITì—ì„œ ê°œë°œëœ ë¦¬ìŠ¤í”„ë¼ëŠ” ì–¸ì–´ê°€ ì‹œì´ˆë¼ê³  í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ê³¼ ë©”ëª¨ë¦¬ í• ë‹¹ì˜ ë‚´ë¶€ ë™ì‘ì„ ì´í•´í•˜ë©´ ë‹¤ì–‘í•œ ë©”ëª¨ë¦¬ ì˜¤ë²„í”Œë¡œìš°, ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë¬¸ì œë¥¼ í•´ê²°í•´ì•¼í•˜ëŠ” ìƒí™©ì— ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n\n### ìë°” í™ê³¼ ë©”ì„œë“œ ì˜ì—­ì€ ë¶ˆí™•ì‹¤\nêµ¬í˜„í•œ í´ë˜ìŠ¤ë§ˆë‹¤ ìš”êµ¬í•˜ëŠ” ë©”ëª¨ë¦¬ í¬ê¸°ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡œê·¸ë¨ì´ ì–´ë–¤ ê°ì²´ë¥¼ ìƒì„±í• ì§€, ì–¼ë§ˆë‚˜ ë§ì´ ë§Œë“¤ì§€ëŠ” ì˜¤ì§ ëŸ°íƒ€ì„ì—ë§Œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ ë©”ëª¨ë¦¬ ì˜ì—­ë“¤ì˜ íšŒìˆ˜ëŠ” ë™ì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê³ , ê°€ë¹„ì§€ ì»¬ë ‰í„°ëŠ” ì´ëŸ° ì˜ì—­ì„ ê´€ë¦¬í•˜ëŠ” ë° ì§‘ì¤‘í•©ë‹ˆë‹¤.\n\nê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ **í™ì„ ì²­ì†Œ**í•˜ë ¤ë©´ ì–´ë–¤ ê°ì²´ê°€ ì‚´ì•„ ìˆê³  ì£½ì—ˆëŠ”ì§€ë¥¼ íŒë‹¨í•´ì•¼ í•˜ëŠ”ë°, ì—¬ê¸°ì„œ ì£½ì—ˆë‹¤ëŠ” ë§ì€ ì–´ë–¤ ì‹ìœ¼ë¡œë„ í”„ë¡œê·¸ë¨ ì½”ë“œì—ì„œ ì‚¬ìš©ë  ìˆ˜ ì—†ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.\n\nì—¬ê¸°ì„œ ê°ì²´ê°€ ì‚´ì•„ìˆëŠ”ì§€ íŒë‹¨í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n- ì°¸ì¡° ì¹´ìš´íŒ… ì•Œê³ ë¦¬ì¦˜\n- ë„ë‹¬ ê°€ëŠ¥ì„± ë¶„ì„ ì•Œê³ ë¦¬ì¦˜\n\n### ì°¸ì¡° ì¹´ìš´íŒ… ì•Œê³ ë¦¬ì¦˜\n1. ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì°¸ì¡° ì¹´ìš´í„°ë¥¼ ì¶”ê°€. ì°¸ì¡°í•˜ëŠ” ê³³ì´ í•˜ë‚˜ ëŠ˜ì–´ë‚  ë•Œë§ˆë‹¤ ì¹´ìš´í„° ê°’ì„ 1ì”© ì¦ê°€\n2. ì°¸ì¡°í•˜ëŠ” ê³³ì´ í•˜ë‚˜ ì‚¬ë¼ì§ˆ ë•Œë§ˆë‹¤ ì¹´ìš´í„° ê°’ì„ 1ì”© ê°ì†Œ\n3. ì¹´ìš´í„° ê°’ì´ 0ì´ ëœ ê°ì²´ëŠ” ë”ëŠ” ì‚¬ìš©ë  ìˆ˜ ì—†ìŒ\n\n> ë§ˆì´í¬ë¡œì†Œí”„íŠ¸ COM, íŒŒì´ì¬, ëŸ¬ìŠ¤íŠ¸ ë“±ì´ ë©”ëª¨ë¦¬ ê´€ë¦¬ì— ì°¸ì¡° ì¹´ìš´íŒ… ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©í•œë‹¤ê³  í•©ë‹ˆë‹¤.\n\nê·¸ëŸ°ë° ìë°”, ì ì–´ë„ ìë°” ê°€ìƒ ë¨¸ì‹ ì—ì„œëŠ” ì°¸ì¡° ì¹´ìš´íŒ…ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë°, ê·¸ ì´ìœ ëŠ” ë°”ë¡œ `ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ`ë¥¼ í’€ê¸° ì–´ë µê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\n```java\npublic class ReferenceCountingGC {\n  public Object instance = null;\n  // ...\n  public static void testGC() {\n    // ë‘ ê°ì²´ ìƒì„±\n    ReferenceCountingGC objA = new ReferenceCountingGC();\n    ReferenceCountingGC objB = new ReferenceCountingGC();\n    // ë‚´ë¶€ í•„ë“œë¡œ ì„œë¡œë¥¼ ì°¸ì¡°\n    objA.instance = objB;\n    objB.instance = objA;\n    // ì°¸ì¡° í•´ì œ\n    objA = null;\n    objB = null;\n    // ì´ ë¼ì¸ì—ì„œ GCê°€ ìˆ˜í–‰ëœë‹¤ë©´ objAì™€ objBê°€ íšŒìˆ˜ë ê¹Œ?\n    System.gc();\n  }\n  public static void main(String[] args) {\n    testGC();\n  }\n}\n```\n\nì°¸ì¡°ë¥¼ í•´ì œí•œ ì‹œì ë¶€í„° ë‘ ê°ì²´ì— ì ‘ê·¼í•  ê¸¸ì´ ì‚¬ë¼ì§€ì§€ë§Œ, ì•„ì§ë„ ì„œë¡œë¥¼ ì°¸ì¡°í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì°¸ì¡° ì¹´ìš´í„°ëŠ” ì•„ì§ 0ì´ ì•„ë‹™ë‹ˆë‹¤. ë”°ë¼ì„œ ì°¸ì¡° ì¹´ìš´íŒ… ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œëŠ” ë‘˜ì„ íšŒìˆ˜í•˜ì§€ ëª»í•˜ê²Œ ë©ë‹ˆë‹¤.\n\nê·¸ëŸ¬ë‚˜ ì‹¤í–‰ ê²°ê³¼ ìë°” ê°€ìƒë¨¸ì‹ ì—ì„œ `objA`ì™€ `objB`ê°€ ë©”ëª¨ë¦¬ì—ì„œ íšŒìˆ˜ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆê³ , ì´ëŠ” ìë°” ê°€ìƒ ë¨¸ì‹ ì€ ê°ì²´ ìƒì‚¬ íŒë‹¨ì— `ì°¸ì¡° ì¹´ìš´íŒ… ì•Œê³ ë¦¬ì¦˜`ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### ë„ë‹¬ ê°€ëŠ¥ì„± ë¶„ì„ ì•Œê³ ë¦¬ì¦˜\nìë°”, C# ë“±ì˜ ì£¼ë¥˜ ì–¸ì–´ë“¤ì€ ê°ì²´ ìƒì‚¬ íŒë‹¨ì— ë„ë‹¬ ê°€ëŠ¥ì„± ë¶„ì„(reachability analysis) ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ ì•Œê³ ë¦¬ì¦˜ì˜ í•µì‹¬ì€ `GC ë£¨íŠ¸` ì…ë‹ˆë‹¤. ì´ ë£¨íŠ¸ ê°ì²´ë“¤ì„ ì‹œì‘ ë…¸ë“œ ì§‘í•©ìœ¼ë¡œ ì‚¬ìš©í•˜ë©°, ì‹œì‘ ë…¸ë“œë“¤ì—ì„œ ì¶œë°œí•˜ì—¬ ì°¸ì¡°í•˜ëŠ” ë‹¤ë¥¸ ê°ì²´ë“¤ë¡œ íƒìƒ‰í•˜ì—¬ ë“¤ì–´ê°€ëŠ” íë¦„ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤. ì´ë•Œ íƒìƒ‰ ê³¼ì •ì—ì„œ ë§Œë“¤ì–´ì§€ëŠ” ê²½ë¡œë¥¼ `ì°¸ì¡° ì²´ì¸(reference chain)`ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.\n\n![](gc-root.png)\n\në‹¨, ìë°”ì—ì„œ GC ë£¨íŠ¸ë¡œ ì´ìš©í•  ìˆ˜ ìˆëŠ” ê°ì²´ëŠ” ì •í•´ì ¸ ìˆëŠ”ë°, ê·¸ ì¢…ë¥˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- `ê°€ìƒ ë¨¸ì‹  ìŠ¤íƒ(ìŠ¤íƒ í”„ë ˆì„ì˜ ì§€ì—­ ë³€ìˆ˜ í…Œì´ë¸”)ì—ì„œ ì°¸ì¡°í•˜ëŠ” ê°ì²´` : í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ë©”ì„œë“œì—ì„œ ì“°ëŠ” ë§¤ê°œ ë³€ìˆ˜, ì§€ì—­ ë³€ìˆ˜, ì„ì‹œ ë³€ìˆ˜ ë“±\n- `ë©”ì„œë“œ ì˜ì—­ì—ì„œ í´ë˜ìŠ¤ê°€ ì •ì  í•„ë“œë¡œ ì°¸ì¡°í•˜ëŠ” ê°ì²´` : ìë°” í´ë˜ìŠ¤ì˜ ì°¸ì¡° íƒ€ì… ì •ì  ë³€ìˆ˜\n- `ë©”ì„œë“œ ì˜ì—­ì—ì„œ ìƒìˆ˜ë¡œ ì°¸ì¡°ë˜ëŠ” ê°ì²´` : ë¬¸ìì—´ í…Œì´ë¸” ì•ˆì˜ ì°¸ì¡°\n- `ë„¤ì´í‹°ë¸Œ ë©”ì„œë“œ ìŠ¤íƒì—ì„œ JNIê°€ ì°¸ì¡°í•˜ëŠ” ê°ì²´`\n- `ìë°” ê°€ìƒ ë¨¸ì‹  ë‚´ë¶€ì—ì„œ ì“°ì´ëŠ” ì°¸ì¡°` : ê¸°ë³¸ ë°ì´í„° íƒ€ì…ì— í•´ë‹¹í•˜ëŠ” Class ê°ì²´, ì‹œìŠ¤í…œ í´ë˜ìŠ¤ ë¡œë” ë“±\n- `ë™ê¸°í™” ë½(synchronized í‚¤ì›Œë“œ)ìœ¼ë¡œ ì ê²¨ ìˆëŠ” ëª¨ë“  ê°ì²´`\n- `ìë°” ê°€ìƒ ë¨¸ì‹  ë‚´ë¶€ ìƒí™©ì„ ë°˜ì˜í•˜ëŠ” JMXBean` : JVMTIì— ë“±ë¡ëœ ì½œë°±, ë¡œì»¬ ì½”ë“œ ìºì‹œ ë“±\n\nì´ì™¸ì—ë„ ê°€ë¹„ì§€ ì»¬ë ‰í„°ì˜ ì¢…ë¥˜ë‚˜ í˜„ì¬ íšŒìˆ˜ ì¤‘ì¸ ë©”ëª¨ë¦¬ ì˜ì—­ì— ë”°ë¼ ë‹¤ë¥¸ ê°ì²´ë“¤ë„ `ì„ì‹œë¡œ` ì¶”ê°€ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n### ì„¸ëŒ€ ë‹¨ìœ„ ì»¬ë ‰ì…˜ ì´ë¡ \ní˜„ì¬ ìƒìš© ê°€ìƒ ë¨¸ì‹ ë“¤ì´ ì±„íƒí•œ ê°€ë¹„ì§€ ì»¬ë ‰í„°ë“¤ì€ ëŒ€ë¶€ë¶„ ì„¸ëŒ€ ë‹¨ìœ„ ì»¬ë ‰ì…˜ ì´ë¡ ì— ê¸°ì´ˆí•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n<span style=\"color:orange\">1. ì•½í•œ ì„¸ëŒ€ ê°€ì„¤ : ëŒ€ë‹¤ìˆ˜ ê°ì²´ëŠ” ì¼ì° ì£½ëŠ”ë‹¤.</span>\n\n<span style=\"color:orange\">2. ê°•í•œ ì„¸ëŒ€ ê°€ì„¤ : ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ê³¼ì •ì—ì„œ ì‚´ì•„ë‚¨ì€ íšŸìˆ˜ê°€ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ë” ì˜¤ë˜ ì‚´ ê°€ëŠ¥ì„±ì´ ì»¤ì§„ë‹¤.</span>\n\n> ğŸ’¬ â€œëŠ™ì—ˆë‹¤ëŠ” ê²ƒì€ ì‚´ì•„ë‚¨ì•˜ë‹¤ëŠ” ê²ƒâ€\n\nì´ ë‘ ê°€ì§€ ê°€ì •ì´ í•©ì³ì ¸ ê°€ë¹„ì§€ ì»¬ë ‰í„°ë“¤ì— ì¼ê´€ëœ ì„¤ê³„ ì›ì¹™ì„ ì œê³µí•©ë‹ˆë‹¤.\nì—¬ê¸°ì„œ `ë‚˜ì´ = ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì—ì„œ ì‚´ì•„ë‚¨ì€ íšŸìˆ˜`ì´ê³ , **ëŒ€ë¶€ë¶„ì˜ ê°ì²´ê°€ ê³§ë°”ë¡œ ì£½ì„ ìš´ëª…ì´ë¼ë©´?** ì‚´ì•„ë‚¨ëŠ” ì†Œìˆ˜ì˜ ê°ì²´ë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•ì— ì§‘ì¤‘í•˜ëŠ” í¸ì´ ìœ ë¦¬í•©ë‹ˆë‹¤.\ní•œ ë²ˆ ì‚´ì•„ë‚¨ì€ ê°ì²´ëŠ” í†µê³„ì ìœ¼ë¡œ ì˜ ì£½ì§€ ì•Šìœ¼ë‹ˆ ë‹¤ë¥¸ ì˜ì—­ì— ë”°ë¡œ ëª¨ì•„ ë‘ê³ , ê°€ìƒ ë¨¸ì‹ ì´ ê·¸ ì˜ì—­ì„ íšŒìˆ˜í•˜ëŠ” ë¹ˆë„ë¥¼ ì¤„ì´ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\nì´ëŸ¬í•œ ì„¸ëŒ€ ë‹¨ìœ„ ì»¬ë ‰ì…˜ ì´ë¡ ì„ ê°€ìƒ ë¨¸ì‹ ì— ì ìš©í•œ ì„¤ê³„ìë“¤ì€ **ìë°” í™**ì„ ìµœì†Œ ë‘ê°œì˜ ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ„ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n- ì‹ ì„¸ëŒ€ : ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ë•Œë§ˆë‹¤ ë‹¤ìˆ˜ì˜ ê°ì²´ê°€ ì£½ê³  ì‚´ì•„ë‚¨ì€ ì†Œìˆ˜ë§Œ êµ¬ì„¸ëŒ€ë¡œ ìŠ¹ê²©\n- êµ¬ì„¸ëŒ€ \n\nê·¸ëŸ¬ë‚˜ ë³µì¡í•´ ë³´ì´ëŠ” ìƒí™©ì´ í•˜ë‚˜ê°€ ìˆìŠµë‹ˆë‹¤. ğŸ¤”\n\n- ê°ì²´ë“¤ì€ ë‹¨ë…ìœ¼ë¡œ ì¡´ì¬ X\n- ë‹¤ë¥¸ ì„¸ëŒ€ì— ì¡´ì¬í•˜ëŠ” ê°ì²´ë“¤ì„ ì°¸ì¡°í•˜ëŠ” ìƒí™©ì´ ìˆìŒ\n\në˜í•œ, ì‹ ì„¸ëŒ€ì—ì„œë§Œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì„ í•˜ê³  ì‹¶ì–´ë„ êµ¬ì„¸ëŒ€ì—ì„œ ì°¸ì¡° ì¤‘ì¸ ê°ì²´ë„ ë¶„ëª… ìˆì„ ê²ƒì…ë‹ˆë‹¤. ì‚´ì•„ë‚¨ì„ ê°ì²´ë¥¼ ì°¾ìœ¼ë ¤ë©´ ê³ ì •ëœ `GC ë£¨íŠ¸`ë“¤ë¿ ì•„ë‹ˆë¼ `êµ¬ì„¸ëŒ€ ê°ì²´ê¹Œì§€` ëª¨ë‘ íƒìƒ‰í•´ì•¼ í•˜ë©°, ì´ ê²½ìš° ì„±ëŠ¥ ë©´ì—ì„œ í™•ì‹¤íˆ ë¶€ë‹´ì´ í½ë‹ˆë‹¤. ì´ ë¬¸ì œë¥¼ í’€ê¸° ìœ„í•´ `ì„¸ëŒ€ ë‹¨ìœ„ ì»¬ë ‰ì…˜ ì´ë¡ `ì— **3ë²ˆì§¸** ê°€ì •ì´ ì¶”ê°€ë©ë‹ˆë‹¤.\n\n<span style=\"color:orange\">3. ì„¸ëŒ€ ê°„ ì°¸ì¡° ê°€ì„¤ : ì„¸ëŒ€ ê°„ ì°¸ì¡°ì˜ ê°œìˆ˜ëŠ” ê°™ì€ ì„¸ëŒ€ ì•ˆì—ì„œì˜ ì°¸ì¡°ë³´ë‹¤ í›¨ì”¬ ì ë‹¤.</span>\n\nìƒí˜¸ ì°¸ì¡° ê´€ê³„ì˜ ë‘ ê°ì²´ëŠ” `ì‚¶ê³¼ ì£½ìŒì„ í•¨ê»˜í•˜ëŠ” ê²½í–¥`ì´ ìˆìŠµë‹ˆë‹¤. ì‹ ì„¸ëŒ€ ê°ì²´ê°€ ì„¸ëŒ€ ê°„ ì°¸ì¡°ë¥¼ ê°€ì§€ê³  ìˆì„ ë•Œ êµ¬ì„¸ëŒ€ ê°ì²´ëŠ” ì˜ ì£½ì§€ ì•Šê¸° ë•Œë¬¸ì— ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì„ ê±°ì³ë„ ì‹ ì„¸ëŒ€ ê°ì²´ëŠ” ì„¸ëŒ€ ê°„ ì°¸ì¡° ë•ì— êµ¬ì„¸ëŒ€ë¡œ ìŠ¹ê²©ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ ê°™ì€ ì„¸ëŒ€ê°€ ë˜ì—ˆìœ¼ë¯€ë¡œ ì„¸ëŒ€ ê°„ ì°¸ì¡°ëŠ” ìì—°ìŠ¤ëŸ½ê²Œ ì‚¬ë¼ê²Œ ë©ë‹ˆë‹¤.\n\në”°ë¼ì„œ ì´ ê°€ì„¤ì— ë”°ë¥´ë©´ ì„¸ëŒ€ ê°„ ì°¸ì¡°ì˜ ìˆ˜ëŠ” ì•„ì£¼ ì ê¸° ë•Œë¬¸ì— êµ¬ì„¸ëŒ€ ì „ì²´ë¥¼ í›‘ëŠ” ê±´ ì‹œê°„ ë‚­ë¹„ë¼ê³  íŒë‹¨í•©ë‹ˆë‹¤.\n\n\n### ë§ˆí¬-ìŠ¤ìœ• ì•Œê³ ë¦¬ì¦˜\n![](mark-sweep-algorithm.png)\nê°€ì¥ ê¸°ë³¸ì ì¸ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤. ë¨¼ì € íšŒìˆ˜í•  ê°ì²´ë“¤ì— ëª¨ë‘ í‘œì‹œ(mark)í•œ ë‹¤ìŒ, í‘œì‹œëœ ê°ì²´ë“¤ì„ ì“¸ì–´ ë‹´ëŠ”(sweep) ë°©ì‹ì…ë‹ˆë‹¤. ë°˜ëŒ€ë¡œ, ì‚´ë¦´ ê°ì²´ì— í‘œì‹œ(mark)í•˜ê³ , í‘œì‹œë˜ì§€ ì•Šì€ ê°ì²´ë¥¼ íšŒìˆ˜(sweep) í•˜ê¸°ë„ í•©ë‹ˆë‹¤.\n\n#### ë‹¨ì ì€?\n- ì‹¤í–‰ íš¨ìœ¨ì´ ì¼ì •í•˜ì§€ ì•ŠìŒ : ìë°” í™ì´ ë‹¤ëŸ‰ì˜ ê°ì²´ë¡œ ê°€ë“ ì°¨ ìˆê³  ëŒ€ë¶€ë¶„ì´ íšŒìˆ˜ ëŒ€ìƒì´ë¼ë©´? í‘œì‹œí•˜ëŠ” ì¼ & íšŒìˆ˜í•˜ëŠ” ì¼ ëª¨ë‘ ì»¤ì§ â†’ ê°ì²´ê°€ ë§ì•„ì§ˆìˆ˜ë¡ í‘œì‹œí•˜ê³  ì“¸ì–´ ë‹´ëŠ” ì‘ì—…ì˜ íš¨ìœ¨ì´ ë–¨ì–´ì§\n\n- ë©”ëª¨ë¦¬ íŒŒí¸í™”ê°€ ì‹¬í•¨ : ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ì“¸ê³  ê°„ ìë¦¬ì—ëŠ” ë¶ˆì—°ì†ì ì¸ ë©”ëª¨ë¦¬ íŒŒí¸ì´ ë§Œë“¤ì–´ì§. â†’ íŒŒí¸í™”ê°€ ë„ˆë¬´ ì‹¬í•˜ë©´ í”„ë¡œê·¸ë¨ì´ í° ê°ì²´ë¥¼ ë§Œë“¤ë ¤ í•  ë•Œ ì¶©ë¶„í•œ í¬ê¸°ì˜ ì—°ì†ëœ ë©”ëª¨ë¦¬ë¥¼ ì°¾ê¸°ê°€ ì ì  ì–´ë ¤ì›Œì§ â†’ ë˜ ë‹¤ë¥¸ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ìœ ë°œ\n\n### ë§ˆí¬-ì¹´í”¼ ì•Œê³ ë¦¬ì¦˜\n![](mark-copy-algorithm.png)\níšŒìˆ˜í•  ê°ì²´ê°€ ë§ì•„ì§ˆìˆ˜ë¡ íš¨ìœ¨ì´ ë–¨ì–´ì§€ëŠ” ë§ˆí¬-ìŠ¤ìœ• ì•Œê³ ë¦¬ì¦˜ì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìƒê²¨ë‚˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê°€ìš© ë©”ëª¨ë¦¬ë¥¼ ë˜‘ê°™ì€ í¬ê¸°ì˜ ë‘ ë¸”ë¡ìœ¼ë¡œ ë‚˜ëˆ ì„œ í•œ ë²ˆì— í•œ ë¸”ë¡ë§Œ ì‚¬ìš©í•˜ê³ , í•œìª½ ë¸”ë¡ì´ ê½‰ ì°¨ë©´ ì‚´ì•„ë‚¨ì€ ê°ì²´ë“¤ë§Œ ë‹¤ë¥¸ ë¸”ë¡ì— ë³µì‚¬í•˜ê³  ê¸°ì¡´ ë¸”ë¡ ëª©ë¡ì„ í•œ ë²ˆì— ì²­ì†Œí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\në§Œì•½ ëŒ€ë‹¤ìˆ˜ ê°ì²´ê°€ ì‚´ì•„ë‚¨ìœ¼ë©´? ë©”ëª¨ë¦¬ ë³µì‚¬ì— ìƒë‹¹í•œ ì‹œê°„ í—ˆë¹„ë¥¼ í•˜ê²Œ ë©ë‹ˆë‹¤.\nëŒ€ë‹¤ìˆ˜ ê°ì²´ê°€ íšŒìˆ˜ëœë‹¤ë©´? ìƒì¡´í•œ ì†Œìˆ˜ì˜ ê°ì²´ë§Œ ë³µì‚¬í•˜ë©´ ë¨ & ë³µì‚¬ ê³¼ì •ì—ì„œ ê°ì²´ë“¤ì´ ë©”ëª¨ë¦¬ í•œìª½ ëì—ì„œ ì°¨ê³¡ì°¨ê³¡ ìŒ“ì´ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ íŒŒí¸í™” ë¬¸ì œë¡œë¶€í„° í•´ë°©ë©ë‹ˆë‹¤.\n\n### ë‹¨ì ì€?\nê°€ìš© ë©”ëª¨ë¦¬ë¥¼ ì ˆë°˜ìœ¼ë¡œ ì¤„ì—¬ ë‚­ë¹„ê°€ ì œë²• ì‹¬í•˜ë‹¤ëŠ” ì \n\nì˜¤ëŠ˜ë‚  ìƒìš© ìë°” ê°€ìƒ ë¨¸ì‹ ì€ ëŒ€ë¶€ë¶„ ì‹ ì„¸ëŒ€ì— ì´ ì•Œê³ ë¦¬ì¦˜ì„ ì ìš©í•©ë‹ˆë‹¤.\nIBMì˜ ì—°êµ¬ì— ë”°ë¥´ë©´ ì‹ ì„¸ëŒ€ ê°ì²´ ì¤‘ `98`%ê°€ ì²« ë²ˆì§¸ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì— ì‚´ì•„ë‚¨ì§€ ëª»í–ˆê³ , ì´ëŠ” ì‹ ì„¸ëŒ€ìš© ë©”ëª¨ë¦¬ ì˜ì—­ì„ 1:1ë¡œ ë‚˜ëˆŒ í•„ìš”ê°€ ì—†ë‹¤ëŠ” ê²°ë¡ ì´ ë‚˜ê²Œ ë©ë‹ˆë‹¤.\n\n![](young-gen-and-old-gen.png)\nì‹ ì„¸ëŒ€ë¥¼ í•˜ë‚˜ì˜ í° ì—ë´ ê³µê°„(80%)ê³¼ ë‘ ê°œì˜ ì‘ì€ ìƒì¡´ì ê³µê°„(10%)ìœ¼ë¡œ ë‚˜ëˆ„ëŠ”ë°, í•«ìŠ¤íŒŸ ê°€ìƒ ë¨¸ì‹ ì—ì„œ ì—ë´ê³¼ ìƒì¡´ì ê³µê°„ì˜ ë¹„ìœ¨ì€ ê¸°ë³¸ì ìœ¼ë¡œ 8:1 (ì—ë´ 80% + ìƒì¡´ì ê³µê°„ ì¤‘ í•˜ë‚˜ 10%) ì…ë‹ˆë‹¤. (ë‚­ë¹„í•˜ëŠ” ê³µê°„ì€ ë‹¨ 10%ë¿)\n\n- 98%ì˜ ê°ì²´ê°€ íšŒìˆ˜ëœë‹¤ëŠ” ë°ì´í„° = â€˜ì¼ë°˜ì ì¸ ìƒí™©'ì—ì„œ ì¸¡ì •ëœ ê²°ê³¼\n> ğŸ˜® 10% ë„˜ëŠ” ê°ì²´ê°€ ì‚´ì•„ë‚¨ëŠ” íŠ¹ì´ ì¼€ì´ìŠ¤ëŠ” ì–´ì©Œê³ ? \n\nì´ëŸ° ì¼€ì´ìŠ¤ì— ëŒ€ì²˜í•˜ê¸° ìœ„í•œ ì„¤ê³„ë¡œ `ë©”ëª¨ë¦¬ í• ë‹¹ ë³´ì¦ ë©”ì»¤ë‹ˆì¦˜` ê°œë…ì´ ë“±ì¥í•©ë‹ˆë‹¤.\n\n### ë©”ëª¨ë¦¬ í• ë‹¹ ë³´ì¦ ë©”ì»¤ë‹ˆì¦˜\në§ˆì´ë„ˆ GC(ì‹ ì„¸ëŒ€ GC)ì—ì„œ ì‚´ì•„ë‚¨ì€ ê°ì²´ë¥¼ ìƒì¡´ì ê³µê°„ì´ ë‹¤ ìˆ˜ìš©í•˜ì§€ ëª»í•  ê²½ìš° ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì˜ì—­(êµ¬ì„¸ëŒ€)ë¥¼ í™œìš©í•´ ë©”ëª¨ë¦¬ í• ë‹¹ì„ ë³´ì¦í•˜ëŠ” ê²ƒìœ¼ë¡œ, ì´ëŸ¬í•œ í• ë‹¹ ë³´ì¦ ë©”ì»¤ë‹ˆì¦˜ì„ í†µí•´ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì—ì„œ ì‚´ì•„ë‚¨ì€ ê°ì²´ë¥¼ êµ¬ì„¸ëŒ€ì— ë°”ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.\n\n### ë§ˆí¬-ì»´íŒ©íŠ¸ ì•Œê³ ë¦¬ì¦˜\n`ë§ˆí¬-ì¹´í”¼ ì•Œê³ ë¦¬ì¦˜`ì€ ê°ì²´ ìƒì¡´ìœ¨ì´ ë†’ì„ìˆ˜ë¡ ë³µì‚¬í•  ê²Œ ë§ì•„ì ¸ì„œ íš¨ìœ¨ì´ ë‚˜ë¹ ì§‘ë‹ˆë‹¤. ê³µê°„ì„ 50%ë‚˜ ë‚­ë¹„í•˜ê¸° ì‹«ë‹¤ë©´ í• ë‹¹ ë³´ì¦ìš© ê³µê°„ì„ ë”°ë¡œ ë§ˆë ¨í•˜ì—¬ ëŒ€ë‹¤ìˆ˜ ê°ì²´ê°€ ì‚´ì•„ë‚¨ëŠ” ê·¹ë‹¨ì  ìƒí™©ì— ëŒ€ì²˜í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— êµ¬ì„¸ëŒ€ì—ëŠ” ì í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (ê°ì²´ ìƒì¡´ìœ¨ì´ ë†’ê¸° ë•Œë¬¸)\n\n![](mark-compact-algorithm.png)\nì´ëŠ” ë§ˆí¬-ì»´íŒ©íŠ¸ ì•Œê³ ë¦¬ì¦˜ì¸ë°, í‘œì‹œ ë‹¨ê³„ëŠ” `ë§ˆí¬-ìŠ¤ìœ•`ê³¼ ê°™ìŠµë‹ˆë‹¤. íšŒìˆ˜ ëŒ€ìƒ ê°ì²´ë“¤ì„ ëª¨ë‘ ì“¸ì–´ ë‹´ëŠ” ëŒ€ì‹  ìƒì¡´í•œ ëª¨ë“  ê°ì²´ë¥¼ ë©”ëª¨ë¦¬ ì˜ì—­ì˜ í•œìª½ ëìœ¼ë¡œ ëª¨ì€ ë‹¤ìŒ, ë‚˜ë¨¸ì§€ ê³µê°„ì„ í•œêº¼ë²ˆì— ë¹„ì›ë‹ˆë‹¤. \n\n#### ë§ˆí¬-ìŠ¤ìœ• ì•Œê³ ë¦¬ì¦˜ê³¼ì˜ ì°¨ì´ëŠ”?\n> ğŸ’¬ ë©”ëª¨ë¦¬ ì´ë™ì´ ì¼ì–´ë‚œë‹¤ëŠ” ì \n\nê·¸ëŸ°ë°? ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ í›„ ì‚´ì•„ë‚¨ì€ ê°ì²´ë¥¼ ì´ë™í• ì§€ëŠ” ì–‘ë‚ ì˜ ê²€ê³¼ ê°™ì€ ê²°ì •ì…ë‹ˆë‹¤. êµ¬ì„¸ëŒ€ì—ì„œëŠ” íšŒìˆ˜ ë•Œë§ˆë‹¤ ì‚´ì•„ë‚¨ëŠ” ê°ì²´ê°€ ìƒë‹¹íˆ ë§ì„í…ë°, ìƒì¡´í•œ ê°ì²´ë“¤ì„ ì´ë™ì‹œí‚¨ í›„, ì´ë™ëœ ê°ì²´ë“¤ì„ ê°€ë¦¬í‚¤ë˜ ê¸°ì¡´ ì°¸ì¡°ë¥¼ ëª¨ë‘ ê°±ì‹ í•˜ëŠ” ê²ƒì€ ë§¤ìš° ë¶€ë‹´ë˜ê³ , ê·¸ë ‡ë‹¤ê³  `ë§ˆí¬-ìŠ¤ìœ• ì•Œê³ ë¦¬ì¦˜`ì²˜ëŸ¼ ì‚´ì•„ìˆëŠ” ê°ì²´ë¥¼ ì „í˜€ ì´ë™ì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤ë©´ í™ì´ íŒŒí¸í™”ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ë¬¸ì œëŠ” \n<span style=\"color:yellowgreen\">íŒŒí¸í™” ì—†ëŠ” í• ë‹¹ ì—°ê²° ë¦¬ìŠ¤íŠ¸ë¡œ í•´ê²° ê°€ëŠ¥</span>í•©ë‹ˆë‹¤.\n\ní•˜ë“œë””ìŠ¤í¬ë‚˜ SSDì—ëŠ” ë¬¼ë¦¬ì ìœ¼ë¡œ ì—°ì†ëœ ê³µê°„ì´ ì—†ë”ë¼ë„ í° íŒŒì¼ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” ì´ìœ ê°€ íŒŒì¼ì„ ì¡°ê°ìœ¼ë¡œ ë‚˜ëˆ  ë¬¼ë¦¬ì ìœ¼ë¡œ ë–¨ì–´ì§„ íŒŒí‹°ì…˜ì— ì €ì¥í•œ ë‹¤ìŒ ì´ë¥¼ íŒŒí‹°ì…˜ í…Œì´ë¸”ë¡œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\nëŒ€ë¶€ë¶„ì˜ ê²½ìš° ë©”ëª¨ë¦¬ íŒŒí¸í™”ë¥¼ ê°ë‚´í•˜ë©´ì„œ `ë§ˆí¬-ìŠ¤ìœ•`ì„ ì‚¬ìš©í•˜ë‹¤ê°€, ê°ì²´ í• ë‹¹ì— ì˜í–¥ì„ ì¤„ ë§Œí¼ íŒŒí¸í™”ê°€ ì‹¬í•´ì§€ë©´ `ë§ˆí¬-ì»´íŒ©íŠ¸`ë¥¼ ëŒë ¤ ì—°ì†ëœ ê³µê°„ì„ í™•ë³´í•˜ëŠ” í•´ë²•ë„ ìˆìŠµë‹ˆë‹¤.\n\n### íšŒê³  ë° ë§ˆë¬´ë¦¬\n\nì±…ì˜ ë‚´ìš©ì´ ë°©ëŒ€í•˜ì˜€ê¸°ì—, íšŒì‚¬ ë™ë£Œë¶„ë“¤ê³¼ í•¨ê»˜ ê° ì±•í„°ë³„ë¡œ ë‹´ë‹¹ìë¥¼ ë§¡ì•„ì„œ í•µì‹¬ ê°œë…ì„ ìš”ì•½í•˜ì—¬ ê³µìœ í•˜ëŠ” ë°©ì‹ì„ í†µí•´ íš¨ìœ¨ì ìœ¼ë¡œ ìŠ¤í„°ë””í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë˜í•œ `JVM`ì„ ê³µë¶€í•˜ë©´ ê³µë¶€í• ìˆ˜ë¡ ì´ ë¶„ì•¼ëŠ” ë…¼ë¬¸ì„ ì¤€ë¹„í•˜ëŠ” ëŒ€í•™ì› ì„ì‚¬ ì—°êµ¬ìƒë“¤ì´ ì—°êµ¬í•´ë´ë„ ì¢‹ì„ ê²ƒ ê°™ë‹¤ë¼ê³  ëŠë‚„ì •ë„ë¡œ ì‹¬ì˜¤í•˜ê³ ë„ ê¹Šì€ ë‚´ìš©ì´ ë§ì•˜ìŠµë‹ˆë‹¤. ì•ˆë“œë¡œì´ë“œ ê°œë°œì„ í•˜ë‹¤ë³´ë©´, í•„ìš”ì— ë”°ë¼ ë¹Œë“œ êµ¬ì„± ì‹œ `JVM` ì˜µì…˜ì„ ì„¤ì •í•  ë•Œë„ ìˆëŠ”ë°, ì´ì™€ ê´€ë ¨í•´ì„œë„ ê·¸ë™ì•ˆ ëª°ëë˜ ì˜µì…˜ë“¤ë„ ìƒˆë¡­ê²Œ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì—…ë¬´ë¥¼ í•˜ë©´ì„œ `JVM, GC`ì™€ ê´€ë ¨í•˜ì—¬ ë” ê³µë¶€í•´ë³´ê³  ì‹¶ì„ ë•Œ, ì´ ì±…ì„ ìì£¼ ì°¾ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤."}]}},"pageContext":{}},"staticQueryHashes":[],"slicesMap":{}}